(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[87],{2053:function(t,e,n){"use strict";n.r(e);var r=n(6),o=n(4),i=n(22),a=n(990),s=n(12),l=n(10),c=n(684),u=n(2372),p=n(20),d=n(27),f=n(140),h=n(1),y=n(82),m=n(0),b=n(2375),g=n(2315),v=function(t){var e=t.textStylePolyester,n=(t.variantFluent,t.colorFluent,Object(h.__rest)(t,["textStylePolyester","variantFluent","colorFluent"]));return m.createElement(g.Text,Object(h.__assign)({},n,{textStyle:e}))};v.displayName="TextWrapper";var C=n(2319),O={dataFieldVisitor:Object(o.j)(o.g.GlobalAPI)};function T(t){return{dataFieldVisitor:t}}var x,P,S,j=m.createContext(O),_=function(t){function e(e){var n=t.call(this,e)||this;return n.getDiagnosticDataFields=function(){var t;return[Object(o.l)("IsResourceAvailable",n.props.isResourceAvailable,o.d.SystemMetadata),Object(o.l)("IsContentExtensionEnabled",n.props.isExtensionEnabled,o.d.SystemMetadata),Object(o.l)("RenderContextType",Object(d.b)(n.props.componentTree),o.d.SystemMetadata),Object(o.l)("CommentId",null!==(t=n.props.threadId)&&void 0!==t?t:"",o.d.SystemMetadata)]},n.getUpdatedResource=Object(y.k)((function(t,e){return Object(h.__assign)(Object(h.__assign)({},t),{id:e})})),n.createTelemetryContext=Object(y.k)(T),n.getAccessibilitySetProperties=Object(y.l)((function(t){var e,n,r;return{accessibilityPositionInSet:null===(e=null==t?void 0:t.setItem)||void 0===e?void 0:e.positionInSet,accessibilitySetSize:null===(n=null==t?void 0:t.setItem)||void 0===n?void 0:n.setSize,accessibilitySetLevel:null===(r=null==t?void 0:t.setItem)||void 0===r?void 0:r.level}}),(function(){return[n.props.accessibilityMetadata]})),n.state={keyIter_deprecated:0},n}return Object(h.__extends)(e,t),e.prototype.componentDidUpdate=function(t){var e,n;t.isResourceAvailable!==this.props.isResourceAvailable&&(null===(n=(e=Object(o.i)()).logDiagnosticTrace)||void 0===n||n.call.apply(n,Object(h.__spread)([e,Object(y.q)(x||(x=Object(h.__makeTemplateObject)(["HostableComponentResourceAvailabilityUpdated"],["HostableComponentResourceAvailabilityUpdated"]))),r.e.reserveTag(554717322),o.h.Info,o.c.ProductServiceUsage,this.props.telemetryVisitor],this.getDiagnosticDataFields())))},e.prototype.componentDidMount=function(){var t,e;null===(e=(t=Object(o.i)()).logDiagnosticTrace)||void 0===e||e.call.apply(e,Object(h.__spread)([t,Object(y.q)(P||(P=Object(h.__makeTemplateObject)(["HostableComponentMount"],["HostableComponentMount"]))),r.e.reserveTag(554717323),o.h.Info,o.c.ProductServiceUsage,this.props.telemetryVisitor],this.getDiagnosticDataFields()))},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=Object(o.i)()).logDiagnosticTrace)||void 0===e||e.call.apply(e,Object(h.__spread)([t,Object(y.q)(S||(S=Object(h.__makeTemplateObject)(["HostableComponentUnmount"],["HostableComponentUnmount"]))),r.e.reserveTag(554717324),o.h.Info,o.c.ProductServiceUsage,this.props.telemetryVisitor],this.getDiagnosticDataFields()))},e.prototype.render=function(){if(!this.props.isResourceAvailable||!this.props.resource||!this.props.threadId)return null;if(!this.props.isExtensionEnabled)return r.b?m.createElement(v,{textStylePolyester:"MediumBold"},"Debug Error: This comment card's extension is disabled."):null;var t=this.getUpdatedResource(this.props.resource,this.props.threadId),e=this.getAccessibilitySetProperties(),n=m.createElement(C.a,{api:this.props.themeAPI},m.createElement(b.a,Object(h.__assign)({commentAPI:this.props.commentAPI,focusManager:this.props.focusManager,localizationAPI:this.props.localizationAPI,peopleAPI:this.props.peopleAPI,resource:t,telemetryVisitor:this.props.telemetryVisitor,componentRef:this.props.componentRef,componentTree:this.props.componentTree,maximumDimensions:this.props.maximumDimensions,onInitialRender:this.props.onInitialRender,setComponentRef:this.props.setComponentRef,isVirtualized:this.props.isVirtualized,componentInstanceId:this.props.componentInstanceId,correlationId:this.props.correlationId,lppManager:this.props.lppManager,accessibilityMetadata:this.props.accessibilityMetadata},e)));return m.createElement(j.Provider,{value:this.createTelemetryContext(this.props.telemetryVisitor)},n)},e}(m.PureComponent);n.d(e,"makeMapStateToProps",(function(){return w})),n.d(e,"HostableCommentCardRendererContainer",(function(){return E}));var w=function(){var t=u.e(),e=u.c(),n=u.n((function(t){return l.g(t,!0)}),t,e),a=u.a(),h=u.g(),y=u.d(n,a),m=u.o(y);return function(t,e){var a;s.qb()||Object(o.i)().assertConditionTag(Object(f.a)(Object(d.b)(e.componentTree)),"Invalid RenderContextType for HostableComponent received. Defaulting to Integrated RenderMode.",545653836);var u=n(t,e),y=u.thread.length?u.thread[0].commentId:null===(a=e.resource)||void 0===a?void 0:a.id,b=Object(d.b)(e.componentTree),g=void 0;if(s.qb())switch(b){case p.a.FullPane:g={renderMode:i.e.TaskPaneItem};break;case p.a.DiscreteIntegrated:g={renderMode:i.e.Integrated};break;case p.a.DiscreteIsolated:y&&(g={renderMode:i.e.Isolated,threadId:y});break;case p.a.HalfPane:case p.a.None:Object(o.i)().assertConditionTag(!1,"Invalid RenderContextType for HostableComponent received.",593822914);break;default:Object(r.n)(b)}else g=Object(d.b)(e.componentTree)===p.a.DiscreteIntegrated?{renderMode:i.e.Integrated}:y?{renderMode:i.e.Isolated,threadId:y}:void 0;var v=c.c(t,g);return{isResourceAvailable:m(t,e),virtualized_deprecated:l.v(t),modelCapabilities:l.m(t),isDraftThread:h(t,e),isExtensionEnabled:v,threadId:y}}},E=Object(a.b)(w)(_)},2055:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(119),i=n(12),a=n(990),s=a.d,l=n(684),c=n(63),u=n(2374),p=n(2319);n.d(e,"ExtensionAwareCommentPane",(function(){return d}));var d=r.memo((function(t){var e=s((function(e){return Object(l.b)(e,t.extensionRenderMode)})),n=s(c.e)!==o.a.Visible;if(e||n)return null;var a=r.createElement(u.a,{commentAPI:t.commentAPI,peopleAPI:t.peopleAPI,localizationAPI:t.localizationAPI,focusManager:t.focusManager,selectionManager:t.selectionManager,initializationReason:t.initializationReason,registerComponentUIActionListener:t.registerComponentUIActionListener,unregisterComponentUIActionListener:t.unregisterComponentUIActionListener,registerComponentInterruptableCommandListener:t.registerComponentInterruptableCommandListener,unregisterComponentInterruptableCommandListener:t.unregisterComponentInterruptableCommandListener,resource:t.resource,telemetryVisitor:t.telemetryVisitor,correlationId:t.correlationId,onInitialRender:t.onInitialRender,lppManager:t.lppManager,componentRef:t.componentRef,componentInstanceId:t.componentInstanceId});return i.bb()&&(a=r.createElement(p.a,{api:t.themeAPI},a)),a}))},2056:function(t,e,n){"use strict";n.r(e);var r=n(990),o=n(119),i=n(684),a=n(63),s=n(1),l=n(0),c=n(12),u=n(2374),p=n(2319),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.__extends)(e,t),e.prototype.render=function(){if(this.props.isExtensionEnabled_deprecated||this.props.isDisabled_deprecated)return null;var t=l.createElement(u.a,{commentAPI:this.props.commentAPI,peopleAPI:this.props.peopleAPI,localizationAPI:this.props.localizationAPI,focusManager:this.props.focusManager,selectionManager:this.props.selectionManager,initializationReason:this.props.initializationReason,registerComponentUIActionListener:this.props.registerComponentUIActionListener,unregisterComponentUIActionListener:this.props.unregisterComponentUIActionListener,registerComponentInterruptableCommandListener:this.props.registerComponentInterruptableCommandListener,unregisterComponentInterruptableCommandListener:this.props.unregisterComponentInterruptableCommandListener,resource:this.props.resource,telemetryVisitor:this.props.telemetryVisitor,correlationId:this.props.correlationId,onInitialRender:this.props.onInitialRender,lppManager:this.props.lppManager,componentRef:this.props.componentRef,componentInstanceId:this.props.componentInstanceId});return c.bb()&&(t=l.createElement(p.a,{api:this.props.themeAPI},t)),t},e}(l.PureComponent);n.d(e,"connector",(function(){return f})),n.d(e,"ExtensionAwareCommentPaneContainer_deprecated",(function(){return h}));var f=Object(r.b)((function(t,e){return{isExtensionEnabled_deprecated:Object(i.b)(t,e.extensionRenderMode),isDisabled_deprecated:Object(a.e)(t)!==o.a.Visible}})),h=f(d)},2269:function(t,e,n){"use strict";var r=n(2363),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();e.a=i},2271:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),o=r.createContext(new Proxy({},{get:function(){throw new Error("ComponentTreeIdContext undefined. Did you forget to render a ComponentTreeIdContext context provider?")}}))},2274:function(t,e,n){"use strict";var r;!function(t){t[t.New_nonFluent=0]="New_nonFluent",t[t.Normal=1]="Normal",t[t.Editing=2]="Editing",t[t.PendingDraft=3]="PendingDraft",t[t.PendingEdit=4]="PendingEdit",t[t.EditPreCommitPending=5]="EditPreCommitPending",t[t.Resolved=6]="Resolved",t[t.LowFidelityWarningEdit=7]="LowFidelityWarningEdit",t[t.LowFidelityWarningDelete=8]="LowFidelityWarningDelete",t[t.Error=9]="Error"}(r||(r={})),e.a=r},2284:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Image=e.getIconProps=void 0;var c=s(n(0)),u=l(n(2365)),p=n(2316).StyleSheet.createViewStyle({position:"relative",flex:0,overflow:"visible"});e.getIconProps=function(t){var e;if(null!=t){if("string"==typeof t)e={src:t,style:{width:"16px",height:"16px"}};else{var n=t.width?t.width:"16px",r=t.height?t.height:"16px";e={src:t.uri,style:{width:n,height:r}}}return{imageProps:e}}return null};var d=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.render=function(){var t;return t="string"==typeof this.props.source?this.props.source:void 0===this.props.source||null===this.props.source?null:this.props.source.uri,c.createElement("div",{style:this._getStyles(t)},this.props.children)},e.prototype._getStyles=function(t){var e=u.default.combine(p,this.props.style);e.display="flex",e.backgroundColor="transparent",e.backgroundImage='url("'+t+'")';var n="contain";switch(this.props.resizeMode){case"cover":n="cover";break;case"stretch":n="100% 100%";break;case"repeat":n="auto"}return e.backgroundPosition="center center",e.backgroundSize=n,e.backgroundRepeat="repeat"===this.props.resizeMode?"repeat":"no-repeat",e},e}(c.Component);e.Image=d},2285:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.buildDivProps=e.buildFlexboxProps=e.buildFlexboxStyle=e.buildLeafStyle=void 0;var o=r(n(2365)),i=n(2316),a=i.StyleSheet.createViewStyle({}),s=i.StyleSheet.createViewStyle({position:"relative",flexDirection:"column",flexGrow:0,flexShrink:0,overflow:"hidden",alignItems:"stretch"});function l(t){return{style:o.default.combine([a,s,t.style])}}s.display="flex",e.buildLeafStyle=function(t){var e=o.default.combine([a,t]);if(!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(e))return e},e.buildFlexboxStyle=function(t){return o.default.combine([a,s,t])},e.buildFlexboxProps=l,e.buildDivProps=function(t){var e=l(t);return t.accessibilityLabel?e["aria-label"]=t.accessibilityLabel:e["aria-label"]&&(e["aria-label"]=void 0),e}},2314:function(t,e,n){"use strict";var r,o;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),function(t){t[t.AllCardsTabbable=0]="AllCardsTabbable",t[t.ExpandedCardTabbable=1]="ExpandedCardTabbable",t[t.ExpandedCardOrFirstCardTabbable=2]="ExpandedCardOrFirstCardTabbable",t[t.SelectedCardTabbable=3]="SelectedCardTabbable"}(r||(r={})),function(t){t[t.AllPostsTabbable=0]="AllPostsTabbable",t[t.ExpandedCardPostsTabbable=1]="ExpandedCardPostsTabbable",t[t.ExpandedCardRootPostTabbable=2]="ExpandedCardRootPostTabbable",t[t.SelectedPostTabbable=3]="SelectedPostTabbable"}(o||(o={}))},2315:function(t,e,n){t.exports=n(2525)},2316:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StyleSheet=void 0,e.StyleSheet=function(){function t(){}return t.createViewStyle=function(t){return this._adaptStyles(t)},t._adaptStyles=function(t){if(void 0!==t.flex){var e=t.flex;delete t.flex,e>0?(t.flexGrow=e,t.flexShrink=1):e<0?(t.flexGrow=0,t.flexShrink=-e):(t.flexGrow=0,t.flexShrink=0)}return void 0!==t.marginVertical&&(t.marginTop=t.marginVertical,t.marginBottom=t.marginVertical,delete t.marginVertical),void 0!==t.marginHorizontal&&(t.marginLeft=t.marginHorizontal,t.marginRight=t.marginHorizontal,delete t.marginHorizontal),void 0===t.marginHorizontal&&void 0===t.marginVertical&&void 0===t.marginLeft&&void 0===t.marginRight&&void 0===t.marginTop&&void 0===t.marginBottom||void 0===t.margin||(console.error("Conflicting rules for margin specified."),delete t.margin),void 0!==t.paddingVertical&&(t.paddingTop=t.paddingVertical,t.paddingBottom=t.paddingVertical,delete t.paddingVertical),void 0!==t.paddingHorizontal&&(t.paddingLeft=t.paddingHorizontal,t.paddingRight=t.paddingHorizontal,delete t.paddingHorizontal),void 0===t.paddingHorizontal&&void 0===t.paddingVertical&&void 0===t.paddingLeft&&void 0===t.paddingRight&&void 0===t.paddingTop&&void 0===t.paddingBottom||void 0===t.padding||(console.error("Conflicting rules for padding specified."),delete t.padding),t},t}()},2317:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextualMenu=e.getContextualMenuItems=void 0;var l=n(2284),c=s(n(0));e.getContextualMenuItems=function(t){if(void 0!==t){var e=[];return t.items.forEach((function(t){var n=l.getIconProps(t.icon);e[e.length]={key:t.key,name:t.name,iconProps:n,onClick:t.onClick,ariaLabel:t.accessibilityTitle,disabled:t.disabled}})),{items:e,ariaLabel:t.accessibilityTitle}}return null};var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.showContextualMenu=function(t,e){console.warn("Contextmenu not implemented")},e}(c.Component);e.ContextualMenu=u},2318:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PalettesContext=e.Palettes=void 0;var a=n(2557);Object.defineProperty(e,"Palettes",{enumerable:!0,get:function(){return a.Palettes}});var s=i(n(0)).createContext(a.Palettes.Default);e.PalettesContext=s},2319:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(588),o=n(1927),i=n(0),a=n(1851),s=n(1199),l=n(12),c=function(t){var e=Object(r.a)();if(!l.bb())return i.createElement(i.Fragment,null,t.children);var n=Object(s.b)(e),c=Object(s.c)(e);return i.createElement(o.a,{style:{background:"transparent"},as:i.Fragment,theme:e},i.createElement(a.a.Provider,{value:{colors:n,styles:c}},t.children))}},2320:function(t,e,n){"use strict";var r,o=n(1),i=n(6),a=n(4),s=n(0),l=n.n(s),c=n(250),u=n(139),p=n(43),d=n(12),f=n(627),h=n(14),y=n(177),m=n(48),b=n(277),g=n(301),v=n(45),C=n(310),O=n(565),T=n(233),x=n(2274),P=n(20);!function(t){t[t.Default=0]="Default",t[t.Disabled=1]="Disabled",t[t.ReadOnly=2]="ReadOnly"}(r||(r={}));var S,j=r,_=n(11),w=n(1105),E=n(70),k=n(479),I=n(1204),R=n(299),A=n(369),D=n(189),M=n(1851),B=n(130),N=n(873);!function(t){t[t.RootPost=1]="RootPost",t[t.ReplyPost=2]="ReplyPost",t[t.ViewMoreRepliesButton=3]="ViewMoreRepliesButton"}(S||(S={}));var L,H=S;!function(t){t[t.Editing=0]="Editing",t[t.Disabled=1]="Disabled",t[t.ReadOnly=2]="ReadOnly"}(L||(L={}));var F,U=L;!function(t){t[t.CardContextMenuItem=0]="CardContextMenuItem",t[t.ActionBarItem=1]="ActionBarItem"}(F||(F={}));var z,K=n(82);!function(t){t[t.Post=0]="Post",t[t.Card=1]="Card"}(z||(z={}));var V=n(3),W=n(36),q=Object(_.c)((function(t){var e;return{cardTopperContainerRoot:Object(V.eb)({borderBottom:"1px solid",borderColor:null!==(e=null==t?void 0:t.CardTopperContainerBorder)&&void 0!==e?e:W.a.GRAY_B}),cardTopperContainerFlexWrapper:Object(V.eb)({display:"flex",alignItems:"center"}),cardTopperContainerLeftElement:Object(V.eb)({flex:1})}})),G=l.a.memo((function(t){var e,n=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,r=q(n);return l.a.createElement("div",{onClick:t.onPress,className:r.cardTopperContainerRoot},l.a.createElement("div",{className:r.cardTopperContainerFlexWrapper},l.a.createElement("div",{className:r.cardTopperContainerLeftElement},t.leftElement),t.rightElement))}));G.displayName="CardTopperContainer";var Q=n(1202),Y=n(1203),J=n(651),$=n(76),X=n(1854),Z=n(2271),tt=/{([^{}]+)}|[^{}]+/g;var et=n(164),nt=n(1855);function rt(t){return 100===t}var ot,it=n(953),at=function(t){function e(e){var n=t.call(this,e)||this;return n.renderWithContexts=function(t,e){if(!d.b())return null;Object(a.i)().assertConditionTag(1===n.props.assignees.length,"There should be exactly one assignee",587794504);var r,o,i=t.renderContextType,l=rt(n.props.completion),c=$.i({id:n.props.id,renderContextType:i}),u=!1;n.props.assignees.length>0?(u=n.isAssignedToYou(),r=Object(J.n)(n.props.assignees[0],n.props.localizationAPI),o=Object(J.o)(n.props.assignees[0],l,n.props.localizationAPI)):(r=Object(J.r)(n.props.localizationAPI),o=Object(J.q)(l,n.props.localizationAPI));var p=Object(it.c)(l,u,n.hasNonInteractiveDisplayMode(),null==e?void 0:e.colors);return s.createElement("div",{className:p.taskTopperContainer,id:$.j({id:n.props.id,renderContextType:i})},s.createElement(Q.a,{content:Object(J.l)(rt(n.props.completion),n.props.localizationAPI),tooltipProps:nt.a},n.renderTaskTopper(c,p,l,o)),n.getStyledHeaderText(r,p))},n.onClick=n.onClick.bind(n),n}return Object(o.__extends)(e,t),e.prototype.hasNonInteractiveDisplayMode=function(){return this.props.displayMode===j.ReadOnly||this.props.displayMode===j.Disabled},e.prototype.hasReadOnlyDisplayMode=function(){return this.props.displayMode===j.ReadOnly},e.prototype.onClick=function(){this.props.onResolveTaskCheckboxPressed&&this.props.onResolveTaskCheckboxPressed(this.props.id)},e.prototype.getStyledHeaderText=function(t,e){var n=this.isAssignedToYou(),r=Object(it.c)(rt(this.props.completion),n,this.hasNonInteractiveDisplayMode()),o=n||!this.props.assignees||0===this.props.assignees.length?this.renderAssignedToYouLabel(d.bb()?e:r,t):this.renderAssignedToPersonLabel(d.bb()?e:r);return s.createElement(Q.a,{content:Object(J.p)(n,this.props.assignees[0],this.props.localizationAPI),tooltipProps:nt.a},o)},e.prototype.renderAssignedToYouLabel=function(t,e){return s.createElement("div",{className:this.hasReadOnlyDisplayMode()?t.readOnlyTaskLabel:t.taskLabel},s.createElement("span",{className:t.taskTopperCheckbox.text},e))},e.prototype.renderAssignedToPersonLabel=function(t){var e,n,r,o,i=this,a=this.props.localizationAPI.getString(111);return s.createElement("div",{className:this.hasReadOnlyDisplayMode()?t.readOnlyTaskLabel:t.taskLabel},s.createElement("span",{className:t.taskTopperCheckbox.text},(n=function(e,n){return i.renderAssigneeName(Object(u.g)(i.props.assignees[0]),n,t)},o=[],(e=a).replace(tt,(function(t,i){var a,s=e+o.length;return(a=void 0!==i?n(i,s):r?r(t,s):t)&&o.push(a),""})),o)))},e.prototype.renderAssigneeName=function(t,e,n){var r=Object(it.c)(rt(this.props.completion),!1,this.hasNonInteractiveDisplayMode());return s.createElement("span",{key:e,className:d.bb()?n.taskAssignee:r.taskAssignee},t)},e.prototype.isAssignedToYou=function(){return!(!this.props.assignees||!this.props.assignees.length)&&!!this.props.assignees[0].IsCurrentUser},e.prototype.render=function(){return d.bb()?Object(X.a)(this.renderWithContexts,Z.a,M.a):Object(X.a)(this.renderWithContexts,Z.a)},e.prototype.renderTaskTopper=function(t,e,n,r){return this.hasReadOnlyDisplayMode()?null:s.createElement(Y.a,{id:t,componentRef:this.props.taskTopperCheckboxRef,styles:e.taskTopperCheckbox,checked:n,"data-item-id":this.props.id,onChange:this.onClick,checkmarkIconProps:Object(et.d)().CHECKMARK_ICON_TOPPER,disabled:this.hasNonInteractiveDisplayMode(),ariaLabel:r})},e}(s.PureComponent),st=n(1863),lt={display:"flex",overflow:"hidden",marginBottom:"5px",flexDirection:"row",flexShrink:0,color:W.a.WARNING_RED,fontSize:"11px",outline:"none",wordBreak:"break-word"},ct=Object(_.c)((function(){return{card:Object(V.eb)(lt,{marginLeft:st.c+10,marginRight:st.c+10}),post:Object(V.eb)(lt,{marginLeft:"3px",marginRight:"3px"})}})),ut=s.memo((function(t){var e=J.f(t.localizationAPI,t.draftWarningState.type),n=ct(),r=t.target===z.Card?n.card:n.post;return s.createElement("div",{"aria-label":e,className:r,id:t.id},e)})),pt=n(1009),dt=n(372),ft=n(447),ht=n(170),yt=Object(_.c)((function(t){var e,n;return{container:Object(V.eb)({display:"flex",direction:"inherit",overflow:"hidden",flexDirection:"row",flexWrap:"nowrap",margin:0,border:0,position:"relative"}),body:Object(V.eb)({fontFamily:"inherit",color:null!==(e=null==t?void 0:t.TaskBorder)&&void 0!==e?e:et.b.TASK_BORDER,fontWeight:"normal",fontSize:"12px",lineHeight:16,marginLeft:"3px",userSelect:"text",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),icon:Object(V.eb)({color:null!==(n=null==t?void 0:t.TaskBorder)&&void 0!==n?n:et.b.TASK_BORDER,fontSize:"12px",lineHeight:16,marginLeft:"3px",marginRight:"3px",height:16,width:12,minWidth:12})}})),mt=Object(V.eb)(ht.l,{selectors:(ot={},ot[V.l]={backgroundColor:"WindowText"},ot)});var bt=Object(_.c)((function(t,e){var n=function(t){var e,n;return Object(V.eb)({backgroundColor:null!==(e=null==t?void 0:t.BlueDot)&&void 0!==e?e:"#006BFF",borderRadius:"50%",borderWidth:2,borderColor:null!==(n=null==t?void 0:t.CardBackground)&&void 0!==n?n:"white",height:6,width:6,position:"absolute"},mt)}(e);return{blueDotOnReply:Object(V.eb)(n,{left:27,top:36+(t?16:0)}),blueDotOnRoot:Object(V.eb)(n,{left:6,top:9+(t?16:0)}),blueDotOnViewMoreRepliesButton:Object(V.eb)(n,{left:5,top:11})}})),gt=s.memo((function(t){var e,n=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,r=bt(t.hasTaskTopper,n),o="";switch(t.dotType){case H.RootPost:o=r.blueDotOnRoot;break;case H.ReplyPost:o=r.blueDotOnReply;break;case H.ViewMoreRepliesButton:o=r.blueDotOnViewMoreRepliesButton;break;default:Object(i.n)(t.dotType)}return s.createElement("span",{className:o})})),vt=function(t){var e;return Object(V.db)({rootFocused:Object(V.eb)({color:null!==(e=null==t?void 0:t.Text)&&void 0!==e?e:W.a.GRAY_H,outline:"none",border:"1px solid transparent",backgroundColor:"transparent"},ht.k)})},Ct=Object(_.c)((function(t,e,n){var r,o,i,a,s=null!==(r=null==n?void 0:n.PrimaryButtonHovered)&&void 0!==r?r:W.a.GRAY_H,l=null!==(o=null==n?void 0:n.PrimaryButtonPressed)&&void 0!==o?o:s;return e&&(s=null!==(i=null==n?void 0:n.ExpandButtonTextResolvedHovered)&&void 0!==i?i:W.a.GRAY_H,l=null!==(a=null==n?void 0:n.ExpandButtonTextResolvedPressed)&&void 0!==a?a:s),Object(V.db)({root:Object(V.eb)({overflow:"visible",position:"relative",height:"28px",margin:0,padding:0,border:"1px solid transparent",backgroundColor:"transparent",boxSizing:"border-box",color:t,cursor:"pointer",flexShrink:0,outline:"none",selectors:{".ms-Fabric--isFocusVisible &:focus::after":ht.m}}),rootFocused:Object(V.eb)({color:t,outline:"none",border:"1px dotted",backgroundColor:"transparent"},ht.k),flexContainer:Object(V.eb)({justifyContent:"flex-start"}),textContainer:Object(V.eb)({flexGrow:0,flexShrink:0,margin:0,padding:0,marginLeft:"16px"}),label:Object(V.eb)({margin:0,padding:0,fontWeight:e?void 0:"bold",fontSize:"12px",lineHeight:"16px",fontFamily:'"Segoe UI", "Segoe UI Web", Arial, Verdana, sans-serif'}),rootHovered:Object(V.eb)({color:s,backgroundColor:"transparent"},ht.l),rootPressed:Object(V.eb)({color:l,backgroundColor:"transparent",outline:"none",border:"1px solid transparent"})})})),Ot=Object(_.c)((function(t,e,n){var r,o,i=null!==(r=null==n?void 0:n.PrimaryButton)&&void 0!==r?r:t;return e&&(i=null!==(o=null==n?void 0:n.ExpandButtonTextResolved)&&void 0!==o?o:W.a.RESOLVED_CARD_TEXT),{moreRepliesContainer:Ct(i,e,n),moreRepliesContainerRestrictFocus:Object(V.db)(Ct(i,e,n),vt(n),{color:i})}}));function Tt(t,e){e(),t.stopPropagation}function xt(t,e){Object(D.f)(t.key)===D.b.Enter&&(e(),t.stopPropagation())}var Pt=s.memo((function(t){var e,n,r=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,o=null!==(n=null==r?void 0:r.PrimaryButton)&&void 0!==n?n:Object(ft.a)().primary,i=Ot(o,t.isCardResolved,r),a=pt.a(Tt,t.onPress),l=pt.a(xt,t.onPress);return s.createElement(dt.a,{"aria-label":t.innerText,styles:!d.vb()&&t.restrictControl?i.moreRepliesContainerRestrictFocus:i.moreRepliesContainer,tabIndex:t.isTabbable?0:-1,onClick:a,onKeyDown:l,id:t.id,text:t.innerText},t.unreadPostHidden?s.createElement(gt,{dotType:H.ViewMoreRepliesButton,hasTaskTopper:!1,renderContextType:t.renderContextType}):null)})),St=n(280),jt=n(1857);function _t(t){var e,n,r;return{icon:{color:null!==(n=null==t?void 0:t.DefaultButtonIcon)&&void 0!==n?n:W.a.GRAY_200},iconHovered:(e={},e[V.l]={color:"HighlightText"},e),iconDisabled:{color:null!==(r=null==t?void 0:t.DefaultButtonIconDisabled)&&void 0!==r?r:W.a.GRAY_100},rootDisabled:{backgroundColor:"transparent"},rootHovered:Object(d.bb)()?{backgroundColor:null==t?void 0:t.DefaultButtonHovered}:void 0,rootPressed:Object(d.bb)()?{backgroundColor:null==t?void 0:t.DefaultButtonPressed}:void 0}}var wt=Object(_.c)((function(t){return{defaultButton:Object(ht.o)(_t(t))}})),Et=function(t){function e(e){var n=t.call(this,e)||this;return n.onClick=function(t){var e=n.props.onClick;if("function"==typeof e)return e(t)},n.renderWithContexts=function(t){var e=n.props.tooltipText;return e?s.createElement(Q.a,{content:e,directionalHint:n.props.tooltipDirection,tooltipProps:nt.a},n.renderIconButton(t)):n.renderIconButton(t)},n.styles_deprecated=wt(),n}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return!!this.props.disabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){return this.props.isTabbable&&!this.disabled?0:-1},enumerable:!1,configurable:!0}),e.prototype.renderIconButton=function(t){var e=Object(d.bb)()?wt(null==t?void 0:t.colors):this.styles_deprecated;return s.createElement(St.a,{styles:e.defaultButton,ariaLabel:this.props.accessibilityLabel,disabled:this.disabled,iconProps:{iconName:Object(jt.a)(this.props.icon),styles:this.props.iconStyles},id:this.props.id,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.onClick,tabIndex:this.tabIndex,text:this.props.text})},e.prototype.render=function(){return Object(d.bb)()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(s.PureComponent),kt={root:{width:12,height:16,lineHeight:18}},It=Object(V.db)(kt,{root:{height:14,lineHeight:14}}),Rt=Object(V.db)(kt,{root:{width:16}}),At=Object(_.c)((function(t){var e,n=null==t?void 0:t.ResolvedCardTitle;return{resolvedCardButtonsDefaultIconContainerStyles:Object(V.eb)({margin:"1px 0px",selectors:Object(d.bb)()?{".ms-Button-icon, .ms-font-m":{color:n}}:void 0}),resolvedCardButtonsLastIconContainerStyles:Object(V.eb)({margin:"1px 4px 1px 0px",selectors:Object(d.bb)()?{".ms-Button-icon":{color:n}}:void 0}),resolvedCardButtonIconStyles:(e={},e[3]=Object(ht.j)(kt),e[16]=Object(ht.j)(It),e[25]=Object(ht.j)(Rt),e),resolvedCardButtonIconDefaultStyles:kt}})),Dt=l.a.memo((function(t){var e,n=t.actions,r=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,o=At(r),i=n.map((function(t,e){var r,i=e===n.length-1;return l.a.createElement("div",{key:e+1+"-"+t.text,className:i?o.resolvedCardButtonsLastIconContainerStyles:o.resolvedCardButtonsDefaultIconContainerStyles},l.a.createElement(Et,{accessibilityLabel:t.accessibilityLabel,disabled:t.disabled,icon:t.icon,iconStyles:null!==(r=o.resolvedCardButtonIconStyles[t.icon])&&void 0!==r?r:o.resolvedCardButtonIconDefaultStyles,id:t.id,isTabbable:t.isTabbable,onKeyDown:t.onKeyDown,onClick:t.onClick,text:"",tooltipDirection:t.tooltipDirection,tooltipText:t.text}))}));return l.a.createElement(s.Fragment,null,i)}));Dt.displayName="ResolvedCardButtons";var Mt=n(237),Bt=n(2315),Nt=Object(_.c)((function(t){var e,n,r;return{resolvedCardContainer:Object(V.eb)({display:"flex",flexDirection:"row",alignItems:"center"}),resolvedCardIcon:Object(V.eb)((e={width:8,height:8,color:null!==(n=null==t?void 0:t.ResolvedCardTitle)&&void 0!==n?n:W.a.GRAY_160,lineHeight:8,margin:"10px 10px 10px 14px"},e[ht.e]={color:"ButtonText"},e)),resolvedCardLabel:Object(V.eb)({fontFamily:'"Segoe UI", "Segoe UI Web", Arial, Verdana, sans-serif',fontWeight:V.k.semibold,color:null!==(r=null==t?void 0:t.ResolvedCardTitle)&&void 0!==r?r:W.a.GRAY_160,lineHeight:14})}})),Lt=s.memo((function(t){var e,n=Object(jt.a)(20),r=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,o=Nt(r),i=d.b()&&t.taskCompleter?t.localizationAPI.getStringOrUndefined(202):t.localizationAPI.getStringOrUndefined(197);return s.createElement("div",{className:o.resolvedCardContainer},n&&s.createElement(Mt.a,{iconName:n,className:o.resolvedCardIcon}),s.createElement("div",{className:o.resolvedCardLabel},d.bb()?i:s.createElement(Bt.Text,{numberOfLines:1,acceptsKeyboardFocus:!1,accessible:!1},i)))}));Lt.displayName="ResolvedCardLabel";var Ht,Ft,Ut=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.getNewCandidateTaskAssignees=Object(K.k)((function(t,e){var n=Object(u.a)(t);return e?Object(u.h)(n,e):n})),r.onEditorFocus=function(){!r.isActiveDraft()&&!r.isActiveReply()||r.isSelectionWithinCard()||(Object(a.i)().assertConditionTag(d.vb(),"Should have selection in card with draft if NewSelectionInteractions off",572844239),r.props.onCardSelect(r))},r.notifyRenderedOnce=Object(K.o)((function(){r.props.onCardRendered&&r.props.onCardRendered(r.props)})),r.toggleExpansion=function(){r.props.cardCollapsedState===C.a.Collapsed?r.props.onCardSelectExpand(r,!0,!1):r.props.onCardCollapse(r)},r.renderExpandButton=function(t){var e=s.Children.count(r.props.children),n=r.props.displayMode===O.a.Resolved,i=r.props.componentTreeId.renderContextType;if(!(r.props.cardCollapsedState===C.a.Expanded||e<=1||(!n||!d.i())&&e<=2))return s.createElement(Pt,Object(o.__assign)({id:Object($.Y)({id:r.props.id,renderContextType:i}),innerText:J.s(r.props.localizationAPI,e,n)||"",isCardResolved:n,isTabbable:r.props.isTabbable,preventDefaultKeyDownBehavior:r.props.preventDefaultKeyDownBehavior,renderContextType:i,restrictControl:!!r.props.restrictActionControls,key:"expandButton"},t))},r.getId=r.getId.bind(r),r.onTaskAssigneeUpdated=r.onTaskAssigneeUpdated.bind(r),r.onRootCardViewFocus=r.onRootCardViewFocus.bind(r),r}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){var t,e;this.props.onCardMounted(this.props),this.isActiveDraft()&&(null===(e=(t=Object(a.i)()).logDiagnosticTrace)||void 0===e||e.call(t,Object(K.q)(Ht||(Ht=Object(o.__makeTemplateObject)(["DraftCardMount"],["DraftCardMount"]))),i.e.reserveTag(556827602),a.h.Info,a.c.ProductServiceUsage,Object(a.j)(a.g.ReviewedAsNotNecessary),Object(a.l)("CommentId",this.props.id,a.d.SystemMetadata),Object(a.l)("RenderContextType",this.props.componentTreeId.renderContextType,a.d.SystemMetadata),Object(a.l)("CardDisplayMode",this.props.displayMode,a.d.SystemMetadata)))},e.prototype.componentWillUnmount=function(){var t,e;this.isActiveDraft()&&(null===(e=(t=Object(a.i)()).logDiagnosticTrace)||void 0===e||e.call(t,Object(K.q)(Ft||(Ft=Object(o.__makeTemplateObject)(["DraftCardUnmount"],["DraftCardUnmount"]))),i.e.reserveTag(556827603),a.h.Info,a.c.ProductServiceUsage,Object(a.j)(a.g.ReviewedAsNotNecessary),Object(a.l)("CommentId",this.props.id,a.d.SystemMetadata),Object(a.l)("RenderContextType",this.props.componentTreeId.renderContextType,a.d.SystemMetadata),Object(a.l)("CardDisplayMode",this.props.displayMode,a.d.SystemMetadata)))},e.prototype.getId=function(){return this.props.id},e.prototype.isActiveReply=function(){return this.props.displayMode===O.a.Reply||this.props.displayMode===O.a.ReplyPreCommitPending},e.prototype.isActiveDraft=function(){return this.props.displayMode===O.a.Draft||this.props.displayMode===O.a.DraftPreCommitPending},e.prototype.onTaskAssigneeUpdated=function(t){this.props.onSelectedTaskAssigneeUpdated(t)},e.prototype.getTaskAssignerProps=function(){var t;if(d.b()&&this.props.supportsTasks){var e=this.isActiveReply()&&!this.props.taskTopperProps;if((!e||d.c())&&this.props.currentMentionees){var n=e||this.isActiveDraft(),r=J.m(this.props.localizationAPI,n),o=this.getNewCandidateTaskAssignees(this.props.currentMentionees,null===(t=this.props.taskTopperProps)||void 0===t?void 0:t.assignees),i=this.props.localizationAPI.getString(128);if(o&&0!==Object.keys(o).length)return{renderContextType:this.props.componentTreeId.renderContextType,id:this.props.id,label:r,candidateAssignees:o,isNewThread:this.isActiveDraft(),selectedAssignee:this.props.selectedTaskAssignee,onSelectedTaskAssigneeUpdated:this.onTaskAssigneeUpdated,pickerAriaLabel:i,assignerTooltip:this.props.localizationAPI.getString(182),preventDefaultKeyDownBehavior:this.props.preventDefaultKeyDownBehavior,isTabbable:this.props.isTabbable,localizationAPI:this.props.localizationAPI,displayMode:this.props.displayMode,isTaskThread:!!this.props.taskTopperProps}}}},e.prototype.isSelectionWithinCard=function(){return this.props.selected||this.props.hasSelectedChild},e.prototype.renderDraftWarning=function(){var t=this.props.draftWarningState;return d.C()&&t?s.createElement(ut,{key:"draftWarning",draftWarningState:t,localizationAPI:this.props.localizationAPI,target:z.Card,id:Object($.t)({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType})}):null},e.prototype.onCardSaveDraft=function(t){var e=this.isActiveDraft()||this.isActiveReply();this.props.onSaveDraft&&t&&e&&this.props.onSaveDraft(this.getId(),t)},e.prototype.renderResolvedOrTaskTopperHelper=function(t){var e=this.props.taskTopperProps,n=t.resolvedButtonsProps,r=t.preventDefaultKeyDownBehavior,i=d.b();if(n||i&&e){var a=this.props.componentTreeId.renderContextType,l=n?s.createElement(Dt,{actions:n,renderContextType:a,preventDefaultKeyDownBehavior:r}):void 0,c=e&&!l?s.createElement(at,Object(o.__assign)({},e,{taskTopperCheckboxRef:t.taskTopperCheckboxRef})):s.createElement(Lt,{localizationAPI:this.props.localizationAPI,renderContextType:a,taskCompleter:(null==e?void 0:e.assignees)&&e.assignees.length>0?e.assignees[0]:void 0});return s.createElement(G,Object(o.__assign)({leftElement:c,rightElement:this.props.isReadOnly?void 0:l,preventDefaultKeyDownBehavior:t.preventDefaultKeyDownBehavior},t.cardTopperContainerProps))}},e.prototype.onRootCardViewFocus=function(t){t.target===t.currentTarget&&this.props.onCardFocus(this)},e.DisplayName="CommentCard",e}(s.PureComponent),zt=n(1193),Kt=n(1284),Vt=n(1201),Wt=n(29),qt=n(506),Gt=n(1005),Qt=n(1006),Yt=n(1004),Jt=n(1297),$t=Object(_.c)((function(t){var e,n,r;return{likeButton:Object(V.db)({rootFocused:{color:null!==(e=null==t?void 0:t.MenuIcon)&&void 0!==e?e:W.a.GRAY_H,outline:"none",border:"1px solid",borderColor:null!==(n=null==t?void 0:t.CommonControlBorder)&&void 0!==n?n:Jt.b.gray110},root:{backgroundColor:"transparent",color:null!==(r=null==t?void 0:t.SubText)&&void 0!==r?r:W.a.GRAY_E,height:"16px",maxHeight:"16px",margin:1,padding:0,border:"1px solid transparent",position:"relative",fontSize:"11px",selectors:{".ms-Fabric--isFocusVisible &:focus::after":ht.m,":focus":{outline:"none",borderRadius:"1px",boxShadow:"0px 0px 0px 1px "+W.a.FOCUS_BOX}}}}),dropdown:Object(V.db)({root:{zIndex:"1",selectors:{":focus":{outline:"none",borderRadius:"1px",boxShadow:"0px 0px 0px 1px "+W.a.FOCUS_BOX}}},calloutMain:{},beak:{},beakCurtain:{},container:{}}),likerItem:Object(V.db)({root:{margin:"5px"},details:{},primaryText:{},secondaryText:{},tertiaryText:{},optionalText:{},textContent:{}})}}));var Xt=function(t){var e,n,r=Object(o.__read)(Object(s.useState)(!1),2),i=r[0],a=r[1],c=pt.a((function(){a(!0)}),[]),p=pt.a((function(){a(!1)}),[]),d=Object(M.b)(),f=$t(null==d?void 0:d.colors),h=function(t,e){if(t){var n=t[e];return n&&n.length>0?n.length.toString():void 0}}(t.usersByReactionType,Yt.a.Like),y=Object($.n)({id:t.commentId,renderContextType:t.renderContextType}),m=Object($.l)(y),b=Object($.B)(y),g=Object($.m)(y),v=Object(jt.a)(function(t,e){if(!t)return!1;var n=t[e];return!!n&&n.some((function(t){return t.IsCurrentUser}))}(t.usersByReactionType,Yt.a.Like)?23:22),C=pt.a((function(e){var n=v===Object(jt.a)(23);t.onReactionPressed(t.commentId,!n,Yt.a.Like),e.stopPropagation(),e.preventDefault()}),[t,v]),O=pt.a((function(t){if(Object(Qt.b)(t.key)===Gt.a.ArrowDown&&t.altKey){var e=document.getElementById(m);e&&e.focus(),t.stopPropagation(),t.preventDefault()}}),[m]),T=pt.a((function(t){if(Object(Qt.b)(t.key)===Gt.a.Escape||Object(Qt.b)(t.key)===Gt.a.Tab){var e=document.getElementById(y);e&&e.focus(),t.stopPropagation(),t.preventDefault()}}),[y]);return l.a.createElement("div",{id:g},l.a.createElement(Q.a,{content:null===(e=t.buttonStrings)||void 0===e?void 0:e.buttonLabel,directionalHint:E.a.topCenter,tooltipProps:nt.a},l.a.createElement("span",{id:b,hidden:!0},function(e){var n,r,o;if(e){var i=parseInt(e,10);if(0!==i&&!isNaN(i))return e+" "+(i>1?null===(n=t.buttonStrings)||void 0===n?void 0:n.buttonLabelPlural:null===(r=t.buttonStrings)||void 0===r?void 0:r.buttonLabel)+". "+(null===(o=t.buttonStrings)||void 0===o?void 0:o.buttonA11yDropdownText)}}(h)),l.a.createElement(qt.a,{toggle:!0,id:y,ariaLabel:null===(n=t.buttonStrings)||void 0===n?void 0:n.buttonLabel,role:"button",styles:f.likeButton,onClick:C,tabIndex:t.isTabbable?0:-1,onFocus:c,onBlur:p,iconProps:{iconName:v},checked:v===Object(jt.a)(23),onMouseEnter:c,onMouseLeave:p,onKeyDown:O,"aria-describedby":b},h,function(e){if(!i)return null;var n=function(t,e){if(!t)return[];var n=t[e];return n&&n.length>0?n.map((function(t,e){return{text:Object(u.g)(t),secondaryText:t.UserId,itemID:e.toString()}})):[]}(t.usersByReactionType,Yt.a.Like);if(0===n.length)return null;var r=f.likerItem;return l.a.createElement(Kt.a,{id:m,layerProps:{hostId:g},target:"#"+e,isBeakVisible:!1,styles:f.dropdown,onKeyDown:T,role:"list"},n.map((function(t){return l.a.createElement(Vt.a,Object(o.__assign)({role:"listitem"},t,{key:t.itemID,size:Wt.c.size24,styles:r}))})))}(y))))},Zt=l.a.memo((function(t){return pt.c(d.a,t,Xt)})),te=Object(_.c)((function(t,e){var n,r,o,i,a,s,l,c;return{iconContextMenuAnchor:{menuIconDisabled:{color:null!==(r=null==t?void 0:t.MenuIconDisabled)&&void 0!==r?r:W.a.GRAY_C},menuIcon:(n={color:null!==(o=null==t?void 0:t.MenuIcon)&&void 0!==o?o:W.a.GRAY_F,margin:0,width:"16px"},n[V.l]=d.l()?{color:"ButtonText"}:void 0,n),menuIconPressed:{color:null!==(i=null==t?void 0:t.MenuIconHoveredPressed)&&void 0!==i?i:W.a.GRAY_J},menuIconHovered:Object(V.eb)({color:null!==(a=null==t?void 0:t.MenuIconHoveredPressed)&&void 0!==a?a:W.a.GRAY_J},ht.l),rootPressed:{color:d.bb()?void 0:W.a.GRAY_J,backgroundColor:null==t?void 0:t.DefaultButtonPressed},rootHovered:Object(V.eb)({color:d.bb()?void 0:ht.b.BUTTON_HOVER,backgroundColor:null==t?void 0:t.DefaultButtonHovered},ht.l),rootFocused:Object(V.eb)({color:d.bb()?void 0:W.a.GRAY_H,backgroundColor:null==t?void 0:t.DefaultButton,outline:"none",border:"1px solid",borderColor:null!==(s=null==t?void 0:t.CommonControlBorder)&&void 0!==s?s:Jt.b.gray110},ht.k),root:{flexShrink:0,height:"10px",width:"20px",minWidth:"20px",border:"1px solid transparent",padding:0,margin:0,color:d.bb()?void 0:W.a.GRAY_E,backgroundColor:null==t?void 0:t.DefaultButton,selectors:{".ms-Fabric--isFocusVisible &:focus::after":ht.m,".ms-Button-flexContainer":{position:"relative"}}}},menuItem:Object(V.eb)({overflow:"hidden",margin:0,padding:0,selectors:d.bb()?{":hover":{backgroundColor:null==t?void 0:t.DefaultButtonHovered},":active":{backgroundColor:null==t?void 0:t.DefaultButtonPressed},".ms-Button":{color:null==t?void 0:t.Text,selectors:{":hover":{backgroundColor:null==t?void 0:t.DefaultButtonHovered},":active":{backgroundColor:null==t?void 0:t.DefaultButtonPressed}}}}:void 0}),contextMenu:Object(V.eb)({backgroundColor:null==t?void 0:t.CardBackground,minWidth:30,maxWidth:172,paddingTop:"6px",paddingBottom:"6px",margin:0,overflow:"hidden",selectors:{".ms-FocusZone.ms-ContextualMenu.is-open":Object(V.eb)({display:"flex",alignContent:"flex-end",alignItems:"flex-end",justifyContent:"flex-end",minWidth:30})}}),calloutStyle:{root:{borderColor:null!==(l=null==t?void 0:t.CardBorder)&&void 0!==l?l:W.a.COMMENTS_GRAY,boxShadow:null!==(c=null==e?void 0:e.BoxShadowLevel2)&&void 0!==c?c:ht.a.LEVEL2}}}})),ee=Object(_.c)((function(){var t;return{root:(t={margin:"3px",padding:0,paddingLeft:"7px",paddingRight:"7px",border:"1px transparent",color:W.a.GRAY_E,backgroundColor:"transparent",cursor:"pointer",height:"unset",boxSizing:"border-box",textAlign:"left",minWidth:"30px",maxWidth:166,width:"95%"},t[V.l]=d.l()?{color:"ButtonText"}:void 0,t),rootHovered:ht.l,rootFocused:ht.k,textContainer:{flexGrow:0,flexShrink:0},flexContainer:{justifyContent:"flex-start"},label:{fontSize:"12px",fontWeight:"600",textAlign:"left",fontFamily:"inherit",lineHeight:"20px",maxWidth:122,margin:0,marginLeft:"5px",marginRight:"10px",padding:0,border:0}}}));function ne(t){t&&t.focus()}var re=s.memo((function(t){var e=ee();return s.createElement(dt.a,{componentRef:t.data?ne:void 0,id:t.id,iconProps:{iconName:t.iconName,style:{width:12,height:12,marginTop:"-4px"}},key:t.key,role:"menuitem",ariaLabel:""+t.name,styles:e,"data-is-focusable":!0,onKeyDown:t.onKeyDown,onClick:function(e){t.onClick&&t.onClick(e),t.dismissMenu(e)}},t.name)}));function oe(t,e,n,r,o,i,a){t>0&&i(le(e,te(null==a?void 0:a.colors,null==a?void 0:a.styles),n,r,o))}var ie=s.memo((function(t){var e=Object(o.__read)(s.useState([]),2),n=e[0],r=e[1],i=Object(M.b)(),a=te(null==i?void 0:i.colors,null==i?void 0:i.styles);return pt.b(oe,n.length,t.parentId,t.renderContextType,t.itemType,t.menuItems,r,i),s.createElement(Q.a,{content:t.title,tooltipProps:nt.a},function(t,e,n,r,o){var i=pt.a(ae,t,n,r,o);return s.createElement(St.a,{id:t.id,ariaLabel:t.ariaLabel,styles:e.iconContextMenuAnchor,onMenuClick:i,menuProps:{ariaLabel:t.ariaLabel,className:e.contextMenu,directionalHint:E.a.bottomRightEdge,gapSpace:2,isBeakVisible:!1,shouldFocusOnMount:!1,calloutProps:{preventDismissOnScroll:!1,styles:e.calloutStyle,finalHeight:1},items:n},menuIconProps:{iconName:Object(jt.a)(7),style:{width:16}},tabIndex:t.tabIndex})}(t,a,n,r,i))}));function ae(t,e,n,r,o,i){var a;r.length<1&&o(le(n.parentId,te(null==i?void 0:i.colors,null==i?void 0:i.styles),n.renderContextType,n.itemType,n.menuItems)),null===(a=n.onMenuClick)||void 0===a||a.apply(void 0)}function se(t,e,n){e.onClick(t),n&&n.stopPropagation()}function le(t,e,n,r,o){return r===F.CardContextMenuItem&&o&&o.length>0?o.map((function(r,i){return{id:$.q({id:t,renderContextType:n},r.id||r.text),key:r.id||r.text,iconName:Object(jt.a)(r.icon),name:r.text,data:0===i,className:e.menuItem,onClick:function(e){return se(t,r,e)},onKeyDown:function(e){return function(t,e,n,r,o,i){if(Object(Qt.b)(i.key)===Gt.a.ArrowDown&&0===o){var a=n.id||n.text||"MissingKey",s=document.getElementById($.q({id:t,renderContextType:r},a));if(i.target===s&&e&&e.length>1){var l=e[1].id||e[1].text,c=document.getElementById($.q({id:t,renderContextType:r},l));c&&(c.focus(),i.preventDefault(),i.stopPropagation())}}else Object(Qt.b)(i.key)===Gt.a.Tab&&(i.preventDefault(),i.stopPropagation())}(t,o,r,n,i,e)},onRender:ce}})):r===F.ActionBarItem&&o&&o.length>0?o.map((function(r,i){return{id:$.a({id:t,renderContextType:n},i),key:r.text,iconName:Object(jt.a)(r.icon),name:r.text,data:0===i,className:e.menuItem,onClick:function(e){return se(t,r,e)},onKeyDown:function(e){return function(t,e,n,r){if(Object(Qt.b)(r.key)===Gt.a.ArrowDown){var o=document.getElementById($.a({id:t,renderContextType:n},0));if(r.target===o&&e&&e.length>1){var i=document.getElementById($.a({id:t,renderContextType:n},1));i&&(i.focus(),r.preventDefault(),r.stopPropagation())}}else Object(Qt.b)(r.key)===Gt.a.Tab&&(r.preventDefault(),r.stopPropagation())}(t,o,n,e)},onRender:ce}})):[]}var ce=Object(_.c)((function(t,e){var n=Object(o.__assign)(Object(o.__assign)({},t),{dismissMenu:e});return s.createElement(re,Object(o.__assign)({},n))})),ue=ie,pe={fontWeight:"600",alignSelf:"baseline",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",marginLeft:"3px",userSelect:"text",fontFamily:ht.g+", "+ht.h+", "+ht.i+", Arial, Verdana, sans-serif",marginBottom:"1px",fontSize:"14px",lineHeight:"18px",flex:"4 1 auto"},de=Object(_.c)((function(){return{author:Object(V.eb)(pe),header:Object(V.eb)({display:"flex",direction:"inherit",overflow:d.cb()?void 0:"hidden",flexDirection:"row",flexWrap:"nowrap"})}}));var fe,he=Object(_.c)((function(t,e){return Object(a.i)().assertConditionTag(!!t.localizationAPI,"LocalizationAPI must be present when rendering context menu",595710280),{id:$.I({id:t.parentId,renderContextType:e}),parentId:t.parentId,title:t.localizationAPI?t.localizationAPI.getString(123):"",ariaLabel:t.localizationAPI?t.localizationAPI.getString(123):"",onMenuClick:ye(t),tabIndex:t.isTabbable?0:-1,renderContextType:e,menuItems:t.actionBarItems,itemType:F.ActionBarItem}}),5),ye=Object(_.c)((function(t){return function(e){t.trySelectPost(),e&&Object(D.f)(e.key)===D.b.ArrowDown&&e.preventDefault()}})),me=s.memo((function(t){var e=de();return s.createElement("div",{className:e.header},s.createElement("div",{className:e.author},t.authorLine),function(t){return!t.contextMenuProps||0===t.contextMenuProps.menuItems.length&&0===t.contextMenuProps.actionBarItems.length?null:s.createElement(ue,Object(o.__assign)({},he(t.contextMenuProps,t.renderContextType)))}(t),t.likeButtonProps?s.createElement(Zt,Object(o.__assign)({},t.likeButtonProps)):void 0)})),be=n(783),ge={fontFamily:"inherit",justifyContent:"center"},ve=Object(_.c)((function(t){return{persona:Object(V.eb)(ge,{selectors:Object(d.bb)()?{".ms-Persona-initials":{color:null==t?void 0:t.PersonaInitialsTextColor}}:void 0}),personaResolved:Object(V.eb)(ge,{selectors:Object(d.bb)()?{selectors:{".ms-Persona-initials":{color:null==t?void 0:t.PersonaInitialsTextColorResolved}}}:void 0}),personaRootContainer:Object(V.eb)({margin:8,marginLeft:6,position:"absolute",left:"-15px"}),personaContainer:Object(V.eb)({margin:4,marginLeft:9,marginRight:3})}})),Ce=s.memo((function(t){var e,n,r,i=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,l=null!==(n=null==i?void 0:i.PersonaColorResolved)&&void 0!==n?n:W.a.GRAY_70,c=null!==(r=null==i?void 0:i.PersonaInitialsTextColorResolved)&&void 0!==r?r:W.a.GRAY_140,u={text:t.authorName,coinSize:20,initialsColor:t.resolved?l:t.authorColor||Wt.a.purple,initialsTextColor:t.resolved?c:void 0,hidePersonaDetails:!0},p=!1;if(d.g()){var f=Object(a.i)().getMetadata();p="-4"===f.ring&&"DC2"===f.dataCenter}var h=d.H()&&!p?Object(o.__assign)(Object(o.__assign)({},u),{imageShouldStartVisible:!0,imageUrl:t.authorImageURL,showInitialsUntilImageLoads:!0}):u,y=ve(i);return s.createElement("div",{className:t.isParent?y.personaRootContainer:y.personaContainer,style:t.opacity?{opacity:t.opacity}:void 0},s.createElement(be.a,Object(o.__assign)({},h,{className:t.resolved?y.personaResolved:y.persona})))})),Oe=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.getStyles=function(t){return Object(zt.b)(null==t?void 0:t.colors,null==t?void 0:t.styles)},r.renderWithContexts=function(t,e){r.styles=r.getStyles(e);var n=[],i=r.props.displayMode===O.a.Draft||r.props.displayMode===O.a.DraftPreCommitPending,a=t.renderContextType;if(r.props.anchorText){var l=$.b({id:r.props.id,renderContextType:a});n.push({element:s.createElement("div",{id:l,className:r.styles.anchor},r.props.anchorText),visibility:!0,key:l})}if(i){var c=$.s({id:r.props.id,renderContextType:a});n.push({element:r.renderDraftCancelButton(a),visibility:!0,key:c})}else if(r.props.contextMenuProps&&n.push({element:s.createElement(ue,Object(o.__assign)({},r.props.contextMenuProps)),visibility:!r.props.hideActions,key:r.props.contextMenuProps.id}),r.props.reactionButtonProps&&1===r.props.rootAuthorOpacity){var u=$.n({id:r.props.id,renderContextType:a});n.push({element:s.createElement(Zt,Object(o.__assign)({},r.props.reactionButtonProps)),visibility:!r.props.hideActions,key:u})}var p=n.map((function(t){return s.createElement("div",{key:t.key,className:t.visibility?r.styles.headerItem:r.styles.hiddenHeaderItem},t.element)})),d=1===r.props.rootAuthorOpacity?void 0:{boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, "+.13*(1-r.props.rootAuthorOpacity)+")"};return s.createElement("div",{className:r.styles.headerContainer,style:d},r.renderRootPersona(),r.renderRootLabel(a),p.length?s.createElement("div",{className:i?r.styles.headerRightCornerDraft:r.styles.headerRightCorner},p):void 0)},r.render=function(){return d.bb()||Object(X.a)(r.renderWithContexts,Z.a),Object(X.a)(r.renderWithContexts,Z.a,M.a)},r.cancelDraftButtonKeyDownHandler=r.cancelDraftButtonKeyDownHandler.bind(r),r.cancelDraftButtonClickHandler=r.cancelDraftButtonClickHandler.bind(r),r}return Object(o.__extends)(e,t),e.prototype.cancelDraftButtonClickHandler=function(t){this.props.onCancelDraft(),t.stopPropagation()},e.prototype.cancelDraftButtonKeyDownHandler=function(t){(Object(D.f)(t.key)===D.b.Enter||!d.lb()&&Object(D.f)(t.key)===D.b.Escape)&&(this.props.onCancelDraft(),t.stopPropagation(),t.preventDefault())},e.prototype.renderDraftCancelButton=function(t){return s.createElement(Q.a,{content:this.props.localizationAPI.getString(175),tooltipProps:nt.a},this.renderDraftCancelButtonInternal(t))},e.prototype.renderDraftCancelButtonInternal=function(t){return s.createElement("div",{className:this.styles.cancelDraftContainer},s.createElement(St.a,{id:$.s({id:this.props.id,renderContextType:t}),styles:this.styles.cancelDraftButton,disabled:!1,onClick:this.cancelDraftButtonClickHandler,onKeyDown:this.cancelDraftButtonKeyDownHandler,iconProps:{iconName:"CancelGlyph"},tabIndex:d.vb()&&!this.props.isTabbable?-1:void 0,ariaLabel:this.props.localizationAPI.getString(46)}))},e.prototype.renderRootPersona=function(){if(0===this.props.rootAuthorOpacity)return null;var t={authorName:Object(u.g)(this.props.author),resolved:this.props.isResolvedCard,isParent:!0,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL,opacity:this.props.rootAuthorOpacity};return s.createElement(Ce,Object(o.__assign)({},t))},e.prototype.renderRootLabel=function(t){if(0===this.props.rootAuthorOpacity)return null;var e={authorLine:Object(u.g)(this.props.author),renderContextType:t};return s.createElement("div",{className:this.styles.headerAuthorContainer,style:{opacity:this.props.rootAuthorOpacity}},s.createElement(me,Object(o.__assign)({},e)))},e}(s.PureComponent),Te=n(155),xe=n(614),Pe=n(453),Se=n(62),je=function(t){function e(e){var n=t.call(this,e)||this;return n.state={showLoadingUI:!1},n}return Object(o.__extends)(e,t),e.prototype.setTimer=function(){var t=this;this.timeoutId||(this.timeoutId=setTimeout((function(){t.setState({showLoadingUI:!0}),t.timeoutId=void 0}),this.props.delay))},e.prototype.clearTimer=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.componentDidMount=function(){this.props.isLoading&&this.setTimer()},e.prototype.componentWillUnmount=function(){this.clearTimer()},e.prototype.componentDidUpdate=function(t){!t.isLoading&&this.props.isLoading?this.setTimer():t.isLoading&&!this.props.isLoading&&(this.clearTimer(),this.setState({showLoadingUI:!1}))},e.prototype.render=function(){return this.state.showLoadingUI?this.props.loadingUI:s.Children.only(this.props.children)},e}(s.Component),_e=n(876),we={marginTop:"8px",zIndex:20,width:"32px",maxHeight:"30px",selectors:{"& .ms-Spinner-circle":{borderColor:_e.a,borderTopColor:_e.b}}},Ee={maxHeight:"24px",width:"37px",minWidth:"37px",padding:0,margin:1,marginRight:2,marginLeft:3},ke=Object(_.c)((function(t,e){var n,r,o,i,a,s,l,c,u;return{commitBar:Object(V.eb)({marginBottom:"5px",marginTop:"1px",maxHeight:"30px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-end"}),primaryButton:Object(ht.o)({root:Object(V.eb)(Ee,{backgroundColor:null!==(n=null==e?void 0:e.PrimaryButton)&&void 0!==n?n:Object(ft.a)().primary,borderColor:null!==(r=null==e?void 0:e.PrimaryButton)&&void 0!==r?r:Object(ft.a)().primary},t&&{transform:"scaleX(-1)"}),rootPressed:{backgroundColor:null!==(o=null==e?void 0:e.PrimaryButtonPressed)&&void 0!==o?o:Object(ft.a)().shade20,borderColor:null!==(i=null==e?void 0:e.PrimaryButtonPressed)&&void 0!==i?i:Object(ft.a)().shade20},rootHovered:Object(V.eb)({backgroundColor:null!==(a=null==e?void 0:e.PrimaryButtonHovered)&&void 0!==a?a:Object(ft.a)().shade10,borderColor:null!==(s=null==e?void 0:e.PrimaryButtonHovered)&&void 0!==s?s:Object(ft.a)().shade10}),rootFocused:Object(V.eb)({backgroundColor:null!==(l=null==e?void 0:e.PrimaryButton)&&void 0!==l?l:Object(ft.a)().shade10,borderColor:null!==(c=null==e?void 0:e.PrimaryButton)&&void 0!==c?c:Object(ft.a)().shade10}),icon:{width:16,color:null==e?void 0:e.PrimaryButtonIcon}}),defaultButton:Object(ht.o)({root:Object(V.eb)(Ee,{borderColor:null!==(u=null==e?void 0:e.CommonControlBorder)&&void 0!==u?u:Jt.b.gray110,backgroundColor:null==e?void 0:e.DefaultButton}),rootPressed:Object(d.bb)()?{backgroundColor:null==e?void 0:e.DefaultButtonPressed}:void 0,rootHovered:Object(d.bb)()?{backgroundColor:null==e?void 0:e.DefaultButtonHovered}:void 0,icon:{color:null==e?void 0:e.DefaultButtonIcon,height:"12px",marginBottom:"1px",width:"16px",lineHeight:"12px"}}),icon:{fontFamily:"inherit"}}})),Ie=function(t){function e(e){var n=t.call(this,e)||this;return n.getStyles=function(t){return d.bb()?ke(Object(Te.a)(),null==t?void 0:t.colors):ke(Object(Te.a)())},n.renderWithContexts=function(t){return n.styles=n.getStyles(t),s.createElement("div",{className:n.styles.commitBar},n.renderTaskAssigner(),n.renderCommitButtons(n.props.buttons,n.props.tooltipDirection))},n.renderCommitButtons=Object(_.c)((function(t,e){return void 0===t&&(t=[]),t.map((function(t,r){return s.createElement(Q.a,{key:r,content:t.disabled?void 0:t.tooltipText,directionalHint:e,tooltipProps:nt.a},s.createElement(je,{delay:ht.f,isLoading:!!t.showDelayedSpinner,key:r,loadingUI:s.createElement(I.a,{size:R.a.small,className:we})},t.usePrimaryButtonStyling?s.createElement(xe.a,Object(o.__assign)({},n.getCommitButtonProps(t))):s.createElement(dt.a,Object(o.__assign)({},n.getCommitButtonProps(t)))))}))}),5),n.getCommitButtonProps=Object(_.c)((function(t){return{id:t.id,disabled:t.disabled,onClick:t.onClick,onKeyDown:t.onKeyDown,ariaLabel:t.accessibilityLabel,tabIndex:t.isTabbable?void 0:-1,iconProps:{iconName:Object(jt.a)(t.icon),style:n.styles.icon},styles:n.getCommitButtonStyles(!!t.usePrimaryButtonStyling)}}),5),n.getCommitButtonStyles=function(t){return t?n.styles.primaryButton:n.styles.defaultButton},n.getCommitButtonProps=n.getCommitButtonProps.bind(n),n.renderCommitButtons=n.renderCommitButtons.bind(n),n.state={},n}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this;d.b()&&Object(Pe.a)().then((function(e){e?t.setState({taskAssigner:e.TaskAssigner}):Object(a.i)().assertConditionTag(!1,"Unable to load lazy at mention components.",577066527)})).catch(Object(Se.a)(i.e.reserveTag(595632141)))},e.prototype.render=function(){return Object(X.a)(this.renderWithContexts,M.a)},e.prototype.renderTaskAssigner=function(){return this.props.taskAssigner&&this.state.taskAssigner?s.createElement(this.state.taskAssigner,Object(o.__assign)({},this.props.taskAssigner)):null},e}(s.PureComponent);function Re(t){var e=t;return void 0!==e.onMentionCreated&&void 0!==e.onMentioneesStillInDraftUpdated&&void 0!==e.peoplePickerProps}!function(t){t[t.ReadOnlyComment=0]="ReadOnlyComment",t[t.DisabledComment=1]="DisabledComment",t[t.DisabledEditor=2]="DisabledEditor"}(fe||(fe={}));var Ae=n(47),De=n(998),Me=n(2593),Be=n.n(Me),Ne=Be.a.import("delta"),Le=Be.a.import("parchment"),He=Be.a.import("blots/inline"),Fe=(Be.a.import("formats/link"),Be.a.import("modules/clipboard")),Ue=Be.a;function ze(t){return!!t&&t.tagName===Ke.tagName&&t.className===Ke.className&&"false"===t.contentEditable&&void 0!==t.href}var Ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.create=function(n){var r=JSON.parse(n),o=!!r.editable;delete r.editable;var i=JSON.stringify(r),a=t.create.call(this,i);return a.setAttribute(e.getDataAttributeName(),i),a.setAttribute("href",this.addURLProtocolIfNeeded(r.url)),a.setAttribute("contenteditable",o.toString()),a.setAttribute("class",e.className),a.setAttribute("className",e.className),a.setAttribute("rel","noreferrer"),a.setAttribute("target","_blank"),a.setAttribute("title",r.url),a.setAttribute("tabindex","-1"),a.addEventListener("click",e.onHyperlinkClicked),a},e.onHyperlinkClicked=function(t){var e=t.target;if(ze(e)){Object(a.i)().createActivityObject("DraftHyperlinkClicked",Object(a.j)(a.g.GlobalAPI),a.a.OnSuccess,a.b.NecessaryServiceDataEvent).successTag(562438278);var n=e.href;Object(De.b)().onHyperlinkClick(n)&&t.preventDefault()}},e.formats=function(t){var e=t.getAttribute(this.getDataAttributeName());return e||(t.href?JSON.stringify({url:this.addURLProtocolIfNeeded(t.href),editable:!0}):void 0)},e.prototype.format=function(n,r){n===e.blotName&&r?this.domNode.setAttribute(e.getDataAttributeName(),r):t.prototype.format.call(this,n,r)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n[e.blotName]=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-hyperlink"},e.addURLProtocolIfNeeded=function(t){return t.toLowerCase().startsWith("www.")?"https://"+t:t},e.blotName="hyperlink",e.tagName="a",e.className="sharedcomments-hyperlink",e}(He);function Ve(t){var e,n={width:"100%",textAlign:"left",padding:"4px 0px 4px 8px",height:"16px",color:null!==(e=null==t?void 0:t.SmartRepliesText)&&void 0!==e?e:Jt.b.gray140,backgroundColor:null==t?void 0:t.CardBackground,fontFamily:"Segoe UI",fontSize:Ae.a.size12,fontWeight:"400",lineHeight:"16px"};return Object(V.eb)(n)}function We(t){var e,n;return Object(V.eb)(Ve(t),{backgroundColor:null!==(e=null==t?void 0:t.SuggestedItem)&&void 0!==e?e:W.a.SUGGESTED_PICKER_ITEM,":hover":{backgroundColor:null!==(n=null==t?void 0:t.SuggestedItemHovered)&&void 0!==n?n:W.a.SUGGESTED_PICKER_ITEM_HOVER}})}function qe(t){var e;return Object(V.eb)({padding:"5px 0px 5px 8px",height:"16px",color:null!==(e=null==t?void 0:t.ResolvedCardText)&&void 0!==e?e:Jt.b.gray130,backgroundColor:null==t?void 0:t.CardBackground,fontFamily:"Segoe UI",fontSize:"11px",fontWeight:"400",lineHeight:"16px"})}function Ge(t,e){var n,r;return Object(V.eb)({boxShadow:null==e?void 0:e.CalloutBoxShadow,selectors:{".ms-Button":{backgroundColor:null==t?void 0:t.CardBackground,color:null==t?void 0:t.Text,selectors:{span:{color:null==t?void 0:t.Text,selectors:{":hover":{backgroundColor:null==t?void 0:t.DefaultButtonHovered},":active":{backgroundColor:null==t?void 0:t.DefaultButtonPressed}}}}},".is-suggested":{selectors:{".ms-Button":{backgroundColor:null!==(n=null==t?void 0:t.SuggestedItem)&&void 0!==n?n:W.a.SUGGESTED_PICKER_ITEM,selectors:{":hover, span:hover":{backgroundColor:null!==(r=null==t?void 0:t.SuggestedItemHovered)&&void 0!==r?r:W.a.SUGGESTED_PICKER_ITEM_HOVER},":active, span:active":{backgroundColor:null==t?void 0:t.DefaultButtonPressed}}}}}}})}var Qe,Ye=Object(_.c)((function(t){var e,n,r;return{selectors:{":focus":{outline:"none"},"& .ql-editor":{boxSizing:"border-box",whiteSpace:"pre-wrap",height:"100%",outline:"none",overflow:"hidden",padding:"0",tabSize:"4",wordWrap:"break-word",userSelect:"text"},"& .ql-clipboard":{left:"-100000px",position:"absolute",top:"50%",height:"1px",userSelect:"text",overflowY:"hidden"},"& .ql-editor p":{margin:0,padding:0,userSelect:"text"},"& .ql-editor em, u, strong, span, a, s":{userSelect:"text"},"& .ql-editor.ql-blank::before":(e={color:null!==(r=null==t?void 0:t.SubText)&&void 0!==r?r:W.a.GRAY_E,content:"attr(data-placeholder)",fontStyle:"normal",fontFamily:"inherit",fontSize:"12px",marginLeft:"1px",pointerEvents:"none",position:"absolute"},e[V.l]={color:"ButtonText",backgroundColor:"ButtonFace"},e),"& .ql-color-blue":{color:"blue",textDecoration:"none",selectors:(n={},n[V.l]={textDecoration:"underline"},n)}}}})),Je={boxSizing:"border-box",flexGrow:"1",position:"relative",overflowY:"hidden"},$e={boxSizing:"border-box",flexGrow:"1",overflowY:"hidden",position:"relative",margin:0,padding:2,paddingTop:"1px",fontFamily:"inherit",fontSize:12,fontWeight:"normal",lineHeight:1.5.toString(),cursor:"text"},Xe={maxHeight:96,overflowY:"auto",selectors:{"::-webkit-scrollbar":{width:0}}},Ze=Object(V.eb)($e,Xe,{"-ms-overflow-style":"none","scrollbar-width":"none"}),tn={paddingBottom:"5px"},en={minHeight:22,padding:10,paddingTop:"2px",paddingBottom:"4px",borderRadius:ht.c},nn={pointerEvents:"none",cursor:"default"};!function(t){t[t.lineHeight=18]="lineHeight",t[t.maxHeight=4*t.lineHeight+4]="maxHeight",t[t.verticalOffset=t.maxHeight-t.lineHeight-2]="verticalOffset"}(Qe||(Qe={}));var rn={},on={maxHeight:Qe.maxHeight},an=Object(_.c)((function(t,e,n){var r,i,a,s,l=e?{background:null!==(i=null!=t?t:null==n?void 0:n.CardBackground)&&void 0!==i?i:W.a.WHITE,cursor:"pointer",color:null!==(a=null==n?void 0:n.SubText)&&void 0!==a?a:"#767676",fontStyle:"italic"}:{backgroundImage:"linear-gradient(rgba(255,255,255,0) 0%, "+(null!==(s=null!=t?t:null==n?void 0:n.CardBackground)&&void 0!==s?s:W.a.WHITE)+")",selectors:(r={},r[V.l]={visibility:"hidden !important"},r)};return Object(V.eb)(Object(o.__assign)({position:"absolute",left:0,top:Qe.verticalOffset,right:0,bottom:0,visibility:"hidden"},l),cn)})),sn=Object(_.c)((function(t,e,n){var r,o,i,a,s,l;void 0===t&&(t=!1),void 0===e&&(e=!1);var c={backgroundColor:e?void 0:null!==(o=null==n?void 0:n.AtMentionHighlight)&&void 0!==o?o:Jt.b.gray20,borderRadius:"2px",boxDecorationBreak:"clone",color:t||e?void 0:null!==(i=null==n?void 0:n.AtMentionText)&&void 0!==i?i:Jt.b.gray180,cursor:"default",fontFamily:'"Segoe UI", "Segoe UI Web", Arial, Verdana, sans-serif',fontSize:"12px",fontWeight:"500",padding:"1px 3px",pointerEvents:"none",textDecoration:"none",selectors:(r={},r[V.l]={textDecoration:"underline"},r)},u=Object(V.eb)(c,{"-webkit-box-decoration-break":"clone"}),p=null!==(a=null==n?void 0:n.AtMentionToMeHighlight)&&void 0!==a?a:Object(ft.a)().tint40,f=null!==(s=null==n?void 0:n.ResolvedCardBackground)&&void 0!==s?s:Jt.b.gray20;return{selectors:{"& .atmention":u,"& .current-user > .atmention":e?u:Object(V.eb)(u,{color:t?void 0:null!==(l=null==n?void 0:n.AtMentionToMeText)&&void 0!==l?l:Object(ft.a)().shade10,backgroundColor:t?f:p,fontWeight:"600"}),"& office-optional":Object(d.Z)()?{userSelect:"text"}:void 0}}})),ln=Object(_.c)((function(){var t;return{selectors:(t={},t["& "+Ke.className]={wordBreak:"break-all"},t)}})),cn={selectors:{":focus":{outline:"none"}}},un=Object(_.c)((function(t,e,n,r,i,a,s,l){var c={};c=e?en:tn;var u=n?Ze:$e,p=[Ye(s),sn(i,a,s),ln()];return{EditorWrapper:Object(V.eb)(Je),EditorContainerEditing:V.eb.apply(void 0,Object(o.__spread)([u,c],p)),EditorContainerFullContent:V.eb.apply(void 0,Object(o.__spread)([u,rn],p)),EditorContainerTruncated:V.eb.apply(void 0,Object(o.__spread)([u,rn,on,{marginBottom:t?void 0:"6px"}],p)),EditorDisabled:V.eb.apply(void 0,Object(o.__spread)([u],p)),EditorPlaceholder:V.eb.apply(void 0,Object(o.__spread)([u,nn,en],p)),InnerEditorDisableFocusOutline:Object(V.eb)(cn),EditorTruncationOverlay:Object(V.eb)(an(r,t,s),cn),SmartReplyHeader:qe(s),SmartReplyItem:Ve(s),SuggestedSmartReplyItem:We(s),SmartReplyCallout:Ge(s,l)}})),pn=n(274),dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.create=function(n){var r=t.create.call(this,n);return r.setAttribute("class","atmention"),r.setAttribute(e.getDataAttributeName(),n),r.setAttribute("tabIndex","-1"),r.setAttribute("disabled","disabled"),r.setAttribute("spellcheck","false"),r},e.formats=function(t){return t.getAttribute(e.getDataAttributeName())||void 0},e.prototype.format=function(n,r){"atmention"===n&&r?this.domNode.setAttribute(e.getDataAttributeName(),r):t.prototype.format.call(this,n,r)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n.atmention=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-"+e.blotName},e.blotName="atmention",e.tagName="A",e}(He),fn=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.getClipboardDataUsingOtherTextMIMETypes=function(t,e){return e||t.getData("text")||t.getData("text/plain")},r.isAtmentionSupported=n.isAtmentionSupported,r.removeAtFormat=r.removeAtFormat.bind(r),r.pasteMentionHandler=r.pasteMentionHandler.bind(r),r}return Object(o.__extends)(e,t),e.prototype.removeAtFormat=function(t,e){this.quill.formatText(t,e,"optional",!1),this.quill.formatText(t,e,"atmention",!1)},e.prototype.pasteMentionHandler=function(){var t=window.getSelection(),e=t&&t.anchorNode?t.anchorNode.parentNode:null,n=t&&t.focusNode?t.focusNode.parentNode:null,r=Le.find(e),o=e===n?void 0:Le.find(n);return r&&"atmention"===r.statics.blotName&&this.removeAtFormat(r.offset(this.quill.scroll),r.length()),o&&"atmention"===o.statics.blotName&&this.removeAtFormat(o.offset(this.quill.scroll),o.length()),!0},e.prototype.onPaste=function(t){var n,r=this,o=d.mb(),i=o?this.quill.getText():"",s=t.clipboardData||window.clipboardData;if(s)try{n=this.getClipboardDataUsingOtherTextMIMETypes(s,s.getData("text/html"))}catch(t){n=this.getClipboardDataUsingOtherTextMIMETypes(s,"")}if(!t.defaultPrevented&&this.quill.isEnabled())try{e.pasteOperationInProgress=!0,this.pasteMentionHandler();var l=this.quill.getSelection(),c=(new Ne).retain(l.index),u=this.quill.scrollingContainer.scrollTop;this.container.focus();var p=document.createRange(),f=window.getSelection();p.setStart(this.container,0),p.collapse(!0),f&&(Object(a.i)().assertConditionTag(!!f,"Expected a selection!",595854800),f.removeAllRanges(),f.addRange(p)),this.quill.selection.update("silent"),setTimeout((function(){try{var t=o?r.quill.getText():"";if(!(o&&t!==i)&&0===r.container.childNodes.length&&n){var s=p.createContextualFragment(n);r.container.appendChild(s)}c=c.concat(r.convert()).delete(l.length),c=r.isAtmentionSupported?new Ne(c.map((function(t){return t.insert&&(t.attributes&&t.attributes.optional&&delete t.attributes.optional,!t.attributes||!t.attributes.atmention||_n(JSON.parse(t.attributes.atmention).fullName,t.insert.slice(1))&&"UnknownEmail"!==JSON.parse(t.attributes.atmention).email||delete t.attributes.atmention),t}))):new Ne(c.map((function(t){return t.insert&&t.attributes&&delete t.attributes.atmention,t}))),r.quill.updateContents(c,"user"),r.quill.setSelection(c.length()-l.length,d.O()?"api":"silent"),r.quill.scrollingContainer.scrollTop=u,r.quill.focus()}catch(t){Object(a.i)().assertConditionTag(!1,"CommentClipboard paste delta scrubbing failed.",593035297)}finally{e.pasteOperationInProgress=!1}}),1)}catch(t){Object(a.i)().assertConditionTag(!1,"CommentClipboard preparation for paste failed.",593035298),e.pasteOperationInProgress=!1}},e.pasteOperationInProgress=!1,e}(Fe),hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.create=function(n){var r=t.create.call(this,n);r.setAttribute(e.getDataAttributeName(),n);var o="string"==typeof n?JSON.parse(n):n;return(o&&o.atmention&&o.atmention.isCurrentUser||o.isCurrentUser)&&r.setAttribute("class","current-user"),r},e.formats=function(t){return t.getAttribute(e.getDataAttributeName())||void 0},e.prototype.format=function(n,r){n===e.blotName&&r?this.domNode.setAttribute(e.getDataAttributeName(),r):t.prototype.format.call(this,n,r)},e.prototype.formats=function(){var n=t.prototype.formats.call(this);return n[e.blotName]=e.formats(this.domNode),n},e.getDataAttributeName=function(){return"data-"+e.blotName},e.blotName="optional",e.tagName=d.P()?"OFFICE-OPTIONAL":"SPAN",e}(He);function yn(t,e){var n,r=null===(n=window.getComputedStyle(t))||void 0===n?void 0:n.textDecoration,i=void 0;return r&&(r.indexOf("underline")>-1&&(i={underline:!0}),r.indexOf("line-through")>-1&&(i=Object(o.__assign)(Object(o.__assign)({},i),{strike:!0})),i)?e.compose((new Ne).retain(e.length(),i)):e}function mn(t,e){var n,r=t;if(e.ops&&(null===(n=e.ops[0].attributes)||void 0===n?void 0:n.atmention))return e;var o=Ke.formats(r);if(o&&r.text){if(Object(a.i)().createActivityObject("HyperlinkPasted",Object(a.j)(a.g.GlobalAPI),a.a.OnSuccess,a.b.NecessaryServiceDataEvent).successTag(589894537),!d.t()){var i=JSON.parse(o),s=null==i?void 0:i.url;return s&&s===r.text?d.P()?e.compose((new Ne).retain(e.length(),{hyperlink:o})):new Ne([{insert:r.text,attributes:{hyperlink:o}}]):new Ne(s?[{insert:s,attributes:{hyperlink:o}}]:[{insert:r.text}])}return d.P()?e.compose((new Ne).retain(e.length(),{hyperlink:o})):new Ne([{insert:r.text,attributes:{hyperlink:o}}])}return e}d.d()&&Ue.register(Ke),Ue.register(dn),Ue.register(hn),Ue.register("modules/clipboard",fn,!0);var bn=/(?:https?:\/\/|www\.)[^\s]+[\s]*$/i,gn=Object(K.k)((function(){var t=[];return d.d()&&t.push("hyperlink"),t.push("atmention","optional"),d.P()&&t.push("bold","italic","underline","strike"),d.s()&&t.push("background","color"),t})),vn=function(){function t(t){var e=document.createElement("div");e.id=t,e.style.display="none",document.body.appendChild(e),this.quillInstance=new Ue("#"+t,{formats:gn(),modules:{clipboard:{isAtmentionSupported:!0}}})}return t.prototype.getQuill=function(){return this.quillInstance},t}();function Cn(t){var e=pn.b?Object(a.i)().createActivityObject("GetQuillFromOfficeDelta",Object(a.j)(a.g.GlobalAPI),a.a.None,a.b.NecessaryServiceDataEvent):void 0,n=JSON.parse(t),r={},o=d.P(),s=n.ops.map((function(t){if(void 0!==t.insert){var n={};if(n.insert=t.insert,t.attributes){if(n.attributes=t.attributes,n.attributes.atmention&&(n.attributes.atmention=JSON.stringify(t.attributes.atmention)),n.attributes.link&&d.d()&&(n.attributes.hyperlink=JSON.stringify({url:t.attributes.link}),delete n.attributes.link),d.d()||delete n.attributes.link,n.attributes.weight){if(o&&!n.attributes.atmention){var r=parseInt(n.attributes.weight,10);Object(a.i)().assertConditionTag(r>=700,"weight attribute less than 700.",591192854),n.attributes.bold=r>=700}else Object(a.i)().assertConditionTag(o,"Weight attribute present when rich text feature gate is off",591192855);delete n.attributes.weight}n.attributes.strikethrough&&(o&&!n.attributes.atmention?n.attributes.strike=n.attributes.strikethrough:Object(a.i)().assertConditionTag(o,"strikethrough attribute present when rich text feature gate is off",591192856),delete n.attributes.strikethrough),n.attributes.italic&&n.attributes.atmention&&delete n.attributes.italic,n.attributes.underline&&n.attributes.atmention&&delete n.attributes.underline,n.attributes.highlight&&(d.s()&&!n.attributes.atmention&&(n.attributes.background=n.attributes.highlight),delete n.attributes.highlight),n.attributes.color&&n.attributes.atmention&&delete n.attributes.color}return t.optional&&(n.attributes||(n.attributes={}),n.attributes.optional=JSON.stringify(t.optional)),n}return e&&e.failTag(595194440,-2130957543),Object(a.i)().assertConditionTag(!1,"Translation Error: op in office delta is not insert. Inserting empty insert.",i.e.reserveTag(595194441)),{insert:""}}));return e&&e.successTag(595194442),s.length?(r.ops=s,JSON.stringify(r)):JSON.stringify(new Ne)}var On=void 0;function Tn(t,e,n){var r=(On||((On=new vn("CommentsDisplayTextTranslationQuill").getQuill()).disable(),On.root.setAttribute("role","document"),On.root.setAttribute("aria-readonly","true")),On);if(n){var o=Cn(n);r.setContents(JSON.parse(o),"api")}Object(a.i)().assertConditionTag(!!r.root,"root element on Quill is undefined",559491102);var i=r.root.cloneNode(!0);i.addEventListener("click",xn),r.setText(""),i?(e.firstChild?e.replaceChild(i,e.firstChild):e.appendChild(i),e.firstElementChild&&e.firstElementChild.setAttribute("id",t)):Object(a.i)().assertConditionTag(!1,"Clone of Quill root node should be defined",595658959)}function xn(t){var e=t.target;ze(e)&&(Object(a.i)().createActivityObject("PostedHyperlinkClicked",Object(a.j)(a.g.GlobalAPI),a.a.OnSuccess,a.b.NecessaryServiceDataEvent).successTag(562438279),Object(De.b)().onHyperlinkClick(e.href)&&t.preventDefault())}function Pn(t,e,n,r){var s="#"+Object($.v)(t.id),l=[];d.d()&&l.push(["a",mn]),d.P()&&l.push(['[style*="text-decoration"]',yn]);var c={formats:gn(),scrollingContainer:r,modules:Object(o.__assign)(Object(o.__assign)({},e),{clipboard:{isAtmentionSupported:Re(t),matchers:l.length>0?l:void 0}})};t.placeholder&&(c.placeholder=t.placeholder);var u=new Ue(s,c);if(function(t,e,n,r){var o=t.root;if(!o)return void Object(a.i)().assertConditionTag(!1,"root element on Quill is undefined",595891799);o.spellcheck=!0,t.history.options.delay=500,o.id=e,o.setAttribute("aria-haspopup","true"),o.setAttribute("role","textbox"),o.setAttribute("aria-readonly","false"),n&&o.setAttribute("aria-describedby",n);d.vb()&&!r&&o.setAttribute("tabindex","-1");var i=t.clipboard&&t.clipboard.container;i&&i.setAttribute("aria-hidden","true")}(u,t.id,t.accessibilityDescribedBy,t.isTabbable),t.defaultValue){var p=Cn(t.defaultValue);u.setContents(JSON.parse(p),"api")}return u.enable(),u.on("text-change",(function(t,e,r){if(Object(a.i)().assertConditionTag(!!u.root,"root element on Quill is undefined",559491103),u.root&&""===u.root.textContent&&En(e)){var o=window.getSelection(),s=o&&o.anchorNode?o.anchorNode.parentNode:null,l=Le.find(s);l&&"scroll"===l.statics.blotName&&Object(a.i)().assertConditionTag(!1,"Quill editor crash in Chrome/Edge/Safari, unable to complete replace operation",589084383)}n(t,e,r),d.d()&&function(t,e){if(Object(i.o)(e.ops,"ops should always be definied when parsing for hyperlinks.",i.e.reserveTag(562937945)),2===e.ops.length&&e.ops[1].insert&&e.ops[1].attributes&&e.ops[1].attributes.hyperlink){var n=window.getSelection(),r=n&&n.anchorNode?n.anchorNode.parentNode:null;if(!r)return;var o=Le.find(r);if(!o)return;jn(t,o.offset(t.scroll),o.length())}if(2===e.ops.length&&e.ops[0].retain&&(p=e.ops[1].insert,/\s/.test(p))){var a=e.ops[0].retain,s=t.getText().substr(0,a).match(bn);if(!s)return;var l=s[0],c=s[0].trimRight(),u=[];a>l.length&&u.push({retain:a-l.length}),u.push({retain:c.length,attributes:{hyperlink:JSON.stringify({url:c,editable:!0})}}),1===u.length&&u[0].retain?jn(t,0,u[0].retain):2===u.length&&u[0].retain&&u[1].retain&&jn(t,u[0].retain,u[1].retain),t.updateContents(new Ne(u))}var p}(u,t)})),u}function Sn(t,e){if(t&&d.d())for(var n=t.getElementsByClassName(Ke.className),r=0;r<n.length;r++)n[r].setAttribute("contenteditable",e?"false":"true")}function jn(t,e,n){t.formatText(e,n,Ke.blotName,!1)}function _n(t,e){var n=e.trim().split(" "),r=t.trim().split(" ");return n.every((function(t){return r.indexOf(t)>=0}))}function wn(t){var e=!1;return t.forEach((function(t){e=!!t.delete&&t.delete.valueOf()>1})),e}function En(t){var e=!1;return t.forEach((function(t){e||(e=t.insert&&t.attributes&&t.attributes.atmention)})),e}function kn(t,e){var n=document.getElementById(t);n&&(n.setAttribute("data-placeholder",e),n.setAttribute("aria-placeholder",e))}function In(t){var e=new Set;return t&&t.ops&&t.ops.forEach((function(t){if(t.attributes){var n=void 0;if("string"==typeof t.attributes.atmention)try{n=JSON.parse(t.attributes.atmention)}catch(t){return void Object(a.i)().assertConditionTag(!1,"Failed to parse atmention attributes",594921041)}else n=t.attributes.atmention;n&&e.add(n.email)}})),e}function Rn(t,e){e?(t.setAttribute("aria-autocomplete",e["aria-autocomplete"]),t.setAttribute("aria-expanded",e["aria-expanded"]),t.setAttribute("aria-haspopup",e["aria-haspopup"]),t.setAttribute("aria-owns",e["aria-owns"]),t.setAttribute("aria-controls",e["aria-controls"])):(t.removeAttribute("aria-autocomplete"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-owns"),t.removeAttribute("aria-controls"))}var An=n(664),Dn=function(t){function e(e){var n=t.call(this,e)||this;return n.contentRef=null,n.truncationRef=null,n.getStyles=function(t){return d.bb()||un(d.U(),!1,!1,n.props.truncationOverlayColor,n.props.dulledAtMentions),un(d.U(),!1,!1,n.props.truncationOverlayColor,n.props.dulledAtMentions,!1,null==t?void 0:t.colors,null==t?void 0:t.styles)},n.renderWithContexts=function(t){if(n.state.error)throw n.state.error;n.styles=n.getStyles(t);var e=n.getEditorStyle();return s.createElement("div",{className:e,id:Object($.w)(n.props.id)},s.createElement("div",{ref:n.setContentRef,className:n.styles.InnerEditorDisableFocusOutline,id:Object($.v)(n.props.id)}),n.renderTruncationOverlay(n.props.id,n.styles))},n.state={error:null},n.setContentRef=n.setContentRef.bind(n),n.setTruncationRef=n.setTruncationRef.bind(n),n}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){this.tryUpdateComponent()},e.prototype.componentDidUpdate=function(t,e){this.tryUpdateComponent(t)},e.prototype.shouldTruncate=function(){return!this.props.showFullContent&&(this.props.content&&Object(An.d)(this.props.content).length>100||!!this.contentRef&&this.contentRef.offsetHeight>Qe.maxHeight)},e.prototype.tryUpdateComponent=function(t){var e=this;requestAnimationFrame((function(){try{e.updateComponent(t)}catch(t){e.setState({error:t})}}))},e.prototype.updateComponent=function(t){this.contentRef&&(t&&this.props.content===t.content?this.props.showFullContent!==t.showFullContent&&this.updateTruncationUI():(Tn(this.props.id,this.contentRef,this.props.content),this.updateTruncationUI()),!this.props.placeholder||t&&t.placeholder===this.props.placeholder||kn(this.props.id,this.props.placeholder))},e.prototype.setContentRef=function(t){this.contentRef=t},e.prototype.setTruncationRef=function(t){this.truncationRef=t},e.prototype.updateTruncationUI=function(){if(this.props.viewerMode!==fe.DisabledEditor)if(this.contentRef){var t=this.shouldTruncate(),e=d.U()?Qe.maxHeight-4:Qe.maxHeight-.75*Qe.lineHeight;this.contentRef.style.maxHeight=t?e+"px":"none",this.truncationRef&&(this.truncationRef.style.visibility=t?"visible":"hidden")}else Object(a.i)().assertConditionTag(!1,"contentRef should be defined",595658961)},e.prototype.getEditorStyle=function(){switch(this.props.viewerMode){case fe.DisabledEditor:return this.styles.EditorPlaceholder;case fe.DisabledComment:return this.shouldTruncate()?this.styles.EditorContainerTruncated:this.styles.EditorDisabled;case fe.ReadOnlyComment:return this.shouldTruncate()?this.styles.EditorContainerTruncated:this.styles.EditorContainerFullContent;default:return Object(i.n)(this.props.viewerMode),{}}},e.prototype.renderTruncationOverlay=function(t,e){if(this.props.viewerMode===fe.DisabledEditor||!1!==this.props.showFullContent)return null;var n=e.EditorTruncationOverlay,r=d.U()?this.props.truncationUIText+"...":"";return s.createElement("div",{id:Object($.X)(t),className:n,ref:this.setTruncationRef},r)},e.prototype.render=function(){return d.bb()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(s.PureComponent);function Mn(t,e,n){var r=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.allContextContents={},r.keys=Object.keys(e),r.renderFunction=r.keys.reduceRight((function(n,i){return function(a,l){var c=e[i];return s.createElement(c.Consumer,null,(function(e){return r.allContextContents[i]=e,null===n?s.createElement(t,Object(o.__assign)({ref:a},l,r.allContextContents)):n(a,l)}))}}),null),r.render=function(){var e=r.props,n=e.forwardedRef,i=Object(o.__rest)(e,["forwardedRef"]);return r.renderFunction?r.renderFunction(n,i):(Object(a.i)().assertConditionTag(!1,"Contexts failed to wrap, default to null.",558724946),s.createElement(t,Object(o.__assign)({},i,{ref:n},r.allContextContents)))},r}return Object(o.__extends)(r,n),r}(s.Component),i=s.forwardRef((function(t,e){return s.createElement(r,Object(o.__assign)({key:"ContextualizedWrapperComponent",forwardedRef:e},t))}));return i.displayName=n,i}var Bn,Nn=n(1925);!function(t){t[t.SmartReply=0]="SmartReply",t[t.LPP=1]="LPP"}(Bn||(Bn={}));var Ln,Hn=Bn;!function(t){t[t.EditTypeUnknown=-1]="EditTypeUnknown",t[t.NoEdits=0]="NoEdits",t[t.CharactersInserted=1]="CharactersInserted",t[t.CharactersDeleted=2]="CharactersDeleted",t[t.CharactersInsertedAndDeleted=3]="CharactersInsertedAndDeleted",t[t.EntireSuggestionDeleted=4]="EntireSuggestionDeleted"}(Ln||(Ln={}));var Fn,Un,zn,Kn,Vn=Ln;function Wn(t){return void 0!==t.searchDirectory}function qn(t,e){if(t){var n=Object($.A)(),r=Object($.G)(),a={"aria-autocomplete":"none","aria-expanded":"true"};switch(e){case Hn.LPP:return Object(o.__assign)(Object(o.__assign)({},a),{"aria-haspopup":"listbox","aria-owns":n,"aria-controls":n});case Hn.SmartReply:return Object(o.__assign)(Object(o.__assign)({},a),{"aria-haspopup":"true","aria-owns":r,"aria-controls":r});default:Object(i.n)(e)}}}var Gn=((Fn={})[Vn.CharactersInserted]=((Un={})[Vn.CharactersInserted]=Vn.CharactersInserted,Un[Vn.CharactersDeleted]=Vn.CharactersInsertedAndDeleted,Un[Vn.CharactersInsertedAndDeleted]=Vn.CharactersInsertedAndDeleted,Un),Fn[Vn.CharactersInsertedAndDeleted]=((zn={})[Vn.CharactersInserted]=Vn.CharactersInsertedAndDeleted,zn[Vn.CharactersDeleted]=Vn.CharactersInsertedAndDeleted,zn[Vn.CharactersInsertedAndDeleted]=Vn.CharactersInsertedAndDeleted,zn),Fn[Vn.CharactersDeleted]=((Kn={})[Vn.CharactersDeleted]=Vn.CharactersDeleted,Kn[Vn.CharactersInserted]=Vn.CharactersInsertedAndDeleted,Kn[Vn.CharactersInsertedAndDeleted]=Vn.CharactersInsertedAndDeleted,Kn),Fn);function Qn(t,e){var n=null==t?void 0:t.ops;if(void 0===n||!e)return!1;var r=n.some((function(t){return t.delete&&t.delete>0})),o=n.some((function(t){return t.retain&&t.retain>0}));return r&&o}function Yn(t,e,n,r){return function(t,e){switch(e){case Vn.NoEdits:case Vn.EditTypeUnknown:case Vn.EntireSuggestionDeleted:return e}switch(t){case Vn.EntireSuggestionDeleted:return t;case Vn.EditTypeUnknown:case Vn.NoEdits:return e}return Gn[t]?Gn[t][e]:Vn.EditTypeUnknown}(t,function(t,e,n){return function(t,e){var n=(null==t?void 0:t.ops)&&t.ops.length>0?t.ops[0].insert:"";return!(!(n=n&&"\n"===n[n.length-1]?null==n?void 0:n.slice(0,-1):n)||e!==n)}(n,e)?Vn.NoEdits:function(t,e){var n=null==t?void 0:t.ops;if(void 0===n||0===n.length||!e)return!1;var r=0,o=0,i=0;n.forEach((function(t){var e,n,a,s;r+=null!==(e=t.delete)&&void 0!==e?e:0,o+=null!==(n=t.retain)&&void 0!==n?n:0,i+=null!==(s=null===(a=t.insert)||void 0===a?void 0:a.length)&&void 0!==s?s:0}));var a=o+i;return!(i>0&&0===r)&&(!!(a<=1)||0===a)}(t,e)?Vn.EntireSuggestionDeleted:function(t,e){return!!(e&&(null==t?void 0:t.ops)&&t.ops.some((function(t){return"string"==typeof t.insert})))}(t,e)?Qn(t,e)?Vn.CharactersInsertedAndDeleted:Vn.CharactersInserted:Qn(t,e)?Vn.CharactersDeleted:Vn.EditTypeUnknown}(e,n,r))}var Jn,$n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e}(n(1083).a),Xn=n(222),Zn=Ue.import("delta"),tr=function(){function t(){this.disableSelectionChangeCallback=!1,Object(De.b)().initRichContentEditor(this)}return t.prototype.getFormattingAtCurrentSelection=function(){var t;if(!this.editor)return{};if(this.formattingCache)return this.formattingCache;var e,n=this.editor.getSelection(!1);return(e=n&&this.editor.getFormat(n))&&(this.formattingCache={bold:e.bold,italic:e.italic,underline:e.underline,strikethrough:e.strike}),null!==(t=this.formattingCache)&&void 0!==t?t:{}},t.prototype.getSelection=function(){var t=this.getSelectedContent();return{text:t?Object(An.e)(t):""}},t.prototype.applyFormattingToCurrentSelection=function(t){var e,n=this,r=this.richTextCapabilities&&!!(this.richTextCapabilities&t.type);if(this.editor&&r){var o=this.getSelectedContent();if(null==o?void 0:o.ops)for(var i=o.ops,a=0;a<i.length;a++)if(null===(e=i[a].attributes)||void 0===e?void 0:e.atmention)return;var s=!0,l=this.getFormattingAtCurrentSelection();this.executeWithSelectionChangeCallbackDisabled((function(){var e,r;if(n.editor)switch(t.type){case Xn.DeltaFormattingType.Weight:n.editor.format("bold",!l.bold,"api");break;case Xn.DeltaFormattingType.Italic:n.editor.format("italic",!l.italic,"api");break;case Xn.DeltaFormattingType.Underline:n.editor.format("underline",!l.underline,"api");break;case Xn.DeltaFormattingType.Strikethrough:n.editor.format("strike",!l.strikethrough,"api");break;case Xn.DeltaFormattingType.Highlight:n.editor.format("background",null===(e=t.data)||void 0===e?void 0:e.color,"api");break;case Xn.DeltaFormattingType.Color:n.editor.format("color",null===(r=t.data)||void 0===r?void 0:r.fontColor,"api");break;default:s=!1}})),s&&this.invalidateFormattingCache()}},t.prototype.addContent=function(t){var e=this.richTextCapabilities&&!!(this.richTextCapabilities&t.type);if(this.editor&&e)switch(t.type){case Xn.DeltaFormattingType.Hyperlink:if(t.data){var n=this.editor.getSelection(!1),r=(new Zn).retain(n.index).delete(n.length).insert(t.data.text,{hyperlink:JSON.stringify({url:t.data.link,editable:!0})}).insert(" ");this.editor.updateContents(r,"api"),this.editor.setSelection(n.index+t.data.text.length+2,0)}}},t.prototype.isFormatEnabled=function(t){return d.O()&&!!this.editor&&!!this.richTextCapabilities&&!!(this.richTextCapabilities&t)},t.prototype.registerSelectionChangeHandler=function(t){this.selectionChangeHandler=t},t.prototype.registerKeypressHandler=function(t){this.keypressHandler=t},t.prototype.setActiveEditorInfo=function(t){var e,n;this.editor=null!==(e=t.editor)&&void 0!==e?e:this.editor,this.editorContainerElement=null!==(n=t.editorContainer)&&void 0!==n?n:this.editorContainerElement,this.richTextCapabilities=t.richTextCapabilities,this.invokeSelectionChangeHandler()},t.prototype.resetActiveEditorInfo=function(){this.editor=void 0,this.editorContainerElement=void 0,this.richTextCapabilities=void 0},t.prototype.onSelectionChange=function(t){this.editor&&this.editor===t&&!this.disableSelectionChangeCallback&&this.invokeSelectionChangeHandler()},t.prototype.onKeyPress=function(t){var e;this.invalidateFormattingCache(),null===(e=this.keypressHandler)||void 0===e||e.call(this,t)},t.prototype.setFocus=function(){this.editorContainerElement&&this.editorContainerElement.focus()},t.prototype.invalidateFormattingCache=function(){this.formattingCache=void 0},t.prototype.invokeSelectionChangeHandler=function(){var t;this.invalidateFormattingCache(),null===(t=this.selectionChangeHandler)||void 0===t||t.call(this)},t.prototype.executeWithSelectionChangeCallbackDisabled=function(t){this.disableSelectionChangeCallback=!0,t(),this.disableSelectionChangeCallback=!1},t.prototype.getSelectedContent=function(){if(this.editor){var t=this.editor.getSelection(!1);if(t)return this.editor.getContents(t.index,t.length)}},t}();function er(){return Jn||(Jn=new tr),Jn}var nr=function(t){function e(e){var n=t.call(this,e)||this;return n.editorContainerRef=s.createRef(),n.editorRef=null,n.smartReplyPickerRef=s.createRef(),n.isRestoreInProgress=!1,n.selectedSmartReply=void 0,n.smartReplyEditHistory=Vn.NoEdits,n.isQuillCursorPositionSet=!1,n.lastKnownCursorIndex=void 0,n.getStyles=function(t){return d.bb()?un(d.U(),n.props.useReplyBoxStyling,n.props.isHeightBounded,void 0,void 0,n.shouldHideMentionColors(),null==t?void 0:t.colors,null==t?void 0:t.styles):un(d.U())},n.setUpEditor=function(){var t,e;null===(e=(t=n.props).onMount)||void 0===e||e.call(t),n.initializeQuill(),n.restoreDraftIfExists(),n.props.componentRef(n),d.e()&&n.handleShowSmartReplyPicker(),Sn(n.editorRef,!1)},n.onEditorContainerMutation=function(t,e){if(n.getEditorFocusContainerDiv()){var r=Object(a.i)().createActivityObject("DelayedQuillInitialization",Object(a.j)(a.g.ReviewedAsNotNecessary),a.a.None,a.b.NecessaryServiceDataEvent);try{n.setUpEditor()}catch(t){throw r.failTag(556127642,-2130957487),t}r.successTag(556127643),e.disconnect()}},n.logQuillInitializationFailure=function(t){var e;if(d.K()){var r=null!==(e=n.props.commentId)&&void 0!==e?e:"";if(r){var o=n.props.renderContextType;n.isCommentRootInDOM(r)?Object(a.i)().assertConditionTag(!1,"Quill initialization failed RenderContextType "+o+". The post or card root is present. Callstack: "+t.stack,556856596):(o!==P.a.FullPane||document.getElementById(Object($.y)())||Object(a.i)().assertConditionTag(!1,"Quill initialization failed. The pane root is expected to be visible but cannot be found.",556565443),Object(a.i)().assertConditionTag(!1,"Quill initialization failed with RenderContextType "+o+". The post or card root cannot be found. Callstack: "+t.stack,556856595))}else{Object(Se.a)(i.e.reserveTag(556856594))(t)}}},n.isCommentRootInDOM=function(t){var e={id:t,renderContextType:n.props.renderContextType},r=document.getElementById(Object($.h)(e,!1)),o=document.getElementById(Object($.h)(e,!0)),i=document.getElementById(Object($.J)(e));return!!r||!!o||!!i},n.selectionChangeHandler=function(){n.myQuill&&(n.isQuillCursorPositionSet=n.myQuill.hasFocus(),n.isQuillCursorPositionSet&&d.O()&&er().onSelectionChange(n.myQuill))},n.selectionChangeHandler_deprecated=function(){var t;(null===(t=n.myQuill)||void 0===t?void 0:t.hasFocus())&&er().onSelectionChange(n.myQuill)},n.isInAtMentionMode=function(){return!1},n.getEditorFocusContainerDiv=function(){return document.getElementById(Object($.v)(n.props.id))},n.isSmartReplyPickerDisplayed=function(){var t;return!!(null===(t=n.smartReplyPickerRef.current)||void 0===t?void 0:t.isSuggestionsShown)},n.renderWithContexts=function(t){n.styles=n.getStyles(t);var e=d.bb()?n.styles.EditorContainerEditing:n.getEditorClass_deprecated(),r=n.props.smartReplyProps?n.renderSmartReplyPicker():null,o=d.e()?n.editorContainerRef:void 0;return s.createElement("div",{className:e,id:Object($.w)(n.props.id),ref:o},s.createElement("div",{tabIndex:-1,ref:n.setEditorRef,className:n.styles.InnerEditorDisableFocusOutline,id:Object($.v)(n.props.id),onKeyDown:n.onKeyDownHandler,onKeyUp:n.onKeyUpHandler,onKeyPress:n.onKeyPressHandler,onFocus:n.onFocusHandler,onBlur:n.onBlurHandler}),n.renderAdditionalEditorContent(),r)},n.onFocusHandler=n.onFocusHandler.bind(n),n.onKeyDownHandler=n.onKeyDownHandler.bind(n),n.onKeyUpHandler=n.onKeyUpHandler.bind(n),n.onKeyPressHandler=n.onKeyPressHandler.bind(n),n.onTextChangedHandler=n.onTextChangedHandler.bind(n),n.deleteHandler=n.deleteHandler.bind(n),n.removeAtFormat=n.removeAtFormat.bind(n),n.tabKeyHandler=n.tabKeyHandler.bind(n),n.onBlurHandler=n.onBlurHandler.bind(n),n.setEditorRef=n.setEditorRef.bind(n),n.enterNewline=n.enterNewline.bind(n),d.F()||(n.handleCommitKeys=n.handleCommitKeys.bind(n)),n.handleEscapeKeys=n.handleEscapeKeys.bind(n),n.handleShowSmartReplyPicker=n.handleShowSmartReplyPicker.bind(n),n.handleSmartReplySelection=n.handleSmartReplySelection.bind(n),n.onSmartRepliesShown=n.onSmartRepliesShown.bind(n),n.onSmartRepliesHidden=n.onSmartRepliesHidden.bind(n),n.toggleSmartReplyAriaAttributes=n.toggleSmartReplyAriaAttributes.bind(n),n.onResolveSmartReplySuggestions=n.onResolveSmartReplySuggestions.bind(n),n.renderSmartReply=n.renderSmartReply.bind(n),n.renderSmartReplyPicker=n.renderSmartReplyPicker.bind(n),n.getKeyboardBindings=n.getKeyboardBindings.bind(n),n}return Object(o.__extends)(e,t),e.prototype.componentDidUpdate=function(t,e){var n,r,o,i=this.getEditorFocusContainerDiv();if(i){var s=this.getFirstQuillEditor(i);s?(this.props.accessibilityLabel&&s.setAttribute("aria-label",this.props.accessibilityLabel.toString()),this.props.accessibilityDescribedBy&&s.setAttribute("aria-describedby",this.props.accessibilityDescribedBy.toString()),s.setAttribute("aria-readonly","false"),d.vb()&&(this.props.isTabbable?s.removeAttribute("tabindex"):s.setAttribute("tabindex","-1"))):Object(a.i)().assertConditionTag(!1,"quillEditorDiv missing in CommentEditor",588805504)}!t.initialDraftContent&&this.isEditorEmpty()&&this.restoreDraftIfExists();var l=this.props.placeholder;(l&&t.placeholder!==l&&kn(this.props.id,l),d.e())&&((null!==(r=null===(n=this.props.smartReplyProps)||void 0===n?void 0:n.smartReplies)&&void 0!==r?r:[])!==(null===(o=t.smartReplyProps)||void 0===o?void 0:o.smartReplies)&&(this.selectedSmartReply=void 0,this.handleShowSmartReplyPicker()))},e.prototype.componentDidMount=function(){if(!this.getEditorFocusContainerDiv())return this.editorContainerMutationObserver=new MutationObserver(this.onEditorContainerMutation),void this.editorContainerMutationObserver.observe(document.body,{childList:!0,subtree:!0});this.setUpEditor()},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)},e.prototype.toggleSmartReplyAriaAttributes=function(t){if(!this.isInAtMentionMode()){var e=this.getQuillEditorFromFocusContainerDiv();e&&Rn(e,qn(t,Hn.SmartReply))}},e.prototype.logSmartReplyPostEditActivity=function(){var t=Object(a.i)().createActivityObject("SmartReplyPosted",Object(a.j)(a.g.ReviewedAsNotNecessary),a.a.None,a.b.BasicEvent);this.smartReplyEditHistory!==Vn.EditTypeUnknown&&(t.addDataField("PostEditedType",this.smartReplyEditHistory,a.d.SystemMetadata),this.props.commentId&&t.addDataField("CommentId",this.props.commentId,a.d.SystemMetadata),t.successTag(587818312))},e.prototype.onTextChangedHandler=function(t,e,n){var r,o,a,s=this;if(Object(i.o)(this.myQuill,"Quill should always be defined on text changed handlers.",i.e.reserveTag(576583245)),d.e()&&this.handleShowSmartReplyPicker(),"user"===n&&!this.myQuill.history.ignoreChange)if(wn(t)){var l=this.myQuill.getContents(),c=0;l.forEach((function(t){t.attributes&&t.attributes.atmention&&(_n(JSON.parse(t.attributes.atmention).fullName,t.insert.slice(1))||s.removeAtFormat(c,t.insert.length)),c+=t.insert.length}))}else{var u=window.getSelection(),p=u&&u.anchorNode?u.anchorNode.parentNode:null,f=Le.find(p);setTimeout((function(){if(s.myQuill){var e=s.myQuill.getSelection();if(f&&"atmention"===f.statics.blotName){var n=f.offset(s.myQuill.scroll);if(e.index===n+1)s.removeAtFormat(n,1);else if(e.index<n+f.length()&&e.index>n)s.removeAtFormat(n,f.length());else if(e.index===n+f.length()){t.filter((function(t){return"string"==typeof t.insert})).length&&s.removeAtFormat(e.index-1,1)}}}}),0)}var h=this.isEditorEmpty();this.props.isDraftEmpty!==h&&(null===(o=(r=this.props).onDraftEmptinessChanged)||void 0===o||o.call(r,h)),d.e()&&this.selectedSmartReply&&(this.smartReplyEditHistory=Yn(this.smartReplyEditHistory,t,null!==(a=this.selectedSmartReply)&&void 0!==a?a:"",this.myQuill.getContents()))},e.prototype.getFirstQuillEditor=function(t){var e=t.getElementsByClassName("ql-editor");return e.length>0?e[0]:void 0},e.prototype.getQuillEditorFromFocusContainerDiv=function(){var t=this.getEditorFocusContainerDiv();return t?this.getFirstQuillEditor(t):void 0},e.prototype.restoreDraftIfExists=function(){var t=this,e=this.props.initialDraftContent;if(e){this.isRestoreInProgress=!0;var n=e.editorCursorPosition,r=e.editorContent;n||(Object(a.i)().assertConditionTag(!1,"Cursor position promise should be defined on Web, defaulting to resolve(undefined).",588805505),n=Promise.resolve(void 0)),Promise.all([r,n]).then((function(e){var n=Object(o.__read)(e,2),r=n[0],i=n[1];r&&(t.setContents(r,i),t.isRestoreInProgress=!1)})).catch(Object(Se.a)(i.e.reserveTag(588805506)))}},e.prototype.setEditorRef=function(t){this.editorRef=t,d.O()&&(this.editorRef?er().setActiveEditorInfo({editorContainer:t}):er().resetActiveEditorInfo())},e.prototype.removeAtFormat=function(t,e){Object(i.o)(this.myQuill,"Quill should be defined when removing format.",i.e.reserveTag(576583246));try{this.myQuill.formatText(t,e,{optional:!1,atmention:!1})}catch(e){"NotFoundError"===e.message?(Object(a.i)().assertConditionTag(!1,"Error removing At Format",588805508),this.clear()):e.message.indexOf("mutations")>-1&&(Object(a.i)().assertConditionTag(!1,"Threw error cannot find property mutations of undefined",588649689),0===t&&this.myQuill.formatText(t,1,{optional:!1,atmention:!1}))}},e.prototype.getChunkBoundaryForDelete=function(t,e,n,r){Object(i.o)(this.myQuill,"Quill should be defined when processing blots.",i.e.reserveTag(576583247));var o=this.myQuill.getText(n.index,1),a=this.myQuill.getText(n.index-1,1),s=this.myQuill.getText(n.index,n.length),l=-1,c=-1,u=0===n.length,p=u&&" "===a,d=u&&" "===o||!this.myQuill.getFormat(n.index,1).atmention;if(""!==s&&n.index+n.length<=t+e.length||!d&&!p){if(""!==s&&s.indexOf(" ")>=0)return;return l=e.lastIndexOf(" ",n.index-t-1),c=e.indexOf(" ",n.index-t),{chunkStart:l<0?c<0?t:t+1:l+t,chunkEnd:c<0?t+e.length-1:l<0?c+t:c+t-1}}if(u){if(d)return r?(c=e.indexOf(" ",n.index-t+1),{chunkStart:n.index,chunkEnd:c<0?t+e.length-1:c+t}):(l=e.lastIndexOf(" ",n.index-t-1),c=e.indexOf(" ",n.index-t),{chunkStart:l<0?c<0?t:t+1:l+t,chunkEnd:l<0&&" "===o?n.index:n.index-1});if(p)return r?(c=e.indexOf(" ",n.index-t),{chunkStart:n.index-1,chunkEnd:c<0?t+e.length-1:c+t}):{chunkStart:(l=e.lastIndexOf(" ",n.index-t-2))<0?t+1:l+t+1,chunkEnd:n.index-1}}},e.prototype.deleteHandler=function(t){Object(i.o)(this.myQuill,"Quill must be defined in delete handler",i.e.reserveTag(576583248));var e=window.getSelection(),n=e&&e.anchorNode?e.anchorNode.parentNode:null,r=e&&e.focusNode?e.focusNode.parentNode:null,o={startBlot:Le.find(n),endBlot:n===r?void 0:Le.find(r)},s=e&&e.anchorNode?Le.find(e.anchorNode.previousSibling):null;if(s&&"atmention"===s.statics.blotName&&e&&0===e.anchorOffset&&(o.startBlot=s),d.d()&&o.startBlot&&o.startBlot.statics.blotName===Ke.blotName){if(e&&"Caret"===e.type&&e.anchorNode&&e.anchorNode.textContent&&e.anchorOffset===e.anchorNode.textContent.length){var l=this.myQuill.getSelection();if(!l)return!0;var c=e.anchorNode.textContent.length,u=l.index;return this.myQuill.formatText(u-c,c,{optional:!1,hyperlink:!1}),!1}jn(this.myQuill,o.startBlot.offset(this.myQuill.scroll),o.startBlot.length()),o.endBlot&&o.endBlot.statics.blotName===Ke.blotName&&jn(this.myQuill,o.endBlot.offset(this.myQuill.scroll),o.endBlot.length())}if(o.startBlot){if(o.endBlot)return"atmention"===o.startBlot.statics.blotName&&this.removeAtFormat(o.startBlot.offset(this.myQuill.scroll),o.startBlot.length()),"atmention"===o.endBlot.statics.blotName&&this.removeAtFormat(o.endBlot.offset(this.myQuill.scroll),o.endBlot.length()),!0;var p=o.startBlot.offset(this.myQuill.scroll),f=this.myQuill.getSelection(),h=this.myQuill.getText(p,o.startBlot.length());if(!f)return Object(a.i)().assertConditionTag(!1,"Unexpected empty selection in Quill",587495514),!0;if("atmention"!==o.startBlot.statics.blotName&&0===f.length&&t&&this.myQuill.getFormat(f.index,1).atmention){var y=this.myQuill.getFormat(f.index+1).atmention.fullName;y&&this.removeAtFormat(f.index,y.length+1)}if("atmention"===o.startBlot.statics.blotName){if(f.index===p)return 0===f.length&&!t||(this.removeAtFormat(o.startBlot.offset(this.myQuill.scroll),o.startBlot.length()),!0);var m=this.getChunkBoundaryForDelete(p,h,f,t);if(m)return m.chunkStart>m.chunkEnd||(this.myQuill.deleteText(m.chunkStart,m.chunkEnd-m.chunkStart+1),!1);this.removeAtFormat(p,o.startBlot.length())}}return!0},e.prototype.getKeyboardBindings=function(){var t=this;return{tab:{key:D.c.Tab,handler:function(){return t.tabKeyHandler()}},shiftTab:{key:D.c.Tab,shiftKey:!0,handler:function(){return t.tabKeyHandler()}},enter:{key:D.c.Enter,handler:function(){return t.enterNewline(!1)}},back:{key:D.c.Backspace,handler:function(){var e=t.deleteHandler(!1);return d.P()&&d.O()&&er().onKeyPress({key:D.c.Backspace}),e}},delete:{key:D.c.Delete,handler:function(){var e=t.deleteHandler(!0);return d.P()&&d.O()&&er().onKeyPress({key:D.c.Delete}),e}},commitWithCtrl:{key:D.c.Enter,shortKey:!0,handler:d.F()?function(){return t.handleCommitKeys()}:function(){t.handleCommitKeys()}},newlineWithShift:{key:D.c.Enter,shiftKey:!0,handler:function(){return t.enterNewline(!0)}},bold:{key:D.c.b,shortKey:!0,handler:this.getRichTextKeypressHandler({key:D.c.b,shortKey:!0},d.P(),{type:Bt.DeltaFormattingType.Weight})},italic:{key:D.c.i,shortKey:!0,handler:this.getRichTextKeypressHandler({key:D.c.i,shortKey:!0},d.P(),{type:Bt.DeltaFormattingType.Italic})},underline:{key:D.c.u,shortKey:!0,handler:this.getRichTextKeypressHandler({key:D.c.u,shortKey:!0},d.P(),{type:Bt.DeltaFormattingType.Underline})},insertHyperlink:{key:D.c.k,shortKey:!0,handler:this.getRichTextKeypressHandler({key:D.c.k,shortKey:!0},d.P())},highlight:{key:D.c.h,shortKey:!0,altKey:!0,handler:this.getRichTextKeypressHandler({key:D.c.h,shortKey:!0,altKey:!0},d.s())},undo:{key:D.c.z,shortKey:!0,handler:function(){return d.P()&&d.O()&&er().onKeyPress({key:D.c.z,shortKey:!0}),!0}}}},e.prototype.getRichTextKeypressHandler=function(t,e,n){var r=this;return function(){var o;if(!e)return!1;var i=null===(o=r.myQuill)||void 0===o?void 0:o.getFormat();return!(null==i?void 0:i.atmention)&&(!d.O()||(n&&er().applyFormattingToCurrentSelection(n),er().onKeyPress(t),!1))}},e.prototype.tabKeyHandler=function(){return d.vb()},e.prototype.getQuillScrollingContainer=function(){return this.props.isHeightBounded?"#"+Object($.w)(this.props.id):this.props.scrollingContainerId?"#"+this.props.scrollingContainerId:void 0},e.prototype.initializeQuill=function(){var t={keyboard:{bindings:this.getKeyboardBindings()}};try{this.myQuill=Pn(this.props,t,this.onTextChangedHandler,this.getQuillScrollingContainer()),this.myQuill.on("selection-change",this.selectionChangeHandler)}catch(t){throw this.logQuillInitializationFailure(t),t}},e.prototype.onKeyUpHandler=function(t){Object(D.f)(t.key)===D.b.Control&&Sn(this.editorRef,!1)},e.prototype.onKeyDownHandler=function(t){Object(D.f)(t.key)===D.b.Control&&Sn(this.editorRef,!0),Object(D.f)(t.key)===D.b.Escape&&this.handleEscapeKeys()&&t.stopPropagation(),this.props.onKeyDown&&this.props.onKeyDown(t)},e.prototype.onKeyPressHandler=function(t){},e.prototype.enterNewline=function(t){var e=this;if(!this.myQuill)return Object(a.i)().assertConditionTag(!1,"this.myQuill should always be defined if in keyboard handler",588805509),!1;var n=function(){return Object(i.o)(e.myQuill,"Quill must be defined when processing new line.",i.e.reserveTag(576583249)),e.myQuill.insertText(e.myQuill.getSelection().index,"\n"),!1},r=window.getSelection(),o=r&&r.anchorNode?r.anchorNode.parentNode:null,s=Le.find(o);if(s&&"atmention"===s.statics.blotName){var l=s.offset(this.myQuill.scroll),c=this.myQuill.getSelection();return c.index===l||c.index===l+s.length()||this.removeAtFormat(s.offset(this.myQuill.scroll),s.length()),n()}return!t||n()},e.prototype.handleCommitKeys=function(){return!(!this.props.onCommitRequested||this.isEditorEmpty())&&(this.props.onCommitRequested(N.a.KeyboardShortcut),!0)},e.prototype.handleEscapeKeys=function(){return!!this.props.onEscapeRequested&&(this.props.onEscapeRequested(),!0)},e.prototype.onFocusHandler=function(t){if(this.editorRef){var e=document.activeElement;this.editorRef.contains(e)&&this.editorRef!==e&&this.isQuillCursorPositionSet||this.focus(),this.props.onFocus&&this.props.onFocus(),d.O()&&this.myQuill&&er().setActiveEditorInfo({editor:this.myQuill,richTextCapabilities:this.props.richTextCapabilities}),t.stopPropagation(),this.lastKnownCursorIndex=void 0}},e.prototype.onBlurHandler=function(t){var e,n,r=t.relatedTarget||document.activeElement;if(d.e()){var o=document.getElementById(Object($.G)());if(this.props.onEditorBlur&&!fn.pasteOperationInProgress&&r!==this.editorRef&&t.target!==this.editorRef){var i=r;o&&(o.contains(i)||i.contains(o))||this.props.onEditorBlur()}}else this.props.onEditorBlur&&!fn.pasteOperationInProgress&&r!==this.editorRef&&t.target!==this.editorRef&&this.props.onEditorBlur();this.lastKnownCursorIndex=null===(n=null===(e=this.myQuill)||void 0===e?void 0:e.getSelection())||void 0===n?void 0:n.index},e.prototype.getEditorClass_deprecated=function(){return un(d.U(),this.props.useReplyBoxStyling,this.props.isHeightBounded,void 0,void 0,this.shouldHideMentionColors()).EditorContainerEditing},e.prototype.isEditorEmpty=function(){return!(!this.myQuill||!this.myQuill.editor.isBlank())},e.prototype.setContents=function(t,e){if(this.myQuill){var n=Cn(t),r=JSON.parse(n);this.myQuill.setContents(r),this.isRestoreInProgress&&Sn(this.editorRef,!1);var o=void 0!==e?e:this.myQuill.getLength();this.lastKnownCursorIndex=o,this.myQuill.hasFocus()&&this.setSelection(o)}},e.prototype.getContentsAsync=function(){var t=this;return this.isRestoreInProgress&&this.props.initialDraftContent?this.props.initialDraftContent.editorContent:new Promise((function(e,n){if(t.myQuill){var r=t.myQuill.getContents();e(function(t){var e=pn.b?Object(a.i)().createActivityObject("GetOfficeDeltaFromQuill",Object(a.j)(a.g.GlobalAPI),a.a.None,a.b.NecessaryServiceDataEvent):void 0,n=JSON.parse(t);Object(i.o)(n.ops,"Quill operations must be defined.",i.e.reserveTag(562937944));var r={ops:[]},o=n.ops.map((function(t){if(void 0!==t.insert){var n={insert:t.insert};return t.attributes&&(t.attributes.optional&&("string"==typeof t.attributes.optional?n.optional=JSON.parse(t.attributes.optional):n.optional=t.attributes.optional),n.attributes={},t.attributes.atmention&&("string"==typeof t.attributes.atmention?n.attributes.atmention=JSON.parse(t.attributes.atmention):n.attributes.atmention=t.attributes.atmention),d.d()&&t.attributes.hyperlink&&("string"==typeof t.attributes.hyperlink?n.attributes.link=JSON.parse(t.attributes.hyperlink).url:n.attributes.link=t.attributes.hyperlink.url),d.P()&&!t.attributes.atmention&&(t.attributes.bold&&(n.attributes.weight=700),t.attributes.strike&&(n.attributes.strikethrough=t.attributes.strike),t.attributes.italic&&(n.attributes.italic=t.attributes.italic),t.attributes.underline&&(n.attributes.underline=t.attributes.underline)),d.s()&&!t.attributes.atmention&&(t.attributes.background&&(n.attributes.highlight=t.attributes.background),t.attributes.color&&(n.attributes.color=t.attributes.color))),n}return e&&e.failTag(595194443,-2130957544),Object(a.i)().assertConditionTag(!1,"Translation Error: op in quill delta is not insert. Inserting empty insert operation.",i.e.reserveTag(595194444)),{insert:""}}));return o.length?(r.ops=o,e&&e.successTag(595194445),JSON.stringify(r)):(e&&e.failTag(595194446,-2130957544),Object(a.i)().assertConditionTag(!1,"Translation Error: Quill Delta should never have an empty operation",i.e.reserveTag(595194447)),JSON.stringify(new Ne))}(JSON.stringify(r))),d.e()&&t.selectedSmartReply&&(t.logSmartReplyPostEditActivity(),t.selectedSmartReply=void 0,t.smartReplyEditHistory=Vn.NoEdits)}else n(new p.a(B.e,i.e.reserveTag(588351390),-2130957550))}))},e.prototype.getCursorPositionAsync=function(){var t=this;return this.isRestoreInProgress&&this.props.initialDraftContent?this.props.initialDraftContent.editorCursorPosition||Promise.resolve(void 0):new Promise((function(e,n){var r=t.myQuill?t.myQuill.getSelection():void 0;e(r?r.index:t.lastKnownCursorIndex)}))},e.prototype.clear=function(){var t;null===(t=this.myQuill)||void 0===t||t.setText("")},e.prototype.blur=function(){var t;null===(t=this.myQuill)||void 0===t||t.blur()},e.prototype.focus=function(){var t;this.myQuill&&(this.isQuillCursorPositionSet?this.myQuill.focus():this.setSelection(null!==(t=this.lastKnownCursorIndex)&&void 0!==t?t:this.myQuill.getLength()))},e.prototype.setSelection=function(t){var e,n,r;try{null===(e=this.myQuill)||void 0===e||e.setSelection(Math.min(t,null===(n=this.myQuill)||void 0===n?void 0:n.getLength()),0)}catch(t){Object(a.i)().assertConditionTag(!1,Object(i.m)(t),556339362),null===(r=this.myQuill)||void 0===r||r.focus()}},e.prototype.getDisplayMode=function(){return this.props.displayMode},e.prototype.shouldHideMentionColors=function(){return!1},e.prototype.renderAdditionalEditorContent=function(){},e.prototype.handleShowSmartReplyPicker=function(){var t,e,n;if(this.smartReplyPickerRef.current){var r=!!((null!==(e=null===(t=this.props.smartReplyProps)||void 0===t?void 0:t.smartReplies)&&void 0!==e?e:[]).length>0&&this.isEditorEmpty()&&(null===(n=this.myQuill)||void 0===n?void 0:n.hasFocus()));if(r!==this.smartReplyPickerRef.current.isSuggestionsShown)if(r){var o=Object(a.i)().createActivityObject("SmartReplyRendered",Object(a.j)(a.g.ReviewedAsNotNecessary),a.a.None,a.b.BasicEvent);this.smartReplyPickerRef.current.showPicker(!0),o.successTag(588292805)}else this.smartReplyPickerRef.current.hidePicker()}},e.prototype.onResolveSmartReplySuggestions=function(){var t;return(null===(t=this.props.smartReplyProps)||void 0===t?void 0:t.smartReplies)||null},e.prototype.renderSmartReply=function(t,e){var n=e.suggestionModel.selected?this.styles.SuggestedSmartReplyItem:this.styles.SmartReplyItem;return s.createElement("span",{className:n},t)},e.prototype.handleSmartReplySelection=function(t){var e,n=null!==(e=this.onResolveSmartReplySuggestions())&&void 0!==e?e:[];if(-1!==n.indexOf(t)){var r=n.indexOf(t)+1,o=Object(a.i)().createActivityObject("SmartReplyClicked",Object(a.j)(a.g.ReviewedAsNotNecessary),a.a.None,a.b.BasicEvent);o.addDataField("ClickPosition",r,a.d.SystemMetadata),o.addDataField("SmartReplyLength",t.length,a.d.SystemMetadata),Object(i.o)(this.myQuill,"Quill should be defined when processing smart reply selection.",i.e.reserveTag(576583250));var s=this.myQuill.getSelection();s&&this.myQuill.insertText(s.index,t,"api"),this.selectedSmartReply=t,o.successTag(588292807)}},e.prototype.onSmartRepliesShown=function(){this.toggleSmartReplyAriaAttributes(!0)},e.prototype.onSmartRepliesHidden=function(){this.toggleSmartReplyAriaAttributes(!1)},e.prototype.renderSmartReplyPicker=function(){var t;if(!d.e()||!this.props.smartReplyProps||!this.editorContainerRef.current)return null;var e=Object($.S)(this.props.id),n=Object(K.k)((function(t,n){return{headerItemsProps:[{renderItem:function(){return s.createElement("div",{className:t,id:e},n)},shouldShow:function(){return!0}}]}}))(this.styles.SmartReplyHeader,null===(t=this.props.smartReplyProps)||void 0===t?void 0:t.pickerTitle);return s.createElement($n,{componentRef:this.smartReplyPickerRef,calloutWidth:Object(st.g)(),suggestionItems:this.onResolveSmartReplySuggestions()||[],suggestionsStore:new Nn.a,onResolveSuggestions:this.onResolveSmartReplySuggestions,onChange:this.handleSmartReplySelection,pickerSuggestionsProps:n,onZeroQuerySuggestion:this.onResolveSmartReplySuggestions,pickerCalloutProps:{ariaLabelledBy:e,target:this.editorContainerRef.current,className:d.bb()?this.styles.SmartReplyCallout:void 0},inputElement:this.getQuillEditorFromFocusContainerDiv(),onRenderSuggestionsItem:this.renderSmartReply,onSuggestionsShown:this.onSmartRepliesShown,onSuggestionsHidden:this.onSmartRepliesHidden})},e.prototype.render=function(){return d.bb()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(s.PureComponent),rr=nr,or=n(683),ir=n(589),ar=n(780),sr=n(663),lr=n(460),cr=n(1196),ur=void 0,pr=function(t){function e(e){var n=t.call(this,e)||this;return n.configureLPP=function(t){try{if(t&&!n.state.livePersonaPickerInstance)if(!Object(ir.a)()){var e=Object(cr.a)(Object(a.i)());t.initializeLivePersonaPicker("ACCOUNT_IDENTIFIER",Object(o.__assign)(Object(o.__assign)({},e),{complianceEnvironment:e.complianceEnvironment,clientCorrelationId:Object(a.i)().getMetadata().sessionId,refreshAuthToken:n.refreshAuthToken,getHostAppSuggestions:n.isTestEnvironment()?lr.b:void 0,offline:n.isTestEnvironment()})),Object(ir.b)()}ur=t.getLivePersonaPickerContainer("ACCOUNT_IDENTIFIER"),n.state.livePersonaPickerInstance||n.setState({livePersonaPickerInstance:ur})}catch(t){Object(a.i)().assertConditionTag(!1,"configureLPP: "+("string"==typeof t?t:Object(i.m)(t)),595637921)}},n.renderLivePersonaPicker=function(){return n.state.livePersonaPickerInstance?s.createElement(n.state.livePersonaPickerInstance,{inputId:n.props.target?n.props.target:"",strings:n.state.peoplePickerStrings,isOpen:n.props.inAtMentionMode,maxHeight:400,maxWidth:250,onSuggestionSelected:n.props.onSuggestionSelected,onShow:n.props.onShow,onDismiss:n.props.onDismiss,componentRef:n.onPeoplePickerRef,onSuggestionHighlighted:n.props.onSuggestionHighlighted,suggestionListId:$.A()}):null},n.renderBasicMentionsPicker=function(){return Object(a.i)().assertConditionTag(!!n.props.peoplePickerProps.pickerLocalizationDetails&&Wn(n.props.peoplePickerProps.pickerLocalizationDetails),"Expected ILocalizationProps, not LPP string props",595932128),n.state.peoplePicker?s.createElement(n.state.peoplePicker.BasicMentions,{ref:n.onPeoplePickerRef,onReplaceText:n.props.replaceText,target:n.props.target?"#"+n.props.target:"",maxMenuHeight:400,onGetMoreResults:n.onGetMoreResults,onGetPicture:n.onGetPicture,automationID:$.D(n.props.target),onShow:n.props.onShow,onDismiss:n.props.onDismiss,debugMode:!1,localizationProps:n.props.peoplePickerProps.pickerLocalizationDetails,onGetCandidates:n.onGetCandidates,clientTelemetry:Object(a.i)(),preventDismissOnScroll:n.props.peoplePickerProps.preventDismissOnScroll}):null},n.onGetCandidates=n.onGetCandidates.bind(n),n.onGetMoreResults=n.onGetMoreResults.bind(n),n.onGetPicture=n.onGetPicture.bind(n),n.onPeoplePickerRef=n.onPeoplePickerRef.bind(n),n.refreshAuthToken=n.refreshAuthToken.bind(n),n.state={livePersonaPickerInstance:ur,peoplePickerStrings:{loading:"Loading...",error:"Can't search right now.",allResults:"No more results found.",limitedResults:"Top results",emptyResults:"No suggestions found for now.",useThisAddress:"Use this address",atMentionsModePlaceholderText:"Type @ to mention a person",pickerModePlaceholderText:"Enter a name or email address",suggestionsAnnouncement:"Number of suggestions found: ",selectedSuggestionAccessibilityLabel:"Suggestion",selectedSuggestionNumberAccessibilityLabel:"of",suggestionsAvailableAnnouncement:"Suggestions Available"}},n}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this;Object(Pe.a)().then((function(e){t.setState({peoplePicker:e})})).catch(Object(Se.a)(i.e.reserveTag(595632143))),d.u()&&!this.state.lppImports&&Object(Pe.b)().then((function(e){if(e){t.configureLPP(e);var n=Object(ar.a)().getLocaleInfo().uiCulture;e.getLivePersonaPickerStrings(n).then((function(e){t.setState({peoplePickerStrings:e})})).catch((function(t){Object(a.i)().assertConditionTag(!1,"failed to fetch LPP strings for locale: "+n+", error: "+t.message,595637531)})),t.setState({lppImports:e})}else Object(a.i)().assertConditionTag(!1,"LPP was not able to load.",576582748)})).catch(Object(Se.a)(i.e.reserveTag(591155841)))},e.prototype.isTestEnvironment=function(){var t=Object(a.i)().getMetadata(),e="-4"===t.ring&&"DC2"===t.dataCenter;return pn.b||e},e.prototype.refreshAuthToken=function(t){return this.props.getAuthToken?this.props.getAuthToken(sr.a.Loki):(Object(a.i)().assertConditionTag(!1,"getAuthToken cannot be undefined",595637532),Promise.resolve(""))},e.prototype.getContacts=function(t,e,n){var r=Object(a.i)().createActivityObject("OnGetCandidatesEvent",Object(a.j)(a.g.ReviewedAsNotNecessary),a.a.None,a.b.NecessaryServiceDataEvent);return r.addDataField("NumberOfCandidatesRequested",e,a.d.SystemMetadata),r.addDataField("SearchGraph",n,a.d.SystemMetadata),this.props.peoplePickerProps.onGetUserContacts(t,e,n).then((function(t){return r.addDataField("NumberOfCandidatesReceived",t.length,a.d.SystemMetadata),r.successTag(595194449),t}),(function(t){return r.failTag(595194450,-2130957538),Promise.reject(t)}))},e.prototype.onGetCandidates=function(t,e){return this.getContacts(t,e,!1)},e.prototype.onGetMoreResults=function(t,e){return this.getContacts(t,e,!0)},e.prototype.onPeoplePickerRef=function(t){this.peoplePickerRef=t},e.prototype.onMentionsTextChanged=function(t,e){this.peoplePickerRef&&(d.u()?e?this.props.onDismiss():this.peoplePickerRef.onQueryChanged(t):this.peoplePickerRef.setInputText(t,e))},e.prototype.onMentionsKeyDownHandler=function(t){if(this.peoplePickerRef){if(!d.u())return void this.peoplePickerRef.onKeyDown(t);if(Object(a.i)().assertConditionTag(!!this.state.peoplePicker,"peoplepicker did not lazy-load correctly",595632416),t&&t.keyCode&&this.props.inAtMentionMode&&this.state.lppImports){var e=this.state.lppImports.keyboardEventKeyCodeToCustomKey[t.keyCode];void 0!==e&&this.peoplePickerRef.onCustomKeyPressed(e)}}},e.prototype.onGetPicture=function(){return""},e.prototype.render=function(){return d.u()?this.renderLivePersonaPicker():this.renderBasicMentionsPicker()},e}(s.PureComponent),dr=n(197),fr=Ue.import("delta"),hr=function(t){function e(e){var n=t.call(this,e)||this;return n.startIndexOfMention=0,n.onAtMentionSuggestionHighlighted=function(t){n.setState({activeDescendantId:t})},n.getActiveDescendantId=function(){return n.state.activeDescendantId},n.isInAtMentionMode=function(){return n.state.inAtMentionMode},n.exitAtMentionMode=n.exitAtMentionMode.bind(n),n.insertMentionText=n.insertMentionText.bind(n),n.onSuggestionSelected=n.onSuggestionSelected.bind(n),n.onKeyDownHandler=n.onKeyDownHandler.bind(n),n.onKeyPressHandler=n.onKeyPressHandler.bind(n),n.onTextChangedHandler=n.onTextChangedHandler.bind(n),n.onMentionHostRef=n.onMentionHostRef.bind(n),n.enterAtMentionMode=n.enterAtMentionMode.bind(n),n.onShowHandler=n.onShowHandler.bind(n),n.enterNewline=n.enterNewline.bind(n),n.getKeyboardBindings=n.getKeyboardBindings.bind(n),n.state={activeDescendantId:void 0,inAtMentionMode:!1,isReplacingContentAtBeginning:!1,mentionQueryString:"",hadWordSelectionShortcut:!1},n}return Object(o.__extends)(e,t),e.prototype.enterNewline=function(e){return!this.state.inAtMentionMode&&t.prototype.enterNewline.call(this,e)},e.prototype.handleEscapeKeys=function(){return this.state.inAtMentionMode?d.L():t.prototype.handleEscapeKeys.call(this)},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t)},e.prototype.componentDidUpdate=function(e,n){if(n.inAtMentionMode&&!this.state.inAtMentionMode&&this.AtMentionRef&&this.AtMentionRef.onMentionsTextChanged("",!0),d.u()){var r=this.state.inAtMentionMode,o=this.getQuillEditorFromFocusContainerDiv();if(o)if(r!==n.inAtMentionMode&&Rn(o,qn(r,Hn.LPP)),!r&&this.isSmartReplyPickerDisplayed()&&(Rn(o,qn(!0,Hn.SmartReply)),o.removeAttribute("aria-activedescendant")),r&&!this.isSmartReplyPickerDisplayed()){var i=this.getActiveDescendantId();i&&o&&o.setAttribute("aria-activedescendant",i)}}t.prototype.componentDidUpdate.call(this,e,n)},e.prototype.onMentionHostRef=function(t){this.AtMentionRef=t},e.prototype.updateCurrentMentions=function(t,e){var n=In(e),r=In(e.compose(t));Object(u.i)(n,r)&&this.props.onMentioneesStillInDraftUpdated(r)},e.prototype.onTextChangedHandler=function(e,n,r){if(this.state.isReplacingContentAtBeginning&&this.setState({isReplacingContentAtBeginning:!1}),this.state.inAtMentionMode&&this.AtMentionRef){var o=this.getMentionText();if(d.u()){if(o&&o.length>0&&this.state.mentionQueryString!==o)if(o.split(" ").length>3)this.AtMentionRef.onMentionsTextChanged("",!0),this.setState({mentionQueryString:""});else{this.setState({mentionQueryString:o});var i=this.AtMentionRef.isTestEnvironment()?o.substr(1):o;this.AtMentionRef.onMentionsTextChanged(i,!1)}}else this.AtMentionRef.onMentionsTextChanged(null!=o?o:"",!1)}this.props.displayMode===U.Editing&&d.b()&&(En(e)||wn(e)||function(t){var e=!1;return t.forEach((function(t){e||(e=!!t.retain&&!!t.attributes&&null===t.attributes.atmention)})),e}(e))&&this.updateCurrentMentions(e,n),t.prototype.onTextChangedHandler.call(this,e,n,r)},e.prototype.onKeyPressHandler=function(t){if(this.myQuill){var e=this.myQuill.getSelection();if(e){if(this.setState({isReplacingContentAtBeginning:0===e.index&&e.length>0}),String.fromCharCode(t.which)!==dr.a)return;var n=this.myQuill.getText(e.index-1,1),r=/\s/.test(n),o=/\n/.test(n),i=""===n;(0===e.index||r||o||i)&&(this.enterAtMentionMode(),this.startIndexOfMention=e.index)}}else Object(a.i)().assertConditionTag(!1,"Quill should be defined for editor handlers!",577066520)},e.prototype.onKeyDownHandler=function(e){if(this.myQuill){var n=this.myQuill.getSelection();if(this.state.inAtMentionMode&&this.isEditorEmpty()&&this.exitAtMentionMode(),n&&this.state.inAtMentionMode){var r=Object(D.f)(e.key),o=n.index,i=e.ctrlKey,s=e.shiftKey;switch(this.setState({hadWordSelectionShortcut:i&&s&&(r===D.b.ArrowLeft||r===D.b.ArrowRight)}),r){case D.b.Backspace:var l=o>0&&this.startIndexOfMention===o-1,c=this.startIndexOfMention===o,u=o<this.startIndexOfMention;(l||c||u)&&!this.state.hadWordSelectionShortcut&&this.exitAtMentionMode(),this.state.hadWordSelectionShortcut&&this.setState({hadWordSelectionShortcut:!1});break;case D.b.Delete:o===this.startIndexOfMention&&this.exitAtMentionMode();break;case D.b.Tab:e.stopPropagation();break;case D.b.ArrowUp:case D.b.ArrowDown:e.preventDefault();break;default:0===o&&n.length>0&&this.exitAtMentionMode()}}this.AtMentionRef&&this.AtMentionRef.onMentionsKeyDownHandler(e),t.prototype.onKeyDownHandler.call(this,e)}else Object(a.i)().assertConditionTag(!1,"Quill should be defined for editor handlers!",577066521)},e.prototype.getMentionText=function(){if(this.myQuill){var t=0;this.myQuill.getSelection()&&(t=this.myQuill.getSelection().index),t<this.startIndexOfMention&&Object(i.j)("selection moved before @ when inAtMentionMode: "+this.state.inAtMentionMode+"\n      selectionIndex "+t+" startIndexOfMention "+this.startIndexOfMention);var e=1;return e=t>this.startIndexOfMention?t-this.startIndexOfMention:t===this.startIndexOfMention?1:this.myQuill.getLength(),this.myQuill.getText(this.startIndexOfMention,e)}Object(a.i)().assertConditionTag(!1,"Quill should be defined for editor handlers!",577066522)},e.prototype.exitAtMentionMode=function(){d.u()?this.setState({inAtMentionMode:!1,activeDescendantId:void 0,mentionQueryString:""}):this.setState({inAtMentionMode:!1,mentionQueryString:""}),this.updateAriaAttributes(!1)},e.prototype.enterAtMentionMode=function(){var t=this;this.setState({inAtMentionMode:!0}),setTimeout((function(){return t.updateAriaAttributes(!0)}))},e.prototype.onShowHandler=function(){this.enterAtMentionMode()},e.prototype.updateAriaAttributes=function(t){if(this.editorRef){var e=document.getElementById(this.props.id);if(e&&this.myQuill){if(e.hasAttribute("aria-controls")&&!t)e.removeAttribute("aria-controls");else if(t&&(d.u()||e.setAttribute("aria-controls",$.D(this.props.id)),e.parentElement)){var n=this.myQuill.getSelection();e.parentElement.focus(),n&&this.myQuill.setSelection(n.index,0)}}else Object(a.i)().assertConditionTag(!1,"Trying to use Quill div when not mounted in DOM",588805467)}},e.prototype.insertMentionText=function(t,e,n){if(this.myQuill){this.exitAtMentionMode(),this.props.onMentionCreated(n);var r=Object(u.d)(n),o=Object(u.e)(n),i=An.b.Resolved,s=(new fr).retain(this.startIndexOfMention).delete(t).insert("@"+e,{atmention:JSON.stringify(Object(An.c)(r,o,i))}).insert(" ");this.myQuill.updateContents(s,"api");var l=this.startIndexOfMention+e.length+2;this.myQuill.setSelection(l,0),Object(or.b)(this.props.localizationAPI.formatString(227,e))}else Object(a.i)().assertConditionTag(!1,"Quill should be defined for editor handlers!",577066523)},e.prototype.onSuggestionSelected=function(t){this.insertMentionText(this.state.mentionQueryString.length,t.Name,t)},e.prototype.shouldHideMentionColors=function(){return this.state.isReplacingContentAtBeginning},e.prototype.renderAdditionalEditorContent=function(){return this.props.displayMode===U.Editing?s.createElement(pr,{ref:this.onMentionHostRef,replaceText:this.insertMentionText,onSuggestionSelected:this.onSuggestionSelected,target:this.props.id,onShow:this.onShowHandler,onDismiss:this.exitAtMentionMode,peoplePickerProps:this.props.peoplePickerProps,inAtMentionMode:this.state.inAtMentionMode,getAuthToken:this.props.getAuthToken,onSuggestionHighlighted:this.onAtMentionSuggestionHighlighted}):void 0},e.prototype.getKeyboardBindings=function(){var e=this;return Object(o.__assign)(Object(o.__assign)({},t.prototype.getKeyboardBindings.call(this)),{enter:{key:D.c.Enter,handler:function(){var t;return(!d.e()||!(null===(t=e.smartReplyPickerRef.current)||void 0===t?void 0:t.isSuggestionsShown))&&e.enterNewline(!1)}}})},e}(nr),yr=Mn(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.render=function(){if(this.props.displayMode!==U.Editing){var t={id:this.props.id,accessibilityLabel:this.props.accessibilityLabel,showFullContent:this.props.showFullComment,content:this.props.defaultValue,placeholder:this.props.placeholder,truncationOverlayColor:this.props.truncationOverlayColor,dulledAtMentions:this.props.dulledAtMentions,viewerMode:this.props.useReplyBoxStyling?fe.DisabledEditor:this.props.displayMode===U.Disabled?fe.DisabledComment:fe.ReadOnlyComment,truncationUIText:this.props.localizationAPI.getString(229)};return s.createElement(Dn,Object(o.__assign)({},t))}var e=this.props.componentTreeId.renderContextType;return this.props.supportsAtMentions&&Re(this.props)?s.createElement(hr,Object(o.__assign)({},this.props,{renderContextType:e})):s.createElement(rr,Object(o.__assign)({},this.props,{renderContextType:e}))},e}(s.PureComponent),{componentTreeId:Z.a},"CommentEditor");function mr(t){return d.i()&&(t.isReadOnly||t.postDisplayMode===x.a.Normal||t.postDisplayMode===x.a.Resolved)&&t.isNew}var br=n(734),gr=n(140),vr=Mn(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.getStyles=function(t){return d.bb()?Object(st.e)({id:r.props.id,renderContextType:r.props.componentTreeId.renderContextType},!!r.props.taskTopperProps,r.getMaxHeight(),null==t?void 0:t.colors):Object(st.e)({id:r.props.id,renderContextType:r.props.componentTreeId.renderContextType},!!r.props.taskTopperProps,r.getMaxHeight(),void 0)},r.rootTabIndexValue=-1,r.cardRef=null,r.replyBoxRef=null,r.taskTopperCheckboxRef=null,r.onDraftEmptinessChanged=function(t){r.props.onDraftEmptinessChanged(r,t)},r.contextMenuProps=Object(_.c)((function(t,e,n,o){return{id:$.d({id:t,renderContextType:e}),parentId:r.props.id,title:r.props.localizationAPI.getString(45),ariaLabel:r.props.localizationAPI.getString(45),onMenuClick:r.onContextMenuInteractionHandler,menuItems:n,itemType:F.CardContextMenuItem,tabIndex:o,renderContextType:e}}),5),r.reactionButtonProps=Object(_.c)((function(t,e,n,r,o,i){return d.a()?{commentId:t,isTabbable:n,onReactionPressed:r.onReactionPressed,renderContextType:e,usersByReactionType:o,buttonStrings:i}:void 0}),5),r.reactionButtonStrings=Object(_.c)((function(){return{buttonLabel:r.props.localizationAPI.getString(231),buttonLabelPlural:r.props.localizationAPI.getString(239),buttonA11yDropdownText:r.props.localizationAPI.getString(240)}})),r.fetchReplyButton=Object(_.c)((function(t,e,n,o,i,a,s,l){var c=J.d(l,t,!!a,s);switch(t){case O.a.Reply:case O.a.ReplyPreCommitPending:return{id:$.R({id:e,renderContextType:n}),icon:2,isTabbable:i,disabled:o,onClick:r.sendReplyButtonClickHandler,onKeyDown:r.sendCommentButtonKeyDownHandler,text:r.props.localizationAPI.getString(48),accessibilityLabel:r.props.localizationAPI.getString(49),tooltipText:c,usePrimaryButtonStyling:!0};case O.a.ReplyPostCommitPending:return{disabled:!0,icon:2,onClick:function(){},text:r.props.localizationAPI.getString(48),accessibilityLabel:r.props.localizationAPI.getString(49),showDelayedSpinner:!0,tooltipText:c,usePrimaryButtonStyling:!0};case O.a.Draft:case O.a.DraftPreCommitPending:return{id:$.R({id:e,renderContextType:n}),icon:2,isTabbable:i,disabled:r.shouldDisableSendButton(),onClick:r.sendReplyButtonClickHandler,onKeyDown:r.sendCommentButtonKeyDownHandler,text:r.props.localizationAPI.getString(48),accessibilityLabel:r.props.localizationAPI.getString(83),tooltipText:c,usePrimaryButtonStyling:!0};default:return}})),r.fetchCancelButton=Object(_.c)((function(t,e,n,o){switch(t){case O.a.Reply:case O.a.ReplyPreCommitPending:return{id:$.P({id:e,renderContextType:n}),icon:1,isTabbable:o,disabled:!1,onClick:r.cancelReplyButtonClickHandler,onKeyDown:r.cancelReplyButtonKeyDownHandler,text:r.props.localizationAPI.getString(15),accessibilityLabel:r.props.localizationAPI.getString(47),tooltipText:r.props.localizationAPI.getString(175),usePrimaryButtonStyling:!1};case O.a.ReplyPostCommitPending:return{disabled:!0,icon:1,onClick:function(){},text:r.props.localizationAPI.getString(15),accessibilityLabel:r.props.localizationAPI.getString(47),tooltipText:r.props.localizationAPI.getString(175),usePrimaryButtonStyling:!1};default:return}})),r.getMemoizedCommitButtons=Object(_.c)((function(t,e,n,o,i,a,s,l){var c=[],u=r.fetchReplyButton(t,e,n,o,i,a,s,l);if(!u)return c;c.push(u);var p=r.fetchCancelButton(t,e,r.props.componentTreeId.renderContextType,i);return p?(c.push(p),c):c})),r.onEditorMount=function(){r.props.onCardEditorMounted(r.props.id)},r.onEditorUnmount=function(){r.onCardSaveDraft(r.textEditorRef)},r.renderWithContexts=function(t){return r.styles=r.getStyles(t),s.createElement(w.a,{className:r.getStyles(t).commentCardFocusTrapZone,disabled:r.shouldDisableFocusTrapZone(),disableFirstFocus:!0,forceFocusInsideTrap:!1,ignoreExternalFocusing:!0,isClickableOutsideFocusTrap:!0},r.renderCard(t))},r.renderPosts=r.renderPosts.bind(r),r.expandButtonHandler=r.expandButtonHandler.bind(r),r.onPost=r.onPost.bind(r),r.onCancel=r.onCancel.bind(r),r.onEditorClick=r.onEditorClick.bind(r),r.shouldDisableSendButton=r.shouldDisableSendButton.bind(r),r.cardKeyDownHandler=r.cardKeyDownHandler.bind(r),r.cardClickHandler=r.cardClickHandler.bind(r),r.renderCommitRegion=r.renderCommitRegion.bind(r),r.replyBoxKeyDownHandler=r.replyBoxKeyDownHandler.bind(r),r.cancelReplyThenFocus=r.cancelReplyThenFocus.bind(r),r.cancelReplyButtonKeyDownHandler=r.cancelReplyButtonKeyDownHandler.bind(r),r.sendCommentButtonKeyDownHandler=r.sendCommentButtonKeyDownHandler.bind(r),r.cancelReplyButtonClickHandler=r.cancelReplyButtonClickHandler.bind(r),r.sendReplyButtonClickHandler=r.sendReplyButtonClickHandler.bind(r),r.expandButtonClickHandler=r.expandButtonClickHandler.bind(r),r.expandButtonKeyDownHandler=r.expandButtonKeyDownHandler.bind(r),r.renderableItemListScrollHandler=r.renderableItemListScrollHandler.bind(r),r.clearDraft=r.clearDraft.bind(r),r.onCardMouseEnter=r.onCardMouseEnter.bind(r),r.onCardMouseLeave=r.onCardMouseLeave.bind(r),r.setCardRef=r.setCardRef.bind(r),r.setReplyBoxRef=r.setReplyBoxRef.bind(r),r.setTaskTopperCheckboxRef=r.setTaskTopperCheckboxRef.bind(r),r.onContextMenuInteractionHandler=r.onContextMenuInteractionHandler.bind(r),r.editorBlurHandler=r.editorBlurHandler.bind(r),r.editorComponentRef=r.editorComponentRef.bind(r),r.onContextMenuItemMounted=r.onContextMenuItemMounted.bind(r),r.onEditorCommitRequested=r.onEditorCommitRequested.bind(r),r.onEditorEscapeRequested=r.onEditorEscapeRequested.bind(r),r.getContentsAsync=r.getContentsAsync.bind(r),r.getCursorPositionAsync=r.getCursorPositionAsync.bind(r),r.renderResolvedOrTaskTopper=r.renderResolvedOrTaskTopper.bind(r),r.getPostArray=r.getPostArray.bind(r),r.hideCardHeader=r.hideCardHeader.bind(r),r.state={rootAuthorOpacity:1,headerHidden:!1},r.setTabIndex(e),r}return Object(o.__extends)(e,t),e.prototype.getCommentEditorCallbackProps=function(){return{componentRef:this.editorComponentRef,onDraftEmptinessChanged:this.onDraftEmptinessChanged,onEditorBlur:this.editorBlurHandler,onFocus:this.onEditorFocus,onUnmount:this.onEditorUnmount}},e.prototype.setCardRef=function(t){this.cardRef=t},e.prototype.setReplyBoxRef=function(t){this.replyBoxRef=t},e.prototype.setTaskTopperCheckboxRef=function(){this.taskTopperCheckboxRef=document.getElementById($.i({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType})),this.taskTopperCheckboxRef&&this.setTabIndex(this.props)},e.prototype.setTabIndex=function(t){t.selected||t.isTabbable?(this.rootTabIndexValue=0,this.taskTopperCheckboxRef&&(this.taskTopperCheckboxRef.tabIndex=0)):(this.rootTabIndexValue=-1,this.taskTopperCheckboxRef&&(this.taskTopperCheckboxRef.tabIndex=-1))},e.prototype.getInnerElementsTabIndex=function(){return this.props.displayMode===O.a.CardPostCommitPending?-1:this.rootTabIndexValue},e.prototype.getRootTabIndex=function(){return this.rootTabIndexValue},e.prototype.getMaxHeight=function(){return this.props.maximumDimensions&&this.props.maximumDimensions.height?Math.max(this.props.maximumDimensions.height,st.a):void 0},e.prototype.onCardMouseEnter=function(){this.props.onCardHighlightChange(this,!0)},e.prototype.onCardMouseLeave=function(){this.props.onCardHighlightChange(this,!1)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.notifyRenderedOnce()},e.prototype.UNSAFE_componentWillUpdate=function(t,e){this.setTabIndex(t)},e.prototype.componentDidUpdate=function(t,e){var n=this.isActiveReply()||this.isActiveDraft();this.props.draftId&&!n&&Object(a.i)().assertConditionTag(!1,"CardDisplayMode inconsistent with draft warning state",593799004)},e.prototype.focus=function(){this.props.displayMode!==O.a.ReplySessionRequestPending&&this.cardRef&&this.cardRef.focus({preventScroll:!0})},e.prototype.blur=function(){this.cardRef&&this.cardRef.blur()},e.prototype.getContentsAsync=function(){return this.textEditorRef?this.textEditorRef.getContentsAsync():new Promise((function(t,e){e(new p.a(B.e,i.e.reserveTag(589103744),-2130957550))}))},e.prototype.getCursorPositionAsync=function(){return this.textEditorRef?this.textEditorRef.getCursorPositionAsync():new Promise((function(t,e){t(void 0)}))},e.prototype.cardKeyDownHandler=function(t){var e=this.props.componentTreeId.renderContextType;switch(Object(D.f)(t.key)){case D.b.Tab:if(this.props.isTabbable){if(!d.vb()&&this.isActiveDraft()){var n=document.getElementById($.R({id:this.props.id,renderContextType:e})),r=document.getElementById($.s({id:this.props.id,renderContextType:e})),o=void 0;t.target!==n||t.shiftKey?t.target===r&&(o=t.shiftKey&&!this.shouldDisableSendButton()?n:this.textEditorRef):o=r,o&&(o.focus(),t.preventDefault())}t.stopPropagation()}break;case D.b.Escape:d.L()||(this.props.hasSelectedChild&&this.props.onCardSelectExpand(this,!1,!1),t.stopPropagation(),t.preventDefault());break;case D.b.Enter:case D.b.Space:t.currentTarget===t.target&&(this.toggleExpansion(),t.stopPropagation(),t.preventDefault())}},e.prototype.shouldClickTargetExpandCard=function(t){var e=this.props.componentTreeId.renderContextType,n=t.target,r=document.getElementById($.i({id:this.props.id,renderContextType:e}));if(r&&r.parentElement&&r.parentElement.contains(n))return!1;var o=document.getElementById($.U({id:this.props.id,renderContextType:e}));return!o||!o.contains(n)},e.prototype.cardClickHandler=function(t){this.props.hasSelectedChild||this.shouldClickTargetExpandCard(t)&&(this.props.onCardSelectExpand(this,!1,!1),t.stopPropagation())},e.prototype.contextMenuClickHandler=function(t,e){t.onClick(this.props.id,!!this.props.taskTopperProps),e&&e.stopPropagation()},e.prototype.expandButtonClickHandler=function(t){this.expandButtonHandler(),null==t||t.stopPropagation()},e.prototype.expandButtonKeyDownHandler=function(t){Object(D.f)(t.key)===D.b.Enter&&(this.expandButtonHandler(),t.stopPropagation())},e.prototype.renderableItemListScrollHandler=function(t){var e=t.target;if(e.id===$.N({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType})){var n=e.scrollTop;this.setState({rootAuthorOpacity:n>st.b?0:(st.b-n)/st.b})}},e.prototype.expandButtonHandler=function(){this.focus(),this.props.onCardSelectExpand(this,!0,!1)},e.prototype.onPost=function(t){this.props.onPost(this,t)},e.prototype.onCancel=function(){this.props.onCancel(this)},e.prototype.onEditorClick=function(t){this.props.displayMode===O.a.Normal&&this.props.onEditorPress(this),t.stopPropagation()},e.prototype.shouldDisableSendButton=function(){return!1!==this.props.isDraftEmpty},e.prototype.generateCardActionItems=function(t){var e=this,n=[];return t&&t.length>0&&(n=t.map((function(t){return{id:$.c({id:e.props.id,renderContextType:e.props.componentTreeId.renderContextType},t.text),text:t.text,accessibilityLabel:t.text,onClick:e.contextMenuClickHandler.bind(e,t),icon:t.icon,tooltipText:t.tooltipText,tooltipDirection:E.a.topCenter,disabled:void 0!==e.props.cardRelativeDraftingState,isTabbable:e.props.isTabbable}}))),n},e.prototype.renderCardFooter=function(){return s.createElement("div",{className:this.styles.cardFooter})},e.prototype.onContextMenuItemMounted=function(t){t&&t.focus()},e.prototype.onContextMenuInteractionHandler=function(t){t&&function(t){return void 0!==t.key}(t)&&Object(D.f)(t.key)===D.b.ArrowDown&&t.preventDefault()},e.prototype.renderCardHeader=function(){var t=this.props.componentTreeId.renderContextType;if(!this.state.headerHidden){var e=this.props.menuItems.length>0&&this.props.displayMode!==O.a.Resolved&&!this.props.isReadOnly,n={id:this.props.id,author:this.props.author,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL,anchorText:this.props.anchorText,contextMenuProps:e?this.contextMenuProps(this.props.id,t,this.props.menuItems,this.getInnerElementsTabIndex()):void 0,isResolvedCard:this.props.displayMode===O.a.Resolved,hideActions:e?this.props.restrictActionControls||this.props.displayMode===O.a.CardPostCommitPending:void 0,localizationAPI:this.props.localizationAPI,onCancelDraft:this.onCancel,rootAuthorOpacity:this.state.rootAuthorOpacity,displayMode:this.props.displayMode,cardCollapsedState:this.props.cardCollapsedState,menuItems:this.props.menuItems,preventDefaultKeyDownBehavior:this.props.preventDefaultKeyDownBehavior,isTabbable:this.props.isTabbable,reactionButtonProps:this.reactionButtonProps(this.props.id,t,this.props.isTabbable,{onReactionPressed:this.props.onReactionUpdated},this.props.usersByReactionType,this.reactionButtonStrings()),onEditRootPost:this.props.onEditRootPost,allowRootEditButton:this.props.allowRootEditButton};return s.createElement(Oe,Object(o.__assign)({},n))}},e.prototype.renderViewMoreRepliesButtonBlueDot=function(){return s.createElement(gt,{dotType:H.ViewMoreRepliesButton,hasTaskTopper:!1,renderContextType:this.props.componentTreeId.renderContextType})},e.prototype.injectHideCommentHeaderCallback=function(t){if(t){var e=t.constructor===Array?t[0]:t;return s.cloneElement(e,{onHideCardHeader:this.hideCardHeader})}},e.prototype.getPostArray=function(){var t=this.props.children;return t?t.constructor===Array?t:[t]:[]},e.prototype.renderPosts=function(){var t=this.getPostArray(),e=t.length,n=this.props.displayMode===O.a.Resolved,r=e>2||n&&e>1,o=this.props.componentTreeId.renderContextType,i=e?t[0]:void 0;i=this.injectHideCommentHeaderCallback(i);var a=e>1?t[e-1]:void 0,l=[],c=!1;if(this.props.children&&r)for(var u=1;u<e-1;++u){var p=this.props.children[u];if(l.push(p),!c&&p.props.postDisplayMode)c=mr(p.props)}var d=this.props.cardCollapsedState===C.a.Collapsed,f=d&&r,h=d&&n;return s.createElement("div",{id:$.N({id:this.props.id,renderContextType:o}),onClick:f?this.expandButtonClickHandler:void 0,className:this.styles.renderableItemList,role:"group","aria-expanded":r?!d:void 0,onKeyDown:f?this.expandButtonKeyDownHandler:void 0,onScroll:this.renderableItemListScrollHandler},i,this.renderExpandButton({onPress:this.expandButtonHandler,unreadPostHidden:c}),f?void 0:l,h?void 0:a,o===P.a.DiscreteIsolated?s.createElement("div",{className:this.styles.spacingAfterLastPost}):void 0)},e.prototype.clearDraft=function(){this.textEditorRef&&this.textEditorRef.clear()},e.prototype.replyBoxKeyDownHandler=function(t){var e=this.props.componentTreeId.renderContextType;if(Object(D.f)(t.key)===D.b.Enter||t.which===D.c.Space)this.props.displayMode!==O.a.Normal&&this.props.displayMode!==O.a.ReplySessionRequestPending||this.props.onEditorPress(this),t.target===this.replyBoxRef&&t.preventDefault(),t.stopPropagation();else if(!d.vb()&&Object(D.f)(t.key)===D.b.Tab){var n=this.isActiveReply();if(this.isActiveDraft()||n){var r=document.getElementById($.R({id:this.props.id,renderContextType:e})),o=n?document.getElementById($.P({id:this.props.id,renderContextType:e})):document.getElementById($.s({id:this.props.id,renderContextType:e})),i=document.getElementById($.T({id:this.props.id,renderContextType:e}));t.shiftKey||!t.shiftKey&&this.shouldDisableSendButton()?o&&o.focus():d.b()&&i?i.focus():r&&r.focus(),t.preventDefault(),t.stopPropagation()}}},e.prototype.sendCommentButtonKeyDownHandler=function(t){Object(D.f)(t.key)===D.b.Enter?this.onPost(N.a.CommitButton):d.lb()||Object(D.f)(t.key)!==D.b.Escape||this.cancelReplyThenFocus()},e.prototype.cancelReplyButtonKeyDownHandler=function(t){(Object(D.f)(t.key)===D.b.Enter||!d.lb()&&Object(D.f)(t.key)===D.b.Escape)&&this.cancelReplyThenFocus(),d.vb()||Object(D.f)(t.key)!==D.b.Tab||t.shiftKey||this.textEditorRef&&(this.textEditorRef.focus(),t.preventDefault(),t.stopPropagation())},e.prototype.sendReplyButtonClickHandler=function(t){this.onPost(N.a.CommitButton),null==t||t.stopPropagation()},e.prototype.cancelReplyButtonClickHandler=function(t){this.cancelReplyThenFocus(),null==t||t.stopPropagation()},e.prototype.cancelReplyThenFocus=function(){this.onCancel();var t=document.getElementById($.h({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType},!1));t&&t.focus()},e.prototype.onEditorCommitRequested=function(){this.onPost(N.a.KeyboardShortcut)},e.prototype.onEditorEscapeRequested=function(){d.lb()?d.vb()&&this.focus():this.cancelReplyThenFocus()},e.prototype.editorBlurHandler=function(){this.props.onEditorBlur(this)},e.prototype.editorComponentRef=function(t){this.textEditorRef=t},e.prototype.renderCommentEditor=function(t){var e=J.c(this.props.displayMode,this.props.localizationAPI),n=this.props.componentTreeId.renderContextType,r=Object(o.__assign)(Object(o.__assign)(Object(o.__assign)(Object(o.__assign)({id:$.e({id:this.props.id,renderContextType:n}),isDraftEmpty:void 0,isTabbable:this.props.isTabbable,accessibilityLabel:e,accessibilityDescribedBy:$.Q({id:this.props.id,renderContextType:n})},this.getCommentEditorCallbackProps()),{displayMode:U.Disabled,useReplyBoxStyling:!0,isHeightBounded:!!this.getMaxHeight(),placeholder:J.g(this.props.localizationAPI,this.props.supportsAtMentions,this.isActiveDraft(),this.props.cardRelativeDraftingState),scrollingContainerId:this.props.scrollingContainerId,supportsAtMentions:this.props.supportsAtMentions,localizationAPI:this.props.localizationAPI}),this.props.mentionEditorProps),{onMount:this.onEditorMount,focusManagerKeyDownHandler:this.props.commentEditorAdditionalKeyDownHandler,commentId:this.props.id}),i=this.props.smartReplies?{pickerTitle:this.props.localizationAPI.getString(203),smartReplies:this.props.smartReplies}:void 0;return t||(r=Object(o.__assign)(Object(o.__assign)({},r),{displayMode:U.Editing,onCommitRequested:this.onEditorCommitRequested,onEscapeRequested:this.onEditorEscapeRequested,initialDraftContent:this.props.savedDraftContent,isDraftEmpty:this.props.isDraftEmpty,richTextCapabilities:this.props.richTextCapabilities,smartReplyProps:i})),s.createElement(yr,Object(o.__assign)({},r))},e.prototype.hideCardHeader=function(t){this.setState({headerHidden:t})},e.prototype.renderCommitRegion=function(){var t=this.props.componentTreeId.renderContextType,e=this.getMemoizedCommitButtons(this.props.displayMode,this.props.id,t,this.shouldDisableSendButton(),this.props.isTabbable,this.props.taskTopperProps,this.props.selectedTaskAssignee,this.props.localizationAPI);if(e.length)return s.createElement(Ie,{taskAssigner:this.getTaskAssignerProps(),buttons:e,tooltipDirection:E.a.bottomCenter})},e.prototype.renderReplyBox=function(){if(!this.props.isReadOnly){var t=this.props.componentTreeId.renderContextType,e=this.isActiveDraft(),n=this.isActiveReply(),r=this.props.displayMode===O.a.ReplyPostCommitPending||this.props.displayMode===O.a.CardPostCommitPending,o=n||e||r,i=!n&&!e&&!r,a=!n&&!e;return s.createElement("div",{className:this.styles.replyBoxContainer,style:{position:"relative"}},s.createElement("div",{id:$.g({id:this.props.id,renderContextType:t}),ref:this.setReplyBoxRef,role:i?"button":void 0,"aria-disabled":!(d.C()||!i||void 0===this.props.cardRelativeDraftingState)||void 0,"aria-label":i?J.g(this.props.localizationAPI,this.props.supportsAtMentions,e,this.props.cardRelativeDraftingState):void 0,className:!d.vb()&&this.props.restrictActionControls?this.styles.replyBoxRestrictFocus:this.styles.replyBoxDefault,onClick:this.onEditorClick,onKeyDown:this.replyBoxKeyDownHandler,tabIndex:i?this.props.displayMode===O.a.ReplyPostCommitPending?-1:this.getInnerElementsTabIndex():void 0},this.renderCommentEditor(a),s.createElement("div",{className:this.styles.cardOverlay,style:this.props.displayMode===O.a.ReplyPostCommitPending?{display:"inline"}:{display:"none"}})),o?this.renderCommitRegion():void 0,s.createElement("div",{id:$.Q({id:this.props.id,renderContextType:t}),style:{display:"none"}},this.props.localizationAPI.getString(55)))}},e.prototype.renderResolvedOrTaskTopper=function(){var t=this,e=Object(_.c)((function(e,n){return{cardTopperContainerProps:{},resolvedButtonsProps:e===O.a.Resolved?t.generateCardActionItems(n):void 0,taskTopperCheckboxRef:t.setTaskTopperCheckboxRef}}));return this.renderResolvedOrTaskTopperHelper(e(this.props.displayMode,this.props.menuItems))},e.prototype.shouldDisableFocusTrapZone=function(){var t;if(null===(t=this.props)||void 0===t?void 0:t.tabFocusTrapBehavior)switch(this.props.tabFocusTrapBehavior){case A.b.Trap:return!1;case A.b.DoNotTrap:return!0;default:Object(i.n)(this.props.tabFocusTrapBehavior)}return!Object(gr.a)(this.props.componentTreeId.renderContextType)&&(d.vb()||!this.isActiveReply()&&!this.isActiveDraft())},e.prototype.renderCard=function(t){var e=this.props.componentTreeId.renderContextType,n=this.styles.cardInnerContainer,r=this.props.isReadOnly?this.styles.cardBodyReadOnly:this.styles.cardBody,i=Object(st.d)({id:this.props.id,renderContextType:e},this.props.highlightCard,this.isSelectionWithinCard(),this.props.displayMode===O.a.Resolved&&this.props.cardCollapsedState===C.a.Collapsed,null==t?void 0:t.colors,null==t?void 0:t.styles),a={id:this.props.id,renderContextType:e},l={id:$.h(a,this.props.isNewThread),role:"treeitem",className:i,tabIndex:this.getRootTabIndex(),onContextMenu:br.b,onKeyDown:this.cardKeyDownHandler,ref:this.setCardRef,onFocus:this.onRootCardViewFocus},c={"aria-label":this.props.accessibilityLabel,"aria-expanded":this.props.cardCollapsedState===C.a.Expanded,"aria-selected":this.isSelectionWithinCard(),"aria-level":1,"aria-owns":$.N({id:this.props.id,renderContextType:e}),"aria-setsize":this.props.accessibilitySetSize,"aria-posinset":this.props.accessibilityPositionInSet};return this.props.displayMode===O.a.Loading?s.createElement("div",Object(o.__assign)({"aria-label":this.props.accessibilityLabel},l),s.createElement("div",{className:this.styles.cardPlaceholder},s.createElement("div",{id:$.f(a),className:this.styles.cardOverlay},s.createElement(k.a,{delay:ht.f},s.createElement(I.a,{className:this.styles.cardSpinner,size:R.a.large}))))):!d.vb()&&this.isActiveDraft()?s.createElement("div",Object(o.__assign)({onClick:this.cardClickHandler},l,c),this.renderResolvedOrTaskTopper(),this.renderCardHeader(),s.createElement("div",{className:n},s.createElement("div",{className:r},this.renderPosts(),this.renderReplyBox(),this.renderDraftWarning()))):this.props.displayMode===O.a.Resolved?s.createElement("div",Object(o.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},l,c),this.renderResolvedOrTaskTopper(),this.renderCardHeader(),s.createElement("div",{className:n},s.createElement("div",{className:r},this.renderPosts(),this.renderCardFooter()))):this.props.displayMode===O.a.CardPostCommitPending?s.createElement("div",Object(o.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},l,c),this.renderResolvedOrTaskTopper(),this.renderCardHeader(),s.createElement("div",{className:n},s.createElement("div",{className:this.styles.cardBody},this.renderPosts(),this.renderReplyBox(),s.createElement("div",{className:this.styles.cardOverlay},s.createElement(k.a,{delay:ht.f},s.createElement(I.a,{className:this.styles.cardSpinner,size:R.a.large})))))):s.createElement("div",Object(o.__assign)({onMouseEnter:this.onCardMouseEnter,onMouseLeave:this.onCardMouseLeave,onClick:this.cardClickHandler},l,c),this.renderResolvedOrTaskTopper(),this.renderCardHeader(),s.createElement("div",{className:n},s.createElement("div",{className:r},this.renderPosts(),this.renderReplyBox(),this.renderDraftWarning())))},e.prototype.render=function(){return d.bb()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(Ut),{componentTreeId:Z.a},Ut.DisplayName),Cr=n(127);var Or=s.memo((function(t){var e,n=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,r=function(t){switch(t){case 13:case 14:return"TaskAssign";case 15:return"TaskComplete";case 21:return"TaskReopen";case 17:return"TaskEdit";case 18:return"TaskDelete";default:return}}(t.icon),o=yt(n),i=s.createElement("div",null,s.createElement("div",{className:o.container},r&&s.createElement(Mt.a,{iconName:r,className:o.icon}),s.createElement("div",{className:o.body},t.description)));return s.createElement(Q.a,{content:t.description,directionalHint:E.a.bottomCenter,tooltipProps:nt.a},i)})),Tr=Object(_.c)((function(t){var e;return{body:Object(V.eb)({fontFamily:"inherit",color:null!==(e=null==t?void 0:t.SubText)&&void 0!==e?e:W.a.GRAY_E,fontWeight:"normal",fontSize:"11px",lineHeight:18,marginLeft:"3px",userSelect:"text"})}})),xr=s.memo((function(t){var e,n=null===(e=Object(M.b)())||void 0===e?void 0:e.colors,r=Tr(n);return s.createElement("div",{className:r.body,id:t.id},t.timestamp)})),Pr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onFocusParent=function(){return e.props.onFocusParent(e)},e.saveDraftIfEditing=function(t){e.isEditingOrPending(e.props.postDisplayMode)&&e.props.onSaveDraft(e.getId(),t)},e}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"textEditorRef",{get:function(){return this._textEditorRef},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.props.onPostMounted(this.props.id)},e.prototype.componentWillUnmount=function(){this.textEditorRef&&this.saveDraftIfEditing(this.textEditorRef)},e.prototype.setContents=function(t){this.textEditorRef&&this.textEditorRef.setContents(t)},e.prototype.getContentsAsync=function(){return this.textEditorRef?this.textEditorRef.getContentsAsync():Promise.resolve("")},e.prototype.getCursorPositionAsync=function(){return this.textEditorRef?this.textEditorRef.getCursorPositionAsync():Promise.resolve(void 0)},e.prototype.getId=function(){return this.props.id},e.prototype.isEditingOrPending=function(t){return t===x.a.Editing||t===x.a.EditPreCommitPending},e.prototype.renderTimestamp=function(){if(!this.props.collapsed&&this.props.postDisplayMode!==x.a.New_nonFluent&&!this.isEditingOrPending(this.props.postDisplayMode)){var t=this.props.componentTreeId.renderContextType;return s.createElement(xr,Object(o.__assign)({},{timestamp:this.props.timestamp,id:Object($.K)({id:this.props.id,renderContextType:t}),renderContextType:t,resolved:this.props.postDisplayMode===x.a.Resolved}))}},e.prototype.getActionBarItemsAsButtonProps=function(t){var e=this;return t.actionBarItems.map((function(n,r){n.id,n.onClick;var i=Object(o.__rest)(n,["id","onClick"]);return Object(o.__assign)(Object(o.__assign)({},i),{id:Object($.a)({id:t.id,renderContextType:e.props.componentTreeId.renderContextType},r),onClick:function(){return n.onClick(e)},onKeyDown:d.m()?function(t){var r;return null===(r=n.onKeyDown)||void 0===r?void 0:r.call(n,t,e)}:void 0,isTabbable:t.isTabbable})}))},e.prototype.shouldShowHistoryItemTaskHeader=function(){return!!this.props.taskHistoryProps&&!this.props.collapsed&&d.b()},e.prototype.getHistoryItemContentFullProps=function(t){return Object(o.__assign)(Object(o.__assign)({},t),{renderContextType:this.props.componentTreeId.renderContextType})},e.prototype.renderHistoryItemContent=function(){if(this.props.taskHistoryProps&&this.shouldShowHistoryItemTaskHeader())return s.createElement(Or,Object(o.__assign)({},this.getHistoryItemContentFullProps(this.props.taskHistoryProps)))},e.prototype.renderDraftWarning=function(){var t=this.props.draftWarningState;return d.C()&&t?s.createElement(ut,{key:"draftWarning",draftWarningState:t,localizationAPI:this.props.localizationAPI,target:z.Post,id:Object($.t)({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType})}):null},e.DisplayName="CommentPost",e}(s.PureComponent),Sr=Object(_.c)((function(t,e,n,r){var o,i,a,s;return{actionbarEdit:Object(V.eb)({maxHeight:"30px",marginTop:"5px",display:"flex",flexDirection:"row",flexWrap:"nowrap",overflow:"hidden",alignSelf:"flex-end"}),body:Object(V.eb)({display:"flex",direction:"inherit",flexDirection:"column",flexGrow:1,marginTop:"6px",marginBottom:"2px",marginRight:6,position:"relative",overflow:"hidden"},t?{marginLeft:"14px",marginRight:"14px",marginTop:"0px"}:{paddingLeft:"3px"}),container:Object(V.eb)({display:"flex",direction:"inherit",overflow:"hidden",flexGrow:1,flexDirection:"row",flexWrap:"nowrap",flexShrink:0,margin:0,marginLeft:"2px",marginRight:"2px",border:0,position:"relative",selectors:{":focus":e?{outline:"none",borderRadius:"1px",boxShadow:"0px 0px 0px 1px "+W.a.FOCUS_BOX,selectors:(o={},o[V.l]={boxShadow:"none",outline:"1px solid "+W.a.FOCUS_BOX},o)}:{outline:"none"}}},t?{marginTop:"2px",overflow:"visible",backgroundColor:"transparent"}:{}),postOverlay:Object(V.eb)({position:"absolute",zIndex:10,left:0,top:0,right:0,bottom:0,backgroundColor:null!==(i=null==r?void 0:r.PostOverlay)&&void 0!==i?i:"rgba(255,255,255,0.5)"}),postSpinner:Object(V.eb)({position:"absolute",zIndex:20,left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px",selectors:{"& .ms-Spinner-circle":{borderColor:_e.a,borderTopColor:_e.b}}}),editorEditingContainer:Object(V.eb)({display:"flex",margin:"0px",marginBottom:"4px",backgroundColor:null!==(a=null==n?void 0:n.CardBackground)&&void 0!==a?a:"#FFFFFF",border:"1px solid",borderColor:null!==(s=null==n?void 0:n.CommonControlBorder)&&void 0!==s?s:Jt.b.gray110,borderRadius:ht.c,userSelect:"text",padding:0}),editorRestContainer:Object(V.eb)({display:"flex",marginRight:"2px",backgroundColor:"transparent",userSelect:"text",padding:"1px",paddingTop:t?"0px":"2px",border:0}),lowFidelityWarning:Object(V.eb)({display:"flex",marginLeft:"4px",fontFamily:"inherit",fontSize:"12px",fontWeight:"normal",fontStyle:"italic",borderStyle:"dotted",borderColor:"red",borderWidth:"2px",whiteSpace:"normal"})}})),jr=n(2369),_r=Object(_.c)((function(t){var e,n,r,o;return{root:{maxHeight:"12px",marginRight:"6px",padding:0,color:null!==(n=null==t?void 0:t.PrimaryButton)&&void 0!==n?n:"#2B5C9C",fontSize:"11px",fontWeight:"600",fontFamily:"inherit",lineHeight:1.4,overflow:"visible",border:"1px solid transparent",selectors:(e={".ms-Fabric--isFocusVisible &:focus::after":ht.m},e[V.l]={outline:"auto"},e)},rootHovered:Object(V.eb)({color:null!==(r=null==t?void 0:t.PrimaryButtonHovered)&&void 0!==r?r:"#333333"},ht.l),rootPressed:Object(d.bb)()?Object(V.eb)({color:null==t?void 0:t.PrimaryButtonPressed}):void 0,rootFocused:Object(V.eb)({color:null!==(o=null==t?void 0:t.PrimaryButton)&&void 0!==o?o:"#333333",outline:"none",border:"1px dotted"},ht.k),label:{margin:0}}})),wr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderWithContexts=function(t){var n=_r(null==t?void 0:t.colors),r={id:e.props.id,disabled:e.props.disabled,onClick:function(t){t.stopPropagation(),e.props.onClick&&e.props.onClick(t)},ariaLabel:e.props.accessibilityLabel,tabIndex:e.props.isTabbable?void 0:-1};return s.createElement(qt.a,Object(o.__assign)({},r,{styles:n}),e.props.text)},e}return Object(o.__extends)(e,t),e.prototype.render=function(){return Object(d.bb)()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(s.PureComponent),Er=function(t){function e(e){var n=t.call(this,e)||this;return n.state={content:[]},n}return Object(o.__extends)(e,t),e.prototype.UNSAFE_componentWillMount=function(){this.setState({content:this.generateRenderedContent(this.props.actions)})},e.prototype.UNSAFE_componentWillReceiveProps=function(t){t.actions!==this.props.actions&&this.setState({content:this.generateRenderedContent(t.actions)})},e.prototype.generateRenderedContent=function(t){return t.map((function(t,e){return s.createElement(wr,Object(o.__assign)({key:e},t))}))},e.prototype.render=function(){return this.props.isVisible?s.createElement("div",null,this.state.content):s.createElement("div",null)},e}(s.PureComponent),kr=Object(_.c)((function(t){var e;return{errorWrapper:Object(V.eb)({display:"flex",direction:"inherit",flexDirection:"row",marginTop:"6px",marginRight:"8px",position:"relative",width:"100%"}),errorMessageContainer:Object(V.eb)({display:"flex",direction:"inherit",flexDirection:"column",marginLeft:"10px",marginRight:"8px",width:"100%"}),errorMessage:Object(V.eb)({fontSize:"12px",paddingLeft:"1px",color:null!==(e=null==t?void 0:t.Text)&&void 0!==e?e:W.a.ACTIVE_COMMENT_TEXT,textAlign:"left",fontFamily:"inherit",marginRight:"8px",marginBottom:"3px",display:"flex",fontWeight:"normal",whiteSpace:"normal"}),errorIconStyles:{root:{width:"16px",fontSize:"16px",marginTop:"4px",marginLeft:"11px"}}}})),Ir=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getIconProps=Object(K.k)((function(t){return{iconName:Object(jt.a)(19),styles:t.errorIconStyles}})),e.renderWithContexts=function(t){return e.styles=Object(d.bb)()?kr(null==t?void 0:t.colors):kr(void 0),s.createElement("div",{className:e.styles.errorWrapper},s.createElement(Mt.a,Object(o.__assign)({},e.getIconProps(e.styles),{tabIndex:-1})),s.createElement("div",{className:e.styles.errorMessageContainer},s.createElement("div",{id:e.props.id,className:e.styles.errorMessage},e.props.warningMessage),s.createElement(Er,{isVisible:!0,actions:e.props.buttons})))},e}return Object(o.__extends)(e,t),e.prototype.componentDidMount=function(){this.props.hideCardHeader&&this.props.hideCardHeader(!0)},e.prototype.componentWillUnmount=function(){this.props.hideCardHeader&&this.props.hideCardHeader(!1)},e.prototype.render=function(){return Object(d.bb)()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(s.PureComponent),Rr=Mn(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.postRootKeyDownHandler=function(t){switch(Object(D.f)(t.key)){case D.b.Enter:case D.b.Space:t.currentTarget===t.target&&r.props.parent&&(r.props.onCollapseParent(r),t.stopPropagation(),t.preventDefault())}},r.onDraftEmptinessChanged=function(t){r.props.onDraftEmptinessChanged(r,t)},r.onEditorMount=function(){r.props.onPostEditorMounted(r.props.id)},r.reactionButtonProps=Object(_.c)((function(t,e,n,r,o,i){return{commentId:t,isTabbable:n,onReactionPressed:r.onReactionPressed,renderContextType:e,usersByReactionType:o,buttonStrings:i}})),r.reactionButtonStrings=Object(_.c)((function(){return{buttonLabel:r.props.localizationAPI.getString(231),buttonLabelPlural:r.props.localizationAPI.getString(239),buttonA11yDropdownText:r.props.localizationAPI.getString(240)}})),r.getDisplayErrorProps=Object(_.c)((function(t,e,n){var o=r.props.localizationAPI.getString(183),i=$.L({id:e,renderContextType:n});return r.getPostWarningProps(t,o,i)})),r.getLowFidelityWarningProps=Object(_.c)((function(t,e,n,o){var i=$.C({id:n,renderContextType:o});return r.getPostWarningProps(t,e,i)})),r.renderWithContexts=function(t){switch(r.styles=Sr(!!r.props.parent,r.shouldUseFocusStyle(),null==t?void 0:t.colors,null==t?void 0:t.styles),r.defaultEditorProps=r.getDefaultEditorProps(null==t?void 0:t.colors),r.props.postDisplayMode){case x.a.LowFidelityWarningDelete:case x.a.LowFidelityWarningEdit:return r.renderLowFidelityWarningState();case x.a.Editing:case x.a.EditPreCommitPending:return r.renderEditState();case x.a.Resolved:return r.renderResolvedState();case x.a.Normal:case x.a.PendingDraft:return r.renderNormalState();case x.a.PendingEdit:return r.renderPendingEditState();case x.a.Error:return r.renderPostErrorState();case x.a.New_nonFluent:throw new p.a(B.m,i.e.reserveTag(589103702),-2130957558);default:return Object(i.n)(r.props.postDisplayMode),null}},r.state={hover:!1,actionBarItems:[]},r.postFocusHandler=r.postFocusHandler.bind(r),r.postClickHandler=r.postClickHandler.bind(r),r.renderCommentEditor=r.renderCommentEditor.bind(r),r.commitHandler=r.commitHandler.bind(r),r.commentEditorKeyDownHandler_deprecated=r.commentEditorKeyDownHandler_deprecated.bind(r),r.cancelHandler_deprecated=r.cancelHandler_deprecated.bind(r),r.editorComponentRef=r.editorComponentRef.bind(r),r.postEditingKeyDownHandler_deprecated=r.postEditingKeyDownHandler_deprecated.bind(r),r.onMouseLeavePost=r.onMouseLeavePost.bind(r),r.onMouseOverPost=r.onMouseOverPost.bind(r),r.onEditorCommitRequested=r.onEditorCommitRequested.bind(r),r.onEditorEscapeRequested=r.onEditorEscapeRequested.bind(r),r.onContextMenuInteractionHandler=r.onContextMenuInteractionHandler.bind(r),r.trySelectPost=r.trySelectPost.bind(r),r.getDisplayErrorProps=r.getDisplayErrorProps.bind(r),r.onRetry=r.onRetry.bind(r),r.defaultEditorProps=r.getDefaultEditorProps(),r}return Object(o.__extends)(e,t),e.prototype.getDefaultEditorProps=function(t){var e=this.props.componentTreeId.renderContextType,n=Object(ht.n)(this.props.postDisplayMode===x.a.Resolved,!!this.props.cardSelected,t);return Object(o.__assign)(Object(o.__assign)({id:$.H({id:this.props.id,renderContextType:e}),isDraftEmpty:void 0,componentRef:this.editorComponentRef},this.props.mentionableEditorProps),{accessibilityLabel:J.k(this.props.localizationAPI),accessibilityDescribedBy:$.u({id:this.props.id,renderContextType:e}),displayMode:U.ReadOnly,defaultValue:this.props.commentBody,scrollingContainerId:this.props.scrollingContainerId,supportsAtMentions:this.props.supportsAtMentions,richTextCapabilities:this.props.richTextCapabilities,truncationOverlayColor:d.bb()?n:this.props.truncationOverlayColor,dulledAtMentions:this.props.dulledAtMentions,localizationAPI:this.props.localizationAPI,commentId:this.props.id})},e.prototype.editorComponentRef=function(t){this._textEditorRef=t},e.prototype.onMouseOverPost=function(){this.props.collapsed||this.setState({hover:!0})},e.prototype.onMouseLeavePost=function(){this.props.collapsed||this.setState({hover:!1})},e.prototype.UNSAFE_componentWillMount=function(){this.setState({actionBarItems:this.getActionBarItemsAsButtonProps(this.props)})},e.prototype.onContextMenuInteractionHandler=function(t){this.trySelectPost(),t&&Object(D.f)(t.key)===D.b.ArrowDown&&t.preventDefault()},e.prototype.componentDidCatch=function(t){this.onError(t)},e.prototype.UNSAFE_componentWillReceiveProps=function(t){this.props.actionBarItems===t.actionBarItems&&this.props.isTabbable===t.isTabbable||this.setState({actionBarItems:this.getActionBarItemsAsButtonProps(t)})},e.prototype.componentDidUpdate=function(t,e){var n=this.isEditingOrPending(this.props.postDisplayMode);if(this.props.draftId&&!n&&Object(a.i)().assertConditionTag(!1,"PostDisplayMode inconsistent with draft warning state",593802317),this.textEditorRef&&!n&&(t.commentBody!==this.props.commentBody||!this.props.collapsed&&t.collapsed))try{this.textEditorRef.setContents(this.props.commentBody)}catch(t){this.onError(t)}if(t.isTabbable!==this.props.isTabbable&&d.d()){var r=document.getElementById($.J({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}));if(r)for(var o=r.getElementsByClassName(Ke.className),i=0;i<o.length;i++){var s=this.props.isTabbable?"0":"-1";o[i].setAttribute("tabIndex",s)}}Object(a.i)().assertConditionTag(void 0===this.props.draftId||this.isEditingOrPending(this.props.postDisplayMode),"post has draft state and is not in editing mode",593802318)},e.prototype.onRetry=function(){this.props.onClearError(this)},e.prototype.onError=function(t){Object(Se.a)(i.e.reserveTag(594351964))(t),this.props.onError(this)},e.prototype.postFocusHandler=function(t){var e=document.getElementById($.J({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}));e&&t.target===e&&(Object(jr.a)(this.props.postDisplayMode)||this.props.selected||this.props.collapsed||this.props.onSelect(this,!1))},e.prototype.trySelectPost=function(){Object(jr.a)(this.props.postDisplayMode)||this.props.selected||this.props.onSelect(this,!1)},e.prototype.postClickHandler=function(t){this.trySelectPost(),t.stopPropagation()},e.prototype.cancelHandler_deprecated=function(){this.props.onCancel(this)},e.prototype.commitHandler=function(t){this.props.onCommit(this,t)},e.prototype.getBodyStyle=function(){return this.styles.body},e.prototype.renderCommitBar=function(){return s.createElement(Ie,{buttons:this.state.actionBarItems,tooltipDirection:E.a.bottomCenter})},e.prototype.postEditingKeyDownHandler_deprecated=function(t){if(Object(D.f)(t.key)===D.b.Tab){var e=document.getElementById($.a({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType},this.props.actionBarItems.length-1));t.target!==e||t.shiftKey||(this.textEditorRef&&this.textEditorRef.focus(),t.stopPropagation(),t.preventDefault())}},e.prototype.commentEditorKeyDownHandler_deprecated=function(t){if(Object(D.f)(t.key)===D.b.Tab){var e=t.shiftKey?this.props.actionBarItems.length-1:0,n=document.getElementById($.a({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType},e));n&&n.focus(),t.stopPropagation()}},e.prototype.onEditorCommitRequested=function(){this.commitHandler(N.a.KeyboardShortcut)},e.prototype.onEditorEscapeRequested=function(){d.lb()?this.onFocusParent():this.cancelHandler_deprecated()},e.prototype.renderBlueDot=function(){return mr(this.props)?s.createElement(gt,{dotType:this.props.parent?H.RootPost:H.ReplyPost,hasTaskTopper:this.shouldShowHistoryItemTaskHeader(),renderContextType:this.props.componentTreeId.renderContextType}):null},e.prototype.renderCommentEditor=function(t){var e=this.styles.editorRestContainer,n=void 0;return t.displayMode===U.Editing&&(e=this.styles.editorEditingContainer,n=s.createElement("div",{id:$.u({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}),style:{display:"none"}},this.props.localizationAPI.getString(56))),s.createElement("div",{className:e},s.createElement(yr,Object(o.__assign)({onKeyDown:d.vb()?void 0:this.commentEditorKeyDownHandler_deprecated},t,this.props.mentionableEditorProps)),n)},e.prototype.renderHeader=function(){return this.props.parent?null:s.createElement(me,Object(o.__assign)({},this.getRenderableItemHeaderProps()))},e.prototype.renderPersona=function(){return this.props.parent?null:s.createElement(Ce,Object(o.__assign)({},this.getRenderableItemPersonaProps()))},e.prototype.getRootDivProps=function(){return{className:Object(Cr.a)(this.styles.container),tabIndex:this.props.isTabbable?0:-1,onFocus:this.postFocusHandler,onClick:this.postClickHandler,id:$.J({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}),onKeyDown:this.postRootKeyDownHandler}},e.prototype.getRenderableItemPersonaProps=function(){return{authorName:Object(u.g)(this.props.author),resolved:this.props.postDisplayMode===x.a.Resolved,isParent:!!this.props.parent,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL}},e.prototype.getRenderableItemHeaderProps=function(){var t=this.props.parent||this.props.isReadOnly||this.props.restrictActionControls&&!this.props.parent||this.props.postDisplayMode!==x.a.Normal||!(this.state.hover||this.props.selected),e=this.props.usersByReactionType&&this.props.usersByReactionType[Yt.a.Like]?this.props.usersByReactionType[Yt.a.Like]:[],n=this.props.componentTreeId.renderContextType;return{authorLine:Object(u.g)(this.props.author),renderContextType:n,contextMenuProps:t?void 0:{menuItems:[],actionBarItems:this.props.actionBarItems,isTabbable:this.props.isTabbable,parentId:this.props.id,trySelectPost:this.trySelectPost,localizationAPI:this.props.localizationAPI},likeButtonProps:t&&0===e.length?void 0:this.reactionButtonProps(this.props.id,n,this.props.isTabbable,{onReactionPressed:this.props.onReactionUpdated},this.props.usersByReactionType,this.reactionButtonStrings())}},e.prototype.shouldUseFocusStyle=function(){return(d.vb()||!this.isEditingOrPending(this.props.postDisplayMode)&&!this.props.restrictActionControls)&&this.props.selected},e.prototype.getPostWarningProps=function(t,e,n){return{buttons:t,warningMessage:e,id:n,hideCardHeader:this.props.onHideCardHeader}},e.prototype.renderEditState=function(){var t=J.k(this.props.localizationAPI),e=Object(o.__assign)(Object(o.__assign)({},this.defaultEditorProps),{defaultValue:this.props.commentBody,displayMode:U.Editing,initialDraftContent:this.props.savedDraftContent,isDraftEmpty:this.props.isDraftEmpty,isTabbable:this.props.isTabbable,onCommitRequested:this.onEditorCommitRequested,onEscapeRequested:this.onEditorEscapeRequested,onDraftEmptinessChanged:this.onDraftEmptinessChanged,accessibilityLabel:t,onMount:this.onEditorMount});return s.createElement("div",Object(o.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":e.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle(),onKeyDown:d.vb()?void 0:this.postEditingKeyDownHandler_deprecated},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(e),s.createElement("div",{className:this.styles.actionbarEdit},this.renderCommitBar()),this.renderDraftWarning()))},e.prototype.renderLowFidelityWarningState=function(){var t=this.getLowFidelityWarningProps(this.state.actionBarItems,this.props.lowFidelityWarningString,this.props.id,this.props.componentTreeId.renderContextType);return this.renderPostWarning(t,this.props.accessibilityLabel)},e.prototype.renderPostErrorState=function(){var t=this.getDisplayErrorProps(this.state.actionBarItems,this.props.id,this.props.componentTreeId.renderContextType);return this.renderPostWarning(t,this.props.localizationAPI.getString(183))},e.prototype.renderPostWarning=function(t,e){return s.createElement("div",Object(o.__assign)({role:"treeitem","aria-describedby":t.id,"aria-label":e,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),s.createElement(Ir,Object(o.__assign)({},t)))},e.prototype.renderResolvedState=function(){var t=Object(o.__assign)(Object(o.__assign)({},this.defaultEditorProps),{displayMode:U.Disabled,showFullComment:!this.props.collapsed,defaultValue:this.props.commentBody,dulledAtMentions:this.props.dulledAtMentions});return s.createElement("div",Object(o.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":t.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps()),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},s.createElement("div",null," ",this.renderHeader()," "),this.renderHistoryItemContent(),this.renderCommentEditor(t),this.renderTimestamp()))},e.prototype.renderNormalState=function(){var t=Object(o.__assign)(Object(o.__assign)({},this.defaultEditorProps),{displayMode:U.ReadOnly,showFullComment:!this.props.collapsed,defaultValue:this.props.commentBody});return s.createElement("div",Object(o.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-describedby":t.id,"aria-selected":this.props.selected,"aria-level":2},this.getRootDivProps(),{onMouseOver:this.onMouseOverPost,onMouseLeave:this.onMouseLeavePost}),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(t),this.renderTimestamp()))},e.prototype.renderPendingEditState=function(){var t=this,e={id:$.H({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}),isDraftEmpty:void 0,componentRef:function(e){return t._textEditorRef=e},displayMode:U.ReadOnly,showFullComment:!this.props.collapsed,defaultValue:this.props.commentBody,accessibilityLabel:this.props.localizationAPI.getString(88),localizationAPI:this.props.localizationAPI};return s.createElement("div",Object(o.__assign)({style:{position:"relative"}},this.getRootDivProps()),this.renderPersona(),this.renderBlueDot(),s.createElement("div",{className:this.getBodyStyle()},this.renderHeader(),this.renderHistoryItemContent(),this.renderCommentEditor(e),this.renderTimestamp()),s.createElement("div",{className:this.styles.postOverlay},s.createElement(k.a,{delay:ht.f},s.createElement(I.a,{className:this.styles.postSpinner,size:R.a.large}))))},e.prototype.render=function(){return d.bb()?Object(X.a)(this.renderWithContexts,M.a):this.renderWithContexts()},e}(Pr),{componentTreeId:Z.a},Pr.DisplayName),Ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getId=function(){return this.props.id},e.prototype.renderTimestamp=function(t){return s.createElement(xr,{timestamp:this.props.timestamp,id:$.K({id:this.props.id,renderContextType:t}),renderContextType:t})},e.prototype.renderHistoryItemContent=function(t){return s.createElement(Or,{icon:this.props.icon,description:this.props.description,renderContextType:t})},e.DisplayName="TaskHistoryItem",e}(s.PureComponent),Dr=Object(_.c)((function(t){var e;return t?{outline:"none",borderRadius:"1px",boxShadow:"0px 0px 0px 1px "+W.a.FOCUS_BOX,selectors:(e={},e[V.l]={boxShadow:"none",outline:"1px solid "+W.a.FOCUS_BOX},e)}:{outline:"none"}})),Mr={display:"flex",direction:"inherit",overflow:"hidden",flexGrow:1,flexDirection:"row",flexWrap:"nowrap",flexShrink:0,marginLeft:"2px",marginRight:"2px",border:0,position:"relative"},Br=Object(_.c)((function(){return{body:Object(V.eb)({display:"flex",direction:"inherit",flexDirection:"column",flexGrow:1,marginTop:"6px",marginBottom:"2px",marginRight:6,paddingLeft:"3px",position:"relative",overflow:"hidden"}),container:Object(V.eb)(Mr,{selectors:{":focus":Dr(!0)}}),containerNoFocus:Object(V.eb)(Mr,{selectors:{":focus":Dr(!1)}})}})),Nr=Mn(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.itemRef=s.createRef(),r.styles=Br(),r.historyItemClickHandler=r.historyItemClickHandler.bind(r),r.historyItemFocusHandler=r.historyItemFocusHandler.bind(r),r}return Object(o.__extends)(e,t),e.prototype.renderPersona=function(){return s.createElement(Ce,{authorName:Object(u.g)(this.props.author),resolved:this.props.resolved,isParent:!1,authorColor:this.props.authorColor,authorImageURL:this.props.authorImageURL})},e.prototype.renderHeader=function(t){return s.createElement(me,{authorLine:Object(u.g)(this.props.author),renderContextType:t,contextMenuProps:{menuItems:[],actionBarItems:[],isTabbable:!1,parentId:"",trySelectPost:function(){},localizationAPI:void 0}})},e.prototype.historyItemFocusHandler=function(t){var e,n=d.X()?null===(e=this.itemRef)||void 0===e?void 0:e.current:document.getElementById($.J({id:this.props.id,renderContextType:this.props.componentTreeId.renderContextType}));n&&t.target===n&&(this.props.selected||this.props.onSelect(this,!1))},e.prototype.historyItemClickHandler=function(t){this.props.selected||this.props.onSelect(this,!1),t.stopPropagation()},e.prototype.getRootDivProps=function(t,e){return{className:Object(Cr.a)(t),ref:this.itemRef,tabIndex:this.props.selected?0:-1,onFocus:this.historyItemFocusHandler,onClick:this.historyItemClickHandler,id:$.J({id:this.props.id,renderContextType:e})}},e.prototype.shouldUseFocusStyle=function(){return(d.vb()||!this.props.restrictActionControls)&&this.props.selected},e.prototype.render=function(){var t=this.shouldUseFocusStyle()?this.styles.container:this.styles.containerNoFocus,e=this.props.componentTreeId.renderContextType;return s.createElement("div",Object(o.__assign)({role:"treeitem","aria-label":this.props.accessibilityLabel,"aria-level":2,"aria-selected":this.props.selected},this.getRootDivProps(t,e)),this.renderPersona(),s.createElement("div",{className:this.styles.body},this.renderHeader(e),this.renderHistoryItemContent(e),this.props.collapsed?void 0:this.renderTimestamp(e)))},e}(Ar),{componentTreeId:Z.a},Ar.DisplayName),Lr=n(2314),Hr=n(196);function Fr(t,e,n,r,o){if(e.IsCurrentUser)return function(t,e,n,r){var o=165;return n&&(o=166),e&&(o=168),t===O.a.Resolved&&(o=167),r.getString(o)}(t,n,r,o);var i=160;return r&&(i=161),n&&(i=164),t===O.a.Resolved&&(i=163),o.formatString(i,Object(u.g)(e))}var Ur=function(t,e,n,r,o,i,a,s,l,c,p){if(d.W())return function(t,e,n,r,o,i,a,s,l,c,p){if(e===O.a.Draft||e===O.a.DraftPreCommitPending)return o?t.formatString(224,o):t.getString(223);if(e===O.a.Loading)return t.getString(225);var d=[],f=a?rt(a.completion):e===O.a.Resolved;if(a){var h=null==a?void 0:a.assignees[0];h?d.push(t.formatString(f?215:214,Object(u.g)(h))):d.push(t.getString(f?217:216)),d.push(t.formatString(212,r))}else d.push(t.formatString(f?213:211,r));return o&&d.push(t.formatString(218,o)),e!==O.a.Reply&&s!==T.a.InChildPost||d.push(t.getString(222)),1===i?d.push(t.getString(219)):i>1&&d.push(t.formatString(220,String(i))),e!==O.a.CardPostCommitPending&&e!==O.a.ReplyPostCommitPending||d.push(t.getString(221)),l&&(d.push(t.getString(237)),d.push(t.getString(238))),d.join(t.getString(226))}(t,e,0,r,o,i,a,s,l);if(a)return a.assignees&&a.assignees[0]?Fr(e,a.assignees[0],rt(a.completion),n,t):function(t,e,n,r){var o=169;return n&&(o=170),e&&(o=172),t===O.a.Resolved&&(o=171),r.getString(o)}(e,rt(a.completion),n,t);var f=n?30:27;switch(e){case O.a.Draft:f=28;break;case O.a.Resolved:f=29;break;case O.a.Normal:break;default:return}return t.getStringOrUndefined(f)},zr=function(t,e,n,r,o){var i=void 0,a=o.author,s=o.timestamp,l=o.isUnread;switch(i=l?145:21,n&&(i=l?137:25),e){case x.a.Editing:case x.a.EditPreCommitPending:i=23;break;case x.a.Resolved:i=l?136:22;break;case x.a.LowFidelityWarningDelete:case x.a.LowFidelityWarningEdit:return r.getStringOrUndefined(26);case x.a.Normal:break;case x.a.New_nonFluent:default:return}return r.formatString(i,a,s)},Kr=function(t,e,n){return e&&n?t.formatString(232,e,n):(Object(a.i)().assertConditionTag(!1,"Task History Item accessibility label not resolving properly",557056852),t.getString(119))},Vr=(n(501),n(96)),Wr=n(92),qr=n(1208);function Gr(t,e){return!!e&&e.selectedCardId===t&&!Object(v.j)(e.selectionDetails)}function Qr(t,e){return!!e&&e.selectedCardId===t&&Object(v.j)(e.selectionDetails)}function Yr(t,e){return!!e&&Object(v.j)(e.selectionDetails)&&e.selectionDetails.selectedPostId===t}function Jr(t,e,n,r,o){switch(t){case Lr.a.AllCardsTabbable:return!0;case Lr.a.ExpandedCardOrFirstCardTabbable:if(o){var i=Gr(e,o),a=Qr(e,o);return i||r===C.a.Expanded&&a}return n;case Lr.a.ExpandedCardTabbable:return!!o&&r===C.a.Expanded;case Lr.a.SelectedCardTabbable:return!!o&&o.selectedCardId===e}}function $r(t,e,n,r,o,i){if(r===x.a.PendingEdit||r===x.a.PendingDraft)return Yr(e,i);switch(t){case Lr.b.AllPostsTabbable:return!0;case Lr.b.ExpandedCardPostsTabbable:return o===C.a.Expanded;case Lr.b.ExpandedCardRootPostTabbable:var a=Yr(e,i),s=Gr(n||e,i);return r!==x.a.New_nonFluent&&(a||s&&o===C.a.Expanded&&!n);case Lr.b.SelectedPostTabbable:return Yr(e,i)}}function Xr(t,e,n){return C.a.Collapsed===t||void 0!==n&&(n!==T.a.InChildPost||!e)}function Zr(t,e,n,r,l,p,f,h,y,b,C,O,T,P,S,j,_){var w=t.localizationAPI,E=t.selectedState,k=t.isDraftThread,I=t.isCommentsContextReadOnly,R=t.draftState,A=t.cardCollapsedState,D=!1;E&&Object(v.j)(E.selectionDetails)&&(D=E.selectionDetails.selectedPostId===e.commentId);var M=function(t,e,n,r,o,s,l){if(e.pending!==g.a.None)return Object(a.i)().assertConditionTag(e.pending!==g.a.Delete,"Post with PostPendingType.Delete should not attempt to be rendered. Falling back to PendingEdit display mode.",595153811),l?x.a.PendingDraft:x.a.PendingEdit;if(s){if(l)return Object(a.i)().assertConditionTag(!d.i(),"New post should not be rendered while drafting in fluent.",574755652),x.a.New_nonFluent;if(n.postIdToDraftIdMap[t.commentId])return Object(m.i)(n)?x.a.EditPreCommitPending:x.a.Editing}if(r&&Object(v.b)(r)===t.commentId)switch(r.selectionDetails.lowFidelityWarningType){case void 0:break;case v.a.DeleteReply:return x.a.LowFidelityWarningDelete;case v.a.Edit:return x.a.LowFidelityWarningEdit;case v.a.DeleteThread:return d.i()?x.a.LowFidelityWarningDelete:x.a.Normal;default:Object(i.n)(r.selectionDetails)}if(e.displayingErrorUI)return x.a.Error;if(o)return x.a.Resolved;return x.a.Normal}(e,n,R,E,r,y,k),B=!!(e.commentFlags&c.a.ReadOnly||I),N=n.displayDate||"",L=R.postIdToDraftIdMap[e.commentId],H=L?R.drafts[L]:void 0,F="",U="";(d.V()||d.G())&&p&&(F=p.authorColor,U=p.authorImageURL);var z=y&&H?Object(o.__assign)({draftId:L},Object(m.g)(H)):{};return s.createElement(Rr,Object(o.__assign)({},t.postCallbacks,z,{postDisplayMode:M,isReadOnly:B,id:e.commentId,author:e.author,authorColor:F,authorImageURL:U,timestamp:N,commentBody:e.commentBody,parent:""===e.parentId,lowFidelityWarningString:D?J.i(w,E):"",selected:D,isTabbable:$r(l,e.commentId,e.parentId,M,A,E),supportsAtMentions:t.isAtMentionEnabled,localizationAPI:w,actionBarItems:t.getActionBarItems(M,null==E?void 0:E.selectionDetails.lowFidelityWarningType,""===e.parentId,B,e.commentFlags,d.w(),d.i()),accessibilityLabel:zr(0===e.parentId.length,M,B,w,{author:Object(u.g)(e.author),timestamp:N,repliesCount:f,commentBody:e.commentBody,isReplyPending:h,isUnread:d.i()&&!!(e.commentFlags&c.a.IsNew),anchorHintText:e.anchorHintText}),key:e.commentId,mentionableEditorProps:t.mentionableEditorProps,taskHistoryProps:C,accessibilityPositionInSet:b.accessibilityPositionInSet,accessibilitySetSize:b.accessibilitySetSize,isNew:!!(e.commentFlags&c.a.IsNew),scrollingContainerId:O,isCardHovered:t.isCardHighlighted,availableScreenHeight:t.availableScreenHeight,extraPaddingLeft:t.extraPaddingLeft,extraPaddingRight:t.extraPaddingRight,preventDefaultKeyDownBehavior:t.preventDefaultKeyDownBehavior,collapsed:T,restrictActionControls:P,richTextCapabilities:t.richTextCapabilities,usersByReactionType:d.a()?e.usersByReactionType:void 0,truncationOverlayColor:d.bb()?void 0:S,dulledAtMentions:j,isUIAAnnotationPatternEnabled:t.isUIAAnnotationPatternEnabled,isEditable:!(e.commentFlags&c.a.EditRestricted),cardSelected:_}))}function to(t,e,n,r,i,a,l,c,u,p,f){var h=Wr.d(e,t),y="",m="";(d.V()||d.G())&&r&&(y=r.authorColor,m=r.authorImageURL);var b=!1;a&&Object(v.j)(a.selectionDetails)&&(b=a.selectionDetails.selectedPostId===e.records[0].recordId);var g=f.displayDate;return s.createElement(Nr,Object(o.__assign)({},h,{onSelect:n.onSelect,id:e.records[0].recordId,key:e.records[0].recordId,author:e.records[0].user,timestamp:g,selected:b,authorColor:y,authorImageURL:m,resolved:i,collapsed:l,restrictActionControls:c,accessibilitySetSize:u.accessibilitySetSize,accessibilityPositionInSet:u.accessibilityPositionInSet,accessibilityLabel:Kr(t,e.records[0].user.DisplayName,g),preventDefaultKeyDownBehavior:p}))}n.d(e,"d",(function(){return Gr})),n.d(e,"a",(function(){return Qr})),n.d(e,"b",(function(){return Jr})),n.d(e,"e",(function(){return no})),n.d(e,"c",(function(){return ro}));var eo=s.memo((function(t){var e=t.thread,n=t.renderContextType,r=t.cardState,l=t.postOrHistoryRecordStates,b=t.postCallbacks,x=t.cardCallbacks,S=t.localizationAPI,_=t.selectedState,w=t.isolationEdit,E=t.isDraftThread,k=t.isCommentsContextReadOnly,I=t.keyboardingOptions,R=t.personaIconPropertiesMap,A=t.draftState,D=t.cardCollapsedState,M=t.cardRelativeDraftingState,B=t.maximumDimensions,N=t.preventDefaultKeyDownBehavior,L=t.restrictActionControls,H=t.taskState,F=t.isCardTabbable,U=t.tabFocusTrapBehavior,z=Wr.h(e),K=z.commentId,V=M===T.a.InChildPost,W=!!(z.commentFlags&c.a.Resolved),q=l[0].displayDate||"",G=[],Q=function(t,e,n,r,o,a){if(Object(h.N)(e.loadState))return O.a.Loading;switch(e.pending){case y.a.Card:case y.a.Delete:return O.a.CardPostCommitPending;case y.a.Editor:return O.a.ReplyPostCommitPending;case y.a.None:break;default:Object(i.n)(e.pending)}if(a)return Object(m.i)(n)?O.a.DraftPreCommitPending:O.a.Draft;if(r&&r.selectedCardId===t.commentId&&Object(v.d)(r)&&!d.i())return O.a.LowFidelityWarningOnDeleteThread;if(o){if(n.cardIdToDraftIdMap[t.commentId])return Object(m.i)(n)?O.a.ReplyPreCommitPending:O.a.Reply;if(n.pendingDraft&&"REPLY"===n.pendingDraft.sessionType&&n.pendingDraft.threadId===t.commentId)return O.a.ReplySessionRequestPending}if(t.commentFlags&c.a.Resolved)return O.a.Resolved;return O.a.Normal}(z,r,A,_,!d.k()||M===T.a.InCard,E),Y=Gr(z.commentId,_),J=k||!!(z.commentFlags&c.a.ReadOnly),X=Qr(z.commentId,_),Z=Object(qr.a)(Q===O.a.Resolved,Y||X),tt=Object(qr.c)(Q===O.a.Resolved,D===C.a.Collapsed,Y||X),et=e.length-1,nt=!1,rt=!Object(h.N)(r.loadState),ot=n!==P.a.HalfPane&&!d.i();if(rt&&(!E||ot))for(var it=0;it<e.length;it++){var at=e[it],st=l[it];if(Object(Hr.a)(at)){at.commentModel.commentFlags&c.a.LowFidelity&&(nt=!0);var lt=at.commentModel.commentId,ct=Object(h.G)(A)===lt,ut=!!A.postIdToDraftIdMap[lt];if(!st)throw new p.a("Post Or History Record state undefined for comment "+lt,i.e.reserveTag(589103624),-2130957493);if((!w||!V||ut)&&Object(g.b)(st)&&st.pending!==g.a.Delete){var pt=Object(Hr.b)(at)?Wr.d(at.historyItem,S):void 0,dt=Xr(D,ct,M);G.push(Zr(t,at.commentModel,st,W,I.postTabbingMode,!d.V()||d.G()?Object(f.d)(R,at.commentModel.author):void 0,et,r.pending===y.a.Editor,!d.k()||V||E,{accessibilitySetSize:e.length,accessibilityPositionInSet:it+1},pt,B&&B.height?Object($.N)({id:K,renderContextType:n}):Object(gr.b)(n)?Object($.o)():void 0,D===C.a.Collapsed,dt,Z,tt,Y))}}else d.b()&&G.push(to(S,at.historyItem,b,!d.V()||d.G()?Object(f.d)(R,at.historyItem.records[0].user):void 0,W,_,D===C.a.Collapsed,L,{accessibilitySetSize:e.length,accessibilityPositionInSet:it+1},N,st))}return function(t,e,n,r,i,a,l,p,f,y,b,g,C){var O=t.cardState,x=t.cardCallbacks,P=t.localizationAPI,S=t.selectedState,j=t.isAtMentionEnabled,_=t.areTasksEnabled,w=t.draftState,E=t.cardCollapsedState,k=t.cardRelativeDraftingState,I=t.maximumDimensions,R=t.isolationEdit,A=t.richTextCapabilities,D=t.thread,M=Object(h.N)(O.loadState)?O.loadState.initialItemCount:r.length,B=w.cardIdToDraftIdMap[e.commentId],N=B?w.drafts[B]:void 0,L=(!d.k()||k===T.a.InCard)&&N?Object(o.__assign)({draftId:B},Object(m.g)(N)):{};return s.createElement(vr,Object(o.__assign)({},x,L,{cardCollapsedState:E,selected:f,isReadOnly:g,hasSelectedChild:y,hasLowFidelityChild:b,displayMode:i,id:e.commentId,supportsAtMentions:j,isTabbable:t.isCardTabbable,localizationAPI:P,accessibilityLabel:Ur(P,i,g,Object(u.g)(e.author),e.anchorHintText,M-1,n,k,d.ub()&&b&&"win32"===Object(Vr.a)(),p,e.commentBody),accessibilityDescription:"win32"===Object(Vr.a)()?Object(An.d)(Wr.h(D).commentBody):void 0,anchorText:e.anchorHintText,author:e.author,authorColor:a?a.authorColor:"",authorImageURL:a?a.authorImageURL:"",cardRelativeDraftingState:k,supportsTasks:_,taskTopperProps:n,isNewThread:t.isDraftThread,foldableLayoutState:t.foldableLayoutState,accessibilityPositionInSet:t.accessibilityPositionInSet,accessibilitySetSize:t.accessibilitySetSize,accessibilitySetLevel:t.accessibilitySetLevel,maximumDimensions:I,scrollingContainerId:l,itemCount:M,menuItems:t.getCardContextualMenuItems(e.commentFlags,t.isResolveSupported,Object(v.i)(e,S),!!t.taskState,d.w(),d.i()),allowRootEditButton:!(e.commentFlags&c.a.EditRestricted||Object(v.i)(e,S)),mentionEditorProps:t.mentionEditorProps,onCardLayout:t.onCardLayout,timestamp:p,restrictActionControls:t.restrictActionControls,contentBackgroundColor:t.contentBackgroundColor,maxDraftHeight:t.maxDraftHeight,availableScreenHeight:t.availableScreenHeight,extraPaddingLeft:t.extraPaddingLeft,extraPaddingRight:t.extraPaddingRight,preventDefaultKeyDownBehavior:t.preventDefaultKeyDownBehavior,highlightCard:t.isCardHighlighted,hideDraftBox:R||t.isCommentsContextReadOnly,hideHeader:R,disableScroll:R,style:t.cardStyle,richTextCapabilities:A,usersByReactionType:d.a()?e.usersByReactionType:void 0,isUIAAnnotationPatternEnabled:t.isUIAAnnotationPatternEnabled,tabFocusTrapBehavior:C}),r)}(t,z,H?function(t,e,n,r,o,i,s,l){if(!d.b())return;var c=e.completion;r!==(100===c)&&(Object(a.i)().assertConditionTag(!1,"Comment and task resolve state don't match",570826896),c=r?100:0);return{id:t,title:e.title,assignees:e.assignees,completion:c,onResolveTaskCheckboxPressed:i,localizationAPI:n,displayMode:o,preventDefaultKeyDownBehavior:s,isTabbable:l}}(K,H,S,!!(z.commentFlags&c.a.Resolved),J?j.ReadOnly:L?j.Disabled:j.Default,x.onTaskTopperCheckboxPressed,N,F&&!L):void 0,G,Q,d.G()?Object(f.d)(R,z.author):void 0,Object(gr.b)(n)?Object($.o)():void 0,q,Y,X,nt,J,U)}));function no(t){return s.createElement(eo,Object(o.__assign)({},t))}function ro(t,e,n){return t.map((function(t){var r=Wr.e(t);if(Object(b.a)(n))return e[r]||Object(Hr.b)(t)&&n&&n[t.taskId][r];var o=n;return e[r]||o&&o[r]}))}},2363:function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global;e.a=r},2364:function(t,e,n){"use strict";(function(t){var r=n(2269),o=n(2523),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.a.Buffer:void 0,l=(s?s.isBuffer:void 0)||o.a;e.a=l}).call(this,n(1283)(t))},2365:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Styles=void 0;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.combine=function(t,e){if(t||e){var n=t?e?[t,e]:t:e;if(n instanceof Array){for(var r={},o=0;o<n.length;o++){var a=this.combine(n[o]);r=i(i({},r),a)}return void 0===r.marginLeft&&void 0===r.marginRight&&void 0===r.marginTop&&void 0===r.marginBottom||void 0===r.margin||(console.error("Conflicting rules for margin specified."),delete r.margin),void 0===r.paddingLeft&&void 0===r.paddingRight&&void 0===r.paddingTop&&void 0===r.paddingBottom||void 0===r.padding||(console.error("Conflicting rules for padding specified."),delete r.padding),(r.borderWidth||r.borderTopWidth||r.borderRightWidth||r.borderBottomWidth||r.borderLeftWidth)&&(void 0===r.boxSizing&&(r.boxSizing="border-box"),void 0===r.borderColor&&(r.borderColor="black"),void 0===r.borderStyle&&(r.borderStyle="solid")),(r.borderStyle||r.borderTopWidth||r.borderRightWidth||r.borderBottomWidth||r.borderLeftWidth)&&void 0===r.borderWidth&&(void 0===r.borderTopWidth&&(r.borderTopWidth=0),void 0===r.borderRightWidth&&(r.borderRightWidth=0),void 0===r.borderBottomWidth&&(r.borderBottomWidth=0),void 0===r.borderLeftWidth&&(r.borderLeftWidth=0)),r}return n}},e}(l(n(2536)).Styles);e.Styles=c,e.default=new c},2366:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultButtonDefaultProps=void 0,e.DefaultButtonDefaultProps={text:null,onClick:null,disabled:!1}},2367:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2564);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}}),o(n(2565),e)},2368:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2587);Object.defineProperty(e,"View",{enumerable:!0,get:function(){return i.View}}),o(n(2588),e)},2369:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2274);function o(t){return t===r.a.LowFidelityWarningDelete||t===r.a.LowFidelityWarningEdit}},2370:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return b}));var r=n(1),o=n(4),i=n(189),a=n(250),s=n(12),l=n(873),c=n(45),u=n(2274),p=n(76),d=n(96),f=n(2369),h=function(t,e,n,r,o,i,l,p){if(Object(f.a)(e)&&n===c.a.Edit)return[t.proceedItemForLowFidelityWarningEdit,t.cancelLowFidelityWarningEditItem];if(Object(f.a)(e)&&n===c.a.DeleteReply)return[t.deleteItemForLowFidelityWarningDelete,t.cancelLowFidelityWarningDeleteItem];if(e===u.a.Error)return[t.retry,r?t.deleteRootItem:t.deleteItem];if(o||e===u.a.Resolved)return[];if(p&&e===u.a.EditPreCommitPending)return[t.saveItemPending,t.cancelEditItem];if(e===u.a.Editing||e===u.a.EditPreCommitPending)return[t.saveItem,t.cancelEditItem];var h=[];return l&&h.push(t.linkToCommentMenuItem),s.J()||i&a.a.EditRestricted||h.push(t.editItem),i&a.a.DeleteRestricted||r||h.push(t.deleteItem),"ios"===Object(d.a)()&&h.push(t.cancelItem),h};function y(t,e,n,r,i,l,c){var u=[];l&&u.push(t.linkToComment);var p=(e&a.a.Resolved)>0,f=i?t.resolveTask:t.resolveThread,h=i?t.deleteTask:t.deleteThread;return Object(o.i)().assertConditionTag(n||!p,"Card cannot be resolved when resolved is not supported",593764383),p&&n?(u.push(t.reopenThread),e&a.a.DeleteRestricted||u.push(h),u):(c&&!s.J()&&(e&a.a.EditRestricted||r||u.push(t.editRootPost)),l&&n&&u.push(f),e&a.a.DeleteRestricted||u.push(h),l||n&&u.push(f),"ios"===Object(d.a)()&&u.push(t.cancel),u)}function m(t,e){var n={text:t.getString(5),icon:3,onClick:e.onDeleteThread,isDestructive:!0,tooltipText:t.getString(5)},o={text:t.getString(3),icon:5,onClick:e.onResolveThread},i=t.getString(4);return{deleteThread:n,resolveThread:o,reopenThread:{id:Object(p.O)(),text:i,icon:s.i()?16:4,onClick:e.onReopenThread,tooltipText:i},cancel:{text:t.getString(15),icon:0,onClick:function(){},isCancelItem:!0},editRootPost:{text:t.getString(120),onClick:e.onEditRootPost,icon:6,accessibilityLabel:t.getStringOrUndefined(40)},linkToComment:{text:t.getString(207),onClick:e.onPresentLinkToComment,icon:25,tooltipText:t.getString(207)},deleteTask:Object(r.__assign)(Object(r.__assign)({},n),{text:t.getString(206),tooltipText:t.getString(206)}),resolveTask:{text:t.getString(126),icon:5,onClick:e.onResolveThread}}}function b(t,e){var n={text:t.getString(184),onClick:e.onClearError,icon:19,accessibilityLabel:t.getStringOrUndefined(184)},a={text:t.getString(5),onClick:e.onDelete,icon:3,accessibilityLabel:t.getStringOrUndefined(5),isDestructive:!0},c={text:s.i()?t.getString(121):t.getString(2),onClick:e.onDelete,icon:3,accessibilityLabel:t.getStringOrUndefined(41),isDestructive:!0},u={text:s.i()?t.getString(120):t.getString(1),onClick:e.onEdit,icon:6,accessibilityLabel:t.getStringOrUndefined(40)},p={text:t.getString(15),icon:1,onClick:e.onCancel,onKeyDown:function(t,n){n?Object(i.f)(t.key)===i.b.Enter&&e.onCancel(n):Object(o.i)().assertConditionTag(!1,"CommentPostInterface ref is undefined for cancelEditItem.",544477844)},accessibilityLabel:t.getStringOrUndefined(39),isCancelItem:!0,usePrimaryButtonStyling:!1,tooltipText:t.getString(15)},d={text:t.getString(15),onClick:function(){},icon:0,accessibilityLabel:t.getString(15),isCancelItem:!0,tooltipText:t.getString(15)},f={text:t.getString(14),icon:24,onClick:function(t){return e.onCommit(t,l.a.CommitButton)},onKeyDown:function(t,n){n?Object(i.f)(t.key)===i.b.Enter&&e.onCommit(n,l.a.CommitButton):Object(o.i)().assertConditionTag(!1,"CommentPostInterface ref is undefined for saveItem.",544477845)},accessibilityLabel:t.getStringOrUndefined(38),usePrimaryButtonStyling:!0,tooltipText:t.getString(s.m()?173:14)},h=Object(r.__assign)(Object(r.__assign)({},f),{showDelayedSpinner:!0}),y={text:s.i()?t.getString(121):t.getString(2),onClick:e.onLowFidelityWarningConfirm,icon:3,accessibilityLabel:t.getStringOrUndefined(41),isDestructive:!0},m={text:t.getString(15),onClick:e.onLowFidelityWarningCancel,accessibilityLabel:t.getStringOrUndefined(43),icon:0,isCancelItem:!0},b={text:t.getString(37),onClick:e.onLowFidelityWarningConfirm,accessibilityLabel:t.getStringOrUndefined(42),icon:0};return{retry:n,deleteRootItem:a,cancelEditItem:p,cancelItem:d,cancelLowFidelityWarningDeleteItem:m,cancelLowFidelityWarningEditItem:{text:t.getString(15),icon:1,onClick:e.onLowFidelityWarningCancel,accessibilityLabel:t.getStringOrUndefined(39),isCancelItem:!0,tooltipText:t.getString(15)},deleteItem:c,deleteItemForLowFidelityWarningDelete:y,editItem:u,proceedItemForLowFidelityWarningEdit:b,saveItem:f,saveItemPending:h,linkToCommentMenuItem:{text:t.getString(207),onClick:e.onPresentLinkToComment,icon:25}}}},2372:function(t,e,n){"use strict";var r=n(22);var o=function(){this.__data__=[],this.size=0};var i=function(t,e){return t===e||t!=t&&e!=e};var a=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1},s=Array.prototype.splice;var l=function(t){var e=this.__data__,n=a(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)};var c=function(t){var e=this.__data__,n=a(e,t);return n<0?void 0:e[n][1]};var u=function(t){return a(this.__data__,t)>-1};var p=function(t,e){var n=this.__data__,r=a(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=o,d.prototype.delete=l,d.prototype.get=c,d.prototype.has=u,d.prototype.set=p;var f=d;var h=function(){this.__data__=new f,this.size=0};var y=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var m=function(t){return this.__data__.get(t)};var b=function(t){return this.__data__.has(t)},g=n(2269),v=g.a.Symbol,C=Object.prototype,O=C.hasOwnProperty,T=C.toString,x=v?v.toStringTag:void 0;var P=function(t){var e=O.call(t,x),n=t[x];try{t[x]=void 0;var r=!0}catch(t){}var o=T.call(t);return r&&(e?t[x]=n:delete t[x]),o},S=Object.prototype.toString;var j=function(t){return S.call(t)},_=v?v.toStringTag:void 0;var w=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":_&&_ in Object(t)?P(t):j(t)};var E=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var k,I=function(t){if(!E(t))return!1;var e=w(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},R=g.a["__core-js_shared__"],A=(k=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var D=function(t){return!!A&&A in t},M=Function.prototype.toString;var B=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""},N=/^\[object .+?Constructor\]$/,L=Function.prototype,H=Object.prototype,F=L.toString,U=H.hasOwnProperty,z=RegExp("^"+F.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var K=function(t){return!(!E(t)||D(t))&&(I(t)?z:N).test(B(t))};var V=function(t,e){return null==t?void 0:t[e]};var W=function(t,e){var n=V(t,e);return K(n)?n:void 0},q=W(g.a,"Map"),G=W(Object,"create");var Q=function(){this.__data__=G?G(null):{},this.size=0};var Y=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J=Object.prototype.hasOwnProperty;var $=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return J.call(e,t)?e[t]:void 0},X=Object.prototype.hasOwnProperty;var Z=function(t){var e=this.__data__;return G?void 0!==e[t]:X.call(e,t)};var tt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this};function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}et.prototype.clear=Q,et.prototype.delete=Y,et.prototype.get=$,et.prototype.has=Z,et.prototype.set=tt;var nt=et;var rt=function(){this.size=0,this.__data__={hash:new nt,map:new(q||f),string:new nt}};var ot=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var it=function(t,e){var n=t.__data__;return ot(e)?n["string"==typeof e?"string":"hash"]:n.map};var at=function(t){var e=it(this,t).delete(t);return this.size-=e?1:0,e};var st=function(t){return it(this,t).get(t)};var lt=function(t){return it(this,t).has(t)};var ct=function(t,e){var n=it(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ut.prototype.clear=rt,ut.prototype.delete=at,ut.prototype.get=st,ut.prototype.has=lt,ut.prototype.set=ct;var pt=ut;var dt=function(t,e){var n=this.__data__;if(n instanceof f){var r=n.__data__;if(!q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pt(r)}return n.set(t,e),this.size=n.size,this};function ft(t){var e=this.__data__=new f(t);this.size=e.size}ft.prototype.clear=h,ft.prototype.delete=y,ft.prototype.get=m,ft.prototype.has=b,ft.prototype.set=dt;var ht=ft;var yt=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var mt=function(t){return this.__data__.has(t)};function bt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new pt;++e<n;)this.add(t[e])}bt.prototype.add=bt.prototype.push=yt,bt.prototype.has=mt;var gt=bt;var vt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Ct=function(t,e){return t.has(e)};var Ot=function(t,e,n,r,o,i){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(t);if(c&&i.get(e))return c==e;var u=-1,p=!0,d=2&n?new gt:void 0;for(i.set(t,e),i.set(e,t);++u<s;){var f=t[u],h=e[u];if(r)var y=a?r(h,f,u,e,t,i):r(f,h,u,t,e,i);if(void 0!==y){if(y)continue;p=!1;break}if(d){if(!vt(e,(function(t,e){if(!Ct(d,e)&&(f===t||o(f,t,n,r,i)))return d.push(e)}))){p=!1;break}}else if(f!==h&&!o(f,h,n,r,i)){p=!1;break}}return i.delete(t),i.delete(e),p},Tt=g.a.Uint8Array;var xt=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var Pt=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},St=v?v.prototype:void 0,jt=St?St.valueOf:void 0;var _t=function(t,e,n,r,o,a,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new Tt(t),new Tt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=xt;case"[object Set]":var c=1&r;if(l||(l=Pt),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var p=Ot(l(t),l(e),r,o,a,s);return s.delete(t),p;case"[object Symbol]":if(jt)return jt.call(t)==jt.call(e)}return!1};var wt=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},Et=Array.isArray;var kt=function(t,e,n){var r=e(t);return Et(t)?r:wt(r,n(t))};var It=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var Rt=function(){return[]},At=Object.prototype.propertyIsEnumerable,Dt=Object.getOwnPropertySymbols,Mt=Dt?function(t){return null==t?[]:(t=Object(t),It(Dt(t),(function(e){return At.call(t,e)})))}:Rt;var Bt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var Nt=function(t){return null!=t&&"object"==typeof t};var Lt=function(t){return Nt(t)&&"[object Arguments]"==w(t)},Ht=Object.prototype,Ft=Ht.hasOwnProperty,Ut=Ht.propertyIsEnumerable,zt=Lt(function(){return arguments}())?Lt:function(t){return Nt(t)&&Ft.call(t,"callee")&&!Ut.call(t,"callee")},Kt=n(2364),Vt=/^(?:0|[1-9]\d*)$/;var Wt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Vt.test(t))&&t>-1&&t%1==0&&t<e};var qt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Gt={};Gt["[object Float32Array]"]=Gt["[object Float64Array]"]=Gt["[object Int8Array]"]=Gt["[object Int16Array]"]=Gt["[object Int32Array]"]=Gt["[object Uint8Array]"]=Gt["[object Uint8ClampedArray]"]=Gt["[object Uint16Array]"]=Gt["[object Uint32Array]"]=!0,Gt["[object Arguments]"]=Gt["[object Array]"]=Gt["[object ArrayBuffer]"]=Gt["[object Boolean]"]=Gt["[object DataView]"]=Gt["[object Date]"]=Gt["[object Error]"]=Gt["[object Function]"]=Gt["[object Map]"]=Gt["[object Number]"]=Gt["[object Object]"]=Gt["[object RegExp]"]=Gt["[object Set]"]=Gt["[object String]"]=Gt["[object WeakMap]"]=!1;var Qt=function(t){return Nt(t)&&qt(t.length)&&!!Gt[w(t)]};var Yt=function(t){return function(e){return t(e)}},Jt=n(2524),$t=Jt.a&&Jt.a.isTypedArray,Xt=$t?Yt($t):Qt,Zt=Object.prototype.hasOwnProperty;var te=function(t,e){var n=Et(t),r=!n&&zt(t),o=!n&&!r&&Object(Kt.a)(t),i=!n&&!r&&!o&&Xt(t),a=n||r||o||i,s=a?Bt(t.length,String):[],l=s.length;for(var c in t)!e&&!Zt.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Wt(c,l))||s.push(c);return s},ee=Object.prototype;var ne=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ee)};var re=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),oe=Object.prototype.hasOwnProperty;var ie=function(t){if(!ne(t))return re(t);var e=[];for(var n in Object(t))oe.call(t,n)&&"constructor"!=n&&e.push(n);return e};var ae=function(t){return null!=t&&qt(t.length)&&!I(t)};var se=function(t){return ae(t)?te(t):ie(t)};var le=function(t){return kt(t,se,Mt)},ce=Object.prototype.hasOwnProperty;var ue=function(t,e,n,r,o,i){var a=1&n,s=le(t),l=s.length;if(l!=le(e).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in e:ce.call(e,u)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var d=!0;i.set(t,e),i.set(e,t);for(var f=a;++c<l;){var h=t[u=s[c]],y=e[u];if(r)var m=a?r(y,h,u,e,t,i):r(h,y,u,t,e,i);if(!(void 0===m?h===y||o(h,y,n,r,i):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var b=t.constructor,g=e.constructor;b==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof g&&g instanceof g||(d=!1)}return i.delete(t),i.delete(e),d},pe=W(g.a,"DataView"),de=W(g.a,"Promise"),fe=W(g.a,"Set"),he=W(g.a,"WeakMap"),ye=B(pe),me=B(q),be=B(de),ge=B(fe),ve=B(he),Ce=w;(pe&&"[object DataView]"!=Ce(new pe(new ArrayBuffer(1)))||q&&"[object Map]"!=Ce(new q)||de&&"[object Promise]"!=Ce(de.resolve())||fe&&"[object Set]"!=Ce(new fe)||he&&"[object WeakMap]"!=Ce(new he))&&(Ce=function(t){var e=w(t),n="[object Object]"==e?t.constructor:void 0,r=n?B(n):"";if(r)switch(r){case ye:return"[object DataView]";case me:return"[object Map]";case be:return"[object Promise]";case ge:return"[object Set]";case ve:return"[object WeakMap]"}return e});var Oe=Ce,Te=Object.prototype.hasOwnProperty;var xe=function(t,e,n,r,o,i){var a=Et(t),s=Et(e),l=a?"[object Array]":Oe(t),c=s?"[object Array]":Oe(e),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),p="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d=l==c;if(d&&Object(Kt.a)(t)){if(!Object(Kt.a)(e))return!1;a=!0,u=!1}if(d&&!u)return i||(i=new ht),a||Xt(t)?Ot(t,e,n,r,o,i):_t(t,e,l,n,r,o,i);if(!(1&n)){var f=u&&Te.call(t,"__wrapped__"),h=p&&Te.call(e,"__wrapped__");if(f||h){var y=f?t.value():t,m=h?e.value():e;return i||(i=new ht),o(y,m,n,r,i)}}return!!d&&(i||(i=new ht),ue(t,e,n,r,o,i))};var Pe=function t(e,n,r,o,i){return e===n||(null==e||null==n||!Nt(e)&&!Nt(n)?e!=e&&n!=n:xe(e,n,r,o,t,i))};var Se=function(t,e){return Pe(t,e)},je=n(102),_e=n(27),we=n(1025),Ee=n(822),ke=n(92),Ie=n(277),Re=n(10),Ae=n(288);function De(){return Me||(Me=Object(je.b)(je.c,Se)),Me}n.d(e,"b",(function(){return Le})),n.d(e,"i",(function(){return He})),n.d(e,"k",(function(){return Fe})),n.d(e,"a",(function(){return Ue})),n.d(e,"c",(function(){return ze})),n.d(e,"e",(function(){return Ke})),n.d(e,"n",(function(){return Ve})),n.d(e,"m",(function(){return We})),n.d(e,"f",(function(){return qe})),n.d(e,"h",(function(){return Qe})),n.d(e,"d",(function(){return Ye})),n.d(e,"o",(function(){return Je})),n.d(e,"l",(function(){return $e})),n.d(e,"j",(function(){return Xe})),n.d(e,"g",(function(){return Ze}));var Me=void 0,Be=function(t,e){var n,r;return null!==(r=null===(n=e.resource)||void 0===n?void 0:n.id)&&void 0!==r?r:""},Ne=function(t,e){return Object(_e.b)(e.componentTree)},Le=function(){return Object(je.a)([Be,Re.c],(function(t,e){return e[t]}))},He=function(){return Object(je.a)([Be,Re.k],(function(t,e){return e===t}))},Fe=function(){return De()([Be,Re.q],(function(t,e){return(null==e?void 0:e.selectedCardId)===t?e:void 0}))},Ue=function(){return Object(je.a)([Be,Ne,Re.h],(function(t,e,n){return Object(we.a)(t,e,n)}))},ze=function(){return Object(je.a)([Be,Re.d,Re.c],(function(t,e,n){return Object(Ee.c)(t,e,n)}))},Ke=function(){return Object(je.a)([Be,Re.h],(function(t,e){return e.drafts[t]}))},Ve=function(t,e,n){return Object(je.a)([Be,Re.d,n,t,e],(function(t,e,n,r,o){return Object(Ee.b)(t,e,n,r,o)}))},We=function(t){return De()([t,Re.p],(function(t,e){return t.thread.reduce((function(t,n){return t[n.commentId]=e[n.commentId],t}),{})}))},qe=function(t){return De()([t,Ae.a],(function(t,e){var n={};return t&&(Object(Ie.a)(n)&&Object(Ie.a)(e)?n[t.id]=e[t.id]:t.history.forEach((function(t){t.records.forEach((function(t){n[t.recordId]=e[t.recordId]}))}))),n}))},Ge=function(t){return t.commentState.commentData[0]?t.commentState.commentData[0].commentId:void 0},Qe=function(t){return Object(je.a)([Be,Ge,Re.j,t],(function(t,e,n,r){return n?t===e:!!r.draftThreadState}))},Ye=function(t,e){return Object(je.a)([Be,t,Re.h,Ne,e],(function(t,e,n,r,o){return Object(Ee.a)(t,e,n,r,o)}))},Je=function(t){return Object(je.a)([t],(function(t){return Object(r.g)(t)}))},$e=function(){return Object(je.a)([Be,Ae.b],(function(t,e){return e[t]}))},Xe=function(t,e){return De()([t,e],(function(t,e){return Object(ke.k)(t.thread,e)}))},Ze=function(){return Object(je.a)([Be,Re.h],(function(t,e){return e.cardIdToDraftIdMap[t]===t}))}},2374:function(t,e,n){"use strict";var r=n(990),o=n(85),i=n(10),a=n(63),s=n(288),l=n(617),c=n(1),u=n(6),p=n(82),d=n(4),f=n(479),h=n(1204),y=n(299),m=n(946),b=n(1105),g=n(1202),v=n(70),C=n(280),O=n(189),T=n(0),x=n(1038),P=n(141),S=n(143),j=n(171),_=n(663),w=n(1851),E=n(12),k=n(464),I=n(14),R=n(168),A=n(369),D=n(125),M=n(176),B=n(939),N=n(106),L=n(62),H=n(1123),F=n(23),U=n(44),z=n(409),K=n(508),V=n(48),W=n(256),q=n(277),G=n(2375),Q=n(375),Y=n(179),J=n(20),$=n(27),X=n(406),Z=n(1025),tt=n(218),et=n(1124),nt=n(501),rt=n(2320),ot=n(76),it=n(376),at=n(2271),st=n(96),lt=n(92),ct=n(2370);function ut(t){if(t.topVisibleThread&&Object($.b)(t.componentTree)!==J.a.HalfPane&&!t.selectedCommentInfo)return t.topVisibleThread.cardId}var pt=function(t){function e(e){var n,r=t.call(this,e)||this;r.memoGetActionBarItems=Object(p.j)(ct.a,20,(function(){Object(d.i)().assertConditionTag(!1,"Cache invalidated, memoization or parameters configured incorrectly?",557875362)})),r.memoGetCardContextualMenuItems=Object(p.j)(ct.c,20,(function(){Object(d.i)().assertConditionTag(!1,"Cache invalidated, memoization or parameters configured incorrectly?",557875363)})),r.initialAtMentionCapability=new p.b,r.onCommentInterruptableCommand=function(t){var e;switch(t.type){case"DiscardDraft":var n=void 0;if(t.mode===B.a.Dialog){var o=Object(et.a)(r.props.draftState,Object($.b)(r.props.componentTree));n=r.getOnWillDiscardCallback(o);var i=Object(it.b)(!0,Object($.b)(r.props.componentTree),null===(e=r.props.selectedCommentInfo)||void 0===e?void 0:e.selectedComment,r.props.createdCommentLie,r.props.selectedThreadIdBeforeCommentSession);return r.props.discardDraftAsync({renderContextType:Object($.b)(r.props.componentTree),telemetryVisitor:r.props.telemetryVisitor,trackback:u.e.reserveTag(587605836)},U.a.Canvas,i,n)}return Promise.resolve(S.a.Unhandled);case"BringThreadIntoView":return Object($.b)(r.props.componentTree)!==J.a.FullPane?Promise.resolve(S.a.Unhandled):r.scrollToThreadById(t.threadId)?Promise.resolve(S.a.Handled):Promise.resolve(S.a.Failed);default:return Object(d.i)().assertConditionTag(!1,"Unknown type of CommentInterruptableCommand",593826210),Promise.resolve(S.a.Unhandled)}},r.onCardPost=function(t,e){var n,o=(null===(n=r.props.createdCommentLie)||void 0===n?void 0:n.newComment.commentId)===t.getId(),i=t.getId(),a=r.props.draftState.cardIdToDraftIdMap[i],s=r.props.draftState.drafts[a],l=o?{type:"CREATE"}:{type:"REPLY",parentId:t.getId()};tt.c({trackback:u.e.reserveTag(593622435),commentCardRef:t,draftState:r.props.draftState,areMentionsEnabled:Object(I.g)(r.props.modelCapabilities,r.props.atMentionState_deprecated)===P.b.Enabled,session:l,componentTree:r.props.componentTree,dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,commitSource:e,selectedTaskAssignee:s&&s.selectedTaskAssignee}).catch(Object(L.a)(u.e.reserveTag(593622464)))},r.cardOnCollapseCallback=function(t){tt.b({trackback:u.e.reserveTag(562918286),commentCardRef:t,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.cardOnSelectCallback=function(t){tt.n({trackback:u.e.reserveTag(571281794),commentCardRef:t,dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,componentTree:r.props.componentTree,options:{selectActionType:F.SelectActionType.SelectCard}})},r.cardOnSelectExpandCallback=function(t,e,n){var o=Object(Z.a)(t.getId(),Object($.b)(r.props.componentTree),r.props.draftState);tt.n({trackback:u.e.reserveTag(571281793),commentCardRef:t,dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,componentTree:r.props.componentTree,options:{selectActionType:F.SelectActionType.ExpandCard,relativeDraftingState:o,draftState:r.props.draftState,shouldFocusAfter:n,selectRootPost:e}})},r.cardOnFocusCallback=function(t){var e;tt.i({trackback:u.e.reserveTag(571340119),commentCardRef:t,dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,componentTree:r.props.componentTree,options:{selectActionType:F.SelectActionType.Polite},focusManager:r.props.focusManager,isDraftThread:(null===(e=r.props.createdCommentLie)||void 0===e?void 0:e.draftId)===t.getId()})},r.cardOnBeginReplyCallback=function(t){tt.a({trackback:u.e.reserveTag(593826249),threadId:t.getId(),renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.cardOnResolveThread=function(t){tt.m({componentTree:r.props.componentTree,focusManager:r.props.focusManager,trackback:u.e.reserveTag(593826250),id:t,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,isTask:!!r.props.tasks[t]})},r.cardOnReopenThread=function(t){tt.l({trackback:u.e.reserveTag(593826251),id:t,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,isTask:!!r.props.tasks[t]})},r.cardOnDelete=function(t){var e;tt.d({trackback:u.e.reserveTag(593826252),id:t,data:r.props.dataItems,selectedComment:null===(e=r.props.selectedCommentInfo)||void 0===e?void 0:e.selectedComment,componentTree:r.props.componentTree,invokeModalDialog:r.invokeModalDialog,dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,focusManager:r.props.focusManager,isTask:!!r.props.tasks[t],threadIndex:lt.f(r.state.allRenderableItemThreads,t),shouldCheckForLowFidelity:r.shouldCheckForLowFidelityOnCardDelete()})},r.cardOnDraftingInputSizeChange=function(t,e){var n,o=null===(n=r.props.createdCommentLie)||void 0===n?void 0:n.draftId;tt.f({trackback:u.e.reserveTag(593826253),focusManager:r.props.focusManager,componentTree:r.props.componentTree,cardId:t.getId(),isCardLie:t.getId()===o,newHeight:e,renderContextType:Object($.b)(r.props.componentTree),selectedComment:r.tryGetSelectedComment(),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.cardOnDraftEmptinessChanged=function(t,e){tt.q({trackback:u.e.reserveTag(592213848),contentId:t.getId(),isEmpty:e,renderContextType:Object($.b)(r.props.componentTree),draftIdMap:r.props.draftState.cardIdToDraftIdMap,actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.cardOnEditorFocusLost=function(t){tt.g({trackback:u.e.reserveTag(592065735),id:t.getId(),draftState:r.props.draftState,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.cardOnSaveDraft=function(t,e){tt.y({trackback:u.e.reserveTag(593826255),id:t,editor:e,renderContextType:Object($.b)(r.props.componentTree),draftIdMap:r.props.draftState.cardIdToDraftIdMap,draftMap:r.props.draftState.drafts,actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onCardCancel=function(t){var e,n,o=(null===(e=r.props.createdCommentLie)||void 0===e?void 0:e.newComment.commentId)===t.getId(),i=Object(it.b)(!0,Object($.b)(r.props.componentTree),null===(n=r.props.selectedCommentInfo)||void 0===n?void 0:n.selectedComment,r.props.createdCommentLie,r.props.selectedThreadIdBeforeCommentSession);tt.e({trackback:u.e.reserveTag(592840780),showDiscardDialog:!1,invokeModalDialog:r.invokeModalDialog,componentTree:r.props.componentTree,dispatchProps:r.props,closeOnDiscard:o&&i,cardId:t.getId(),draftState:r.props.draftState,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,focusManager:r.props.focusManager,lieIndex:lt.f(r.state.allRenderableItemThreads,t.getId())})},r.onTaskTopperCheckboxPressed=function(t){if(E.b()){var e=r.props.tasks[t];e&&tt.o({componentTree:r.props.componentTree,focusManager:r.props.focusManager,trackback:u.e.reserveTag(593826258),id:e.commentId,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI})}},r.cardOnHighlight=function(t,e){tt.j({trackback:u.e.reserveTag(593826259),commentCardRef:t,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,shouldHighlightCard:e})},r.onPostDelete=function(t){tt.E({trackback:u.e.reserveTag(593826312),id:t,data:r.props.dataItems,selectedComment:r.tryGetSelectedComment(),renderContextType:Object($.b)(r.props.componentTree),actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI})},r.onPostEdit=function(t){tt.F({trackback:u.e.reserveTag(593826316),id:t,data:r.props.dataItems,selectedComment:r.tryGetSelectedComment(),renderContextType:Object($.b)(r.props.componentTree),actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onPostReactionUpdated=function(t,e,n){tt.x(u.e.reserveTag(587994051),t,e,Object($.b)(r.props.componentTree),r.props,r.props.telemetryVisitor,n)},r.onPostCommit=function(t,e){tt.D({trackback:u.e.reserveTag(593826260),id:t.getId(),data:r.props.dataItems,draftState:r.props.draftState,contentPromise:t.getContentsAsync(),atMentionsEnabled:Object(I.g)(r.props.modelCapabilities,r.props.atMentionState_deprecated)===P.b.Enabled,componentTree:r.props.componentTree,actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI,commitSource:e}).catch(Object(L.a)(u.e.reserveTag(593826261)))},r.onPostCancel=function(t){var e,n=Object(it.b)(!0,Object($.b)(r.props.componentTree),null===(e=r.props.selectedCommentInfo)||void 0===e?void 0:e.selectedComment,r.props.createdCommentLie,r.props.selectedThreadIdBeforeCommentSession);tt.A({trackback:u.e.reserveTag(593826263),commentId:t.getId(),setContents:t.setContents.bind(t),data:r.props.dataItems,draftState:r.props.draftState,shouldClosePaneAfterDiscardDraft:n,onWillDiscardCallback:void 0,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,localizationAPI:r.props.localizationAPI})},r.onPostDraftEmptinessChanged=function(t,e){tt.q({trackback:u.e.reserveTag(592041678),contentId:t.getId(),isEmpty:e,renderContextType:Object($.b)(r.props.componentTree),draftIdMap:r.props.draftState.postIdToDraftIdMap,actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onPostSaveDraft=function(t,e){tt.y({trackback:u.e.reserveTag(592720405),id:t,editor:e,renderContextType:Object($.b)(r.props.componentTree),draftIdMap:r.props.draftState.postIdToDraftIdMap,draftMap:r.props.draftState.drafts,actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onPresentLinkToComment=function(t){tt.w(u.e.reserveTag(578852484),t,Object($.b)(r.props.componentTree),r.props,r.props.telemetryVisitor)},r.onRenderableItemSelect=function(t,e){var n=r.getRenderableItemFromRef(t);n?tt.K({trackback:u.e.reserveTag(593826266),renderableItem:n,selectedComment:r.tryGetSelectedComment(),cardCollapsedState:Object(X.a)(lt.i(n),r.props.expandedComments,Object($.b)(r.props.componentTree)),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,componentTree:r.props.componentTree,shouldFocusAfter:e,draftState_deprecated:r.props.draftState}).catch(Object(L.a)(u.e.reserveTag(590123737))):Object(d.i)().assertConditionTag(!1,"Selection coming from an unknown post?",593826265)},r.onPostCollapseParent=function(t){var e=r.getRenderableItemFromRef(t);e?tt.C(u.e.reserveTag(589940445),e,r.props,r.props.telemetryVisitor,r.props.componentTree):Object(d.i)().assertConditionTag(!1,"Collapse from an unknown post?",589940444)},r.onPostFocusParent=function(t){var e=r.getRenderableItemFromRef(t);e?tt.I(e,r.props.componentTree,r.props.focusManager,r.props.draftState):Object(d.i)().assertConditionTag(!1,"Focus parent from unknown post?",545867681)},r.getThreadedRenderableIds=Object(p.l)((function(t){return t.map((function(t){return t.map(lt.e)}))}),(function(){return[r.state.allRenderableItemThreads]})),r.getThreadPostOrHistoryRecordStates=(n=Object(p.h)(),Object(q.a)(r.props.historyRecordViewStates)?function(){return n(r.getThreadedRenderableIds(),Object(c.__assign)(Object(c.__assign)({},r.props.postViewStates),r.props.historyRecordViewStates),(function(t,e,n){var o;if(n[e])return n[e];var i=null===(o=r.props.tasks[t])||void 0===o?void 0:o.id;if(i)return n[i][e];Object(d.i)().assertConditionTag(!1,"Renderable item does not have a display date.",542736604)}))}:function(){return n(r.getThreadedRenderableIds(),Object(c.__assign)(Object(c.__assign)({},r.props.postViewStates),r.props.historyRecordViewStates))}),r.getListItemKey=function(t){var e=lt.h(t).commentId,n=r.props.cardViewStates[e];return n&&n.alternateId||e},r.getHostableComponentInstanceId=function(t,e,n){return"cardInPane_"+Object(ot.h)({id:t,renderContextType:e},n)},r.onSelectedTaskAssigneeUpdated=function(t){E.b()?tt.z({trackback:u.e.reserveTag(593826304),renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor,selectedAssignee:t}):Object(d.i)().assertConditionTag(!1,"Selected Task Assignee Updated action type is not supported",593826305)},r.getRenderableItemActionBarItems=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!r.renderableItemActionBarItems||void 0===r.memoGetActionBarItems)throw new u.d("Function should not be called when DeleteRestricted gate is off.",u.e.reserveTag(557601691));return r.memoGetActionBarItems.apply(r,Object(c.__spread)([r.renderableItemActionBarItems],t))},r.getCardContextualMenuItems=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!r.cardContextMenuItems||void 0===r.memoGetCardContextualMenuItems)throw new u.d("Function should not be called when DeleteRestricted gate is off.",u.e.reserveTag(557601692));return r.memoGetCardContextualMenuItems.apply(r,Object(c.__spread)([r.cardContextMenuItems],t))},r.onCardMounted=function(t){tt.k({cardProps:t,componentTree:r.props.componentTree,focusManager:r.props.focusManager})},r.onCardEditorMounted=function(t){tt.h({cardId:t,componentTree:r.props.componentTree,focusManager:r.props.focusManager})},r.onPostMounted=function(t){tt.J({postId:t,componentTree:r.props.componentTree,focusManager:r.props.focusManager})},r.onPostEditorMounted=function(t){tt.G({postId:t,componentTree:r.props.componentTree,focusManager:r.props.focusManager})},r.notifyRenderedOnce=Object(p.o)((function(){r.props.onInitialRender({renderContextType:Object($.b)(r.props.componentTree)})})),r.onPostError=function(t){tt.H({trackback:u.e.reserveTag(593764372),id:t.getId(),data:r.props.dataItems,renderContextType:Object($.b)(r.props.componentTree),actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onClearPostError=function(t){tt.B({trackback:u.e.reserveTag(593764373),id:t.getId(),data:r.props.dataItems,renderContextType:Object($.b)(r.props.componentTree),actionDispatchers:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onLowFidelityWarningCancel=function(){var t;tt.s({selectedState:null===(t=r.props.selectedCommentInfo)||void 0===t?void 0:t.selectedComment,renderContextType:Object($.b)(r.props.componentTree),dispatchProps:r.props,telemetryVisitor:r.props.telemetryVisitor})},r.onLowFidelityWarningConfirm=function(){var t;tt.t({selectedState:null===(t=r.props.selectedCommentInfo)||void 0===t?void 0:t.selectedComment,onCardDelete:r.cardOnDelete,onPostDelete:r.onPostDelete,onPostEdit:r.onPostEdit})},r.commentEditorOnKeyDown=function(t){r.commentEditorKeyDownHandler.onKeyDown(t)},r.startNewCommentSession=function(){r.props.discardDraftAndStartNewCommentSession({renderContextType:Object($.b)(r.props.componentTree),trackback:u.e.reserveTag(593826323),telemetryVisitor:r.props.telemetryVisitor})},r.closePane=r.closePane.bind(r),r.onCommentUIAction=r.onCommentUIAction.bind(r),r.onGetUserContacts=r.onGetUserContacts.bind(r),r.onMentionCreated=r.onMentionCreated.bind(r),r.onMentioneesStillInDraftUpdated=r.onMentioneesStillInDraftUpdated.bind(r),r.renderCommentThread=r.renderCommentThread.bind(r),r.onGhostCommentClicked=r.onGhostCommentClicked.bind(r),r.invokeModalDialog=r.invokeModalDialog.bind(r),r.deleteThreadConfirmCallback=r.deleteThreadConfirmCallback.bind(r),r.getOnWillDiscardCallback=r.getOnWillDiscardCallback.bind(r),r.isReadyToRender=r.isReadyToRender.bind(r),r.commentPostCallbackProps={onDelete:r.onPostDelete,onEdit:r.onPostEdit,onCommit:r.onPostCommit,onCancel:r.onPostCancel,onSelect:r.onRenderableItemSelect,onDraftEmptinessChanged:r.onPostDraftEmptinessChanged,onSaveDraft:r.onPostSaveDraft,onLowFidelityWarningConfirm:r.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:r.onLowFidelityWarningCancel,onPostMounted:r.onPostMounted,onPostEditorMounted:r.onPostEditorMounted,onError:r.onPostError,onClearError:r.onClearPostError,commentEditorAdditionalKeyDownHandler:r.commentEditorOnKeyDown,onCollapseParent:r.onPostCollapseParent,onFocusParent:r.onPostFocusParent,onReactionUpdated:r.onPostReactionUpdated,onPresentLinkToComment:r.onPresentLinkToComment},r.commentCardCallbackProps={onEditorPress:r.cardOnBeginReplyCallback,onCardCollapse:r.cardOnCollapseCallback,onCardSelect:r.cardOnSelectCallback,onCardSelectExpand:r.cardOnSelectExpandCallback,onCardFocus:r.cardOnFocusCallback,onCardHighlightChange:r.cardOnHighlight,onDraftingInputSizeChange:r.cardOnDraftingInputSizeChange,onDraftEmptinessChanged:r.cardOnDraftEmptinessChanged,onEditorBlur:r.cardOnEditorFocusLost,onCancel:r.onCardCancel,onPost:r.onCardPost,onSaveDraft:r.cardOnSaveDraft,onSelectedTaskAssigneeUpdated:r.onSelectedTaskAssigneeUpdated,onCardMounted:r.onCardMounted,onCardEditorMounted:r.onCardEditorMounted,onCardRendered:r.notifyRenderedOnce,onLowFidelityWarningCancel:r.onLowFidelityWarningCancel,onLowFidelityWarningConfirm:r.onLowFidelityWarningConfirm,onTaskTopperCheckboxPressed:r.onTaskTopperCheckboxPressed,commentEditorAdditionalKeyDownHandler:r.commentEditorOnKeyDown,onReactionUpdated:r.onPostReactionUpdated,onEditRootPost:r.onPostEdit},r.cardContextualMenuCallbackProps={onReopenThread:r.cardOnReopenThread,onResolveThread:r.cardOnResolveThread,onDeleteThread:r.cardOnDelete,onEditRootPost:r.onPostEdit,onPresentLinkToComment:r.onPresentLinkToComment},r.renderableItemActionBarItems=ct.d(r.props.localizationAPI,r.commentPostCallbackProps),r.cardContextMenuItems=ct.b(r.props.localizationAPI,r.cardContextualMenuCallbackProps),r.paneContainerKeyDownHandler=r.props.focusManager.paneContainerKeyDown((function(){return r.props.componentTree})),r.commentContentsKeyDownHandler=r.props.focusManager.commentContentsKeyDown((function(){return r.props.componentTree}),(function(){return r.props.dataItems})),r.commentEditorKeyDownHandler=r.props.focusManager.commentEditorKeyDown((function(){return r.props.componentTree}));var o=Object(d.i)().createActivityObject("BaseCommentPaneConstruction",r.props.telemetryVisitor,d.a.None,d.b.NecessaryServiceDataEvent);return o.addDataField("PaneCorrelationId",r.props.correlationId,d.d.SystemMetadata),o.addDataField("SharedCommentsVersion",H.a,d.d.SystemMetadata),o.addDataField("RenderContextType",Object($.b)(r.props.componentTree),d.d.SystemMetadata),o.successTag(593826206),r}return Object(c.__extends)(e,t),e.prototype.onCommentUIAction=function(t){return t.actionType===M.a.BackKeyPressed?(Object(d.i)().assertConditionTag(Object(N.d)(t.actionBehavior),"This action type does not support toggled/enabled status",593826207),Object(N.d)(t.actionBehavior)&&this.onBackKeyPressed(),N.a.Success):N.a.NotHandled},e.prototype.getOnWillDiscardCallback=function(t){var e=this;return Object(z.a)(this.props.draftState)===Y.a.CannotAutoDiscard?function(n,r){return e.invokeModalDialog(t,n,r)}:void 0},e.prototype.updateDraftRenderLocks=function(t){0!==Object(V.e)(this.props.draftState)&&this.props.updateRenderLocksForAllDrafts({renderContextType:Object($.b)(this.props.componentTree),trackback:u.e.reserveTag(593826211),telemetryVisitor:this.props.telemetryVisitor},t)},e.prototype.componentDidMount=function(){var t,e;E.Q()&&(null===(e=(t=this.props).componentRef)||void 0===e||e.call(t,this)),this.props.registerComponentUIActionListener(this.onCommentUIAction),this.props.registerComponentInterruptableCommandListener(this.onCommentInterruptableCommand),Object(I.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated)!==P.b.Unknown&&this.processAtMentionCapabilityState(),this.updateDraftRenderLocks(!0),E.q()&&this.props.lastContextChangeIncrement>0&&this.onContextChanged()},e.prototype.componentWillUnmount=function(){this.props.unregisterComponentUIActionListener(this.onCommentUIAction),this.props.unregisterComponentInterruptableCommandListener(this.onCommentInterruptableCommand)},e.prototype.componentDidUpdate=function(t,e){var n,r;if(this.props.lastContextChangeIncrement!==t.lastContextChangeIncrement&&this.onContextChanged(),Object(I.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated)!==Object(I.g)(t.modelCapabilities,t.atMentionState_deprecated)&&this.processAtMentionCapabilityState(),this.sendReadyToRenderNotification(t),this.props.draftState!==t.draftState)try{for(var o=Object(c.__values)(Object(V.f)(this.props.draftState)),i=o.next();!i.done;i=o.next()){var a=i.value;if(E.db()?this.props.draftState.drafts[a].renderContextType!==Object($.b)(this.props.componentTree)&&(void 0===t.draftState.drafts[a]||t.draftState.drafts[a].renderContextType!==this.props.draftState.drafts[a].renderContextType):void 0===t.draftState.drafts[a]||t.draftState.drafts[a].renderContextType!==this.props.draftState.drafts[a].renderContextType&&(!E.hb()||this.props.draftState.drafts[a].renderContextType!==Object($.b)(this.props.componentTree))){this.updateDraftRenderLocks(!0);break}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.props.focusManager.commentPanePropsUpdated(this.props.componentTree,t,this.props)},e.prototype.focus=function(){this.props.focusManager.focusCommentPaneCommand(this.props.componentTree)},e.prototype.getInstanceId=function(){var t;return null!==(t=this.props.componentInstanceId)&&void 0!==t?t:"CommentPane"},e.prototype.getRenderableItemFromRef=function(t){var e,n=null===(e=this.props.createdCommentLie)||void 0===e?void 0:e.draftId,r=t.getId();return r===n?this.props.createdCommentLie&&{commentModel:this.props.createdCommentLie.newComment}:this.props.dataItems.find((function(t){return lt.e(t)===r}))},e.prototype.closePane=function(){tt.p({ownProps:this.props,dispatchProps:this.props,componentTree:this.props.componentTree,draftState:this.props.draftState,invokeModalDialog:this.invokeModalDialog})},e.prototype.renderCommentThread=function(t,e,n){var r;void 0===n&&(n=rt.e);var o=lt.h(e),i=!(!this.props.createdCommentLie||o.commentId!==this.props.createdCommentLie.newComment.commentId);if(E.nb())return T.createElement(G.a,{commentAPI:this.props.commentAPI,componentTree:this.props.componentTree,focusManager:this.props.focusManager,localizationAPI:this.props.localizationAPI,peopleAPI:this.props.peopleAPI,resource:{id:o.commentId},getDiscardDraftCallback:this.getOnWillDiscardCallback,telemetryVisitor:this.props.telemetryVisitor,accessibilityPositionInSet:t+1,accessibilitySetSize:this.state.allRenderableItemThreads.length,onInitialRender:this.props.onInitialRender,correlationId:this.props.correlationId,lppManager:this.props.lppManager,componentInstanceId:this.getHostableComponentInstanceId(o.commentId,Object($.b)(this.props.componentTree),i)});var a=0===this.props.dataItems.length||lt.h(this.props.dataItems).commentId===o.commentId,s=void 0!==this.props.selectedCommentInfo?this.props.selectedCommentInfo.selectedComment:void 0,l=this.getMentionableCommentEditorProps(Object(I.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated),this.props.suggestionsDetails),c=o.commentId,u=Object(V.d)(this.props.draftState),p=null===(r=this.props.tasks[c])||void 0===r?void 0:r.currentState,d=Object($.b)(this.props.componentTree)===J.a.HalfPane&&!!Object(I.G)(this.props.draftState),f=this.props.highlightedCommentId||ut(this.props),h=this.getPinnedCardIndex_deprecated(),y=this.getThreadPostOrHistoryRecordStates()[h&&!E.z()?h:t],m=(null==s?void 0:s.selectedCardId)===c?s:void 0,b=Object(X.a)(o.commentId,this.props.expandedComments,Object($.b)(this.props.componentTree));return n({thread:e,renderContextType:Object($.b)(this.props.componentTree),cardState:this.props.cardViewStates[c],postCallbacks:this.commentPostCallbackProps,mentionableEditorProps:l,cardCallbacks:this.commentCardCallbackProps,localizationAPI:this.props.localizationAPI,getActionBarItems:this.getRenderableItemActionBarItems,selectedState:m,isolationEdit:d,isAtMentionEnabled:!!l,areTasksEnabled:Object(I.c)(this.props.modelCapabilities),isDraftThread:i,foldableLayoutState:this.props.foldableLayoutState,isCommentsContextReadOnly:this.props.readOnly,keyboardingOptions:this.getKeyboardingOptions(),personaIconPropertiesMap:this.props.personaIconPropertiesMap,draftState:this.props.draftState,cardCollapsedState:b,cardRelativeDraftingState:Object(Z.a)(o.commentId,Object($.b)(this.props.componentTree),this.props.draftState),accessibilityPositionInSet:t+1,accessibilitySetSize:this.state.allRenderableItemThreads.length,maximumDimensions:void 0,getCardContextualMenuItems:this.getCardContextualMenuItems,mentionEditorProps:l,availableScreenHeight:this.getAvailableScreenHeight(),extraPaddingLeft:this.getContentExtraPaddingLeft(),extraPaddingRight:this.getContentExtraPaddingRight(),preventDefaultKeyDownBehavior:this.getContentsPreventDefaultKeyDownBehavior(),isCardHighlighted:f===c,contentBackgroundColor:this.getContentBackgroundColor(e.length>1,d),maxDraftHeight:this.getMaxDraftHeight(),restrictActionControls:u,taskState:p,cardStyle:this.getCommentCardStyle(),onCardLayout:this.onCardLayout,isCardTabbable:rt.b(this.getKeyboardingOptions().cardTabbingMode,c,a,b,s),postOrHistoryRecordStates:y,richTextCapabilities:this.props.modelCapabilities.richTextCapabilities,isUIAAnnotationPatternEnabled:this.props.modelCapabilities.UIAAnnotationPattern,isResolveSupported:Object(I.w)(this.props.modelCapabilities,this.props.capabilities_deprecated.resolve),tabFocusTrapBehavior:A.b.Unspecified})},e.prototype.onMentionCreated=function(t){tt.u({failTag:u.e.reserveTag(593826271),successTag:u.e.reserveTag(593826272),person:t,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,renderContextType:Object($.b)(this.props.componentTree),trackback:u.e.reserveTag(593826273)})},e.prototype.onMentioneesStillInDraftUpdated=function(t){tt.v({trackback:u.e.reserveTag(593826275),emailsStillInDraft:t,renderContextType:Object($.b)(this.props.componentTree),dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor})},e.prototype.onBackKeyPressed=function(){var t;if(Object(V.c)(this.props.draftState)){var e=null===(t=this.props.selectedCommentInfo)||void 0===t?void 0:t.selectedComment,n=Object(et.a)(this.props.draftState,Object($.b)(this.props.componentTree)),r=Object(it.b)(!0,Object($.b)(this.props.componentTree),e,this.props.createdCommentLie,this.props.selectedThreadIdBeforeCommentSession),o=Object(I.F)(this.props.draftState),i=Object(I.G)(this.props.draftState);if(o){var a=Object(z.a)(this.props.draftState)===Y.a.CannotAutoDiscard;tt.e({trackback:u.e.reserveTag(592840781),showDiscardDialog:a,invokeModalDialog:this.invokeModalDialog,componentTree:this.props.componentTree,dispatchProps:this.props,closeOnDiscard:r,cardId:o,draftState:this.props.draftState,telemetryVisitor:this.props.telemetryVisitor,localizationAPI:this.props.localizationAPI,focusManager:this.props.focusManager,lieIndex:lt.f(this.state.allRenderableItemThreads,o)})}else i&&tt.A({trackback:u.e.reserveTag(592487364),commentId:i,setContents:void 0,data:this.props.dataItems,draftState:this.props.draftState,shouldClosePaneAfterDiscardDraft:r,onWillDiscardCallback:this.getOnWillDiscardCallback(n),renderContextType:Object($.b)(this.props.componentTree),dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,localizationAPI:this.props.localizationAPI})}else Object($.b)(this.props.componentTree)===J.a.HalfPane&&tt.p({ownProps:this.props,dispatchProps:this.props,componentTree:this.props.componentTree,draftState:this.props.draftState,invokeModalDialog:this.invokeModalDialog})},e.prototype.sendReadyToRenderNotification=function(t){this.props.initializationStatus===Q.a.Initialized&&(Object($.b)(this.props.componentTree)===Object($.b)(t.componentTree)&&this.props.initializationStatus===t.initializationStatus||this.props.readyToRender({renderContextType:Object($.b)(this.props.componentTree),telemetryVisitor:this.props.telemetryVisitor,trackback:u.e.reserveTag(593826313)}))},e.prototype.deleteThreadConfirmCallback=function(){return this.props.selectedCommentInfo?(this.props.requestDeleteThread({renderContextType:Object($.b)(this.props.componentTree),telemetryVisitor:this.props.telemetryVisitor,trackback:u.e.reserveTag(593826314)},this.props.selectedCommentInfo.selectedComment.selectedCardId),S.a.Handled):(Object(d.i)().assertConditionTag(!1,"Selected Comment should not be undefined for DeleteThread",593826315),S.a.Unhandled)},e.prototype.processAtMentionCapabilityState=function(){var t=Object(I.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated);t!==P.b.Unknown&&this.initialAtMentionCapability.set(t),this.onAtMentionCapabilityStateChange()},e.prototype.getUpdatedItemThreads=function(t){var e=Object(nt.b)(this.props.draftState,Object($.b)(this.props.componentTree)),n=Object(nt.b)(t.draftState,Object($.b)(t.componentTree));return this.props.dataItems!==t.dataItems||this.props.createdCommentLie!==t.createdCommentLie||this.props.cardViewStates!==t.cardViewStates||Object($.b)(this.props.componentTree)!==Object($.b)(t.componentTree)||this.props.personaIconPropertiesMap!==t.personaIconPropertiesMap||e!==n?lt.b(t.dataItems,t.cardViewStates,t.createdCommentLie,Object($.b)(t.componentTree)!==J.a.HalfPane,n):this.state.allRenderableItemThreads},e.prototype.getInitialState=function(t){return{allRenderableItemThreads:lt.b(t.dataItems,t.cardViewStates,t.createdCommentLie,Object($.b)(t.componentTree)!==J.a.HalfPane,Object(nt.b)(t.draftState,Object($.b)(t.componentTree))),atMentionState:void 0}},e.prototype.onRequestLoadThreads=function(t){Object(I.K)(this.props.modelCapabilities,this.props.virtualized_deprecated)?this.props.queueLoadThreads({renderContextType:Object($.b)(this.props.componentTree),telemetryVisitor:this.props.telemetryVisitor,trackback:u.e.reserveTag(593826320)},t):Object(d.i)().assertConditionTag(!1,"onRequestLoadThreads called for non-virtualized store",593826321)},e.prototype.shouldShowGhostComment=function(){return Object($.b)(this.props.componentTree)===J.a.FullPane&&this.props.nextPopulatedContextDetails!==j.a.Unknown&&this.props.nextPopulatedContextDetails!==j.a.NoComments&&this.props.nextPopulatedContextDetails!==j.a.OnlyCommentsInCurrent},e.prototype.onGhostCommentClicked=function(){var t=this,e=E.o(),n=e&&!E.vb()||!e&&"web"!==Object(st.a)();this.props.discardDraftIfEmpty({renderContextType:Object($.b)(this.props.componentTree),telemetryVisitor:this.props.telemetryVisitor,trackback:u.e.reserveTag(590955266)},U.a.SharedComments,n?W.a.GhostCard:void 0).then((function(e){n&&e.draftDiscardBehavior!==Y.a.NoDraft&&e.draftDiscardResult!==S.a.Handled||t.props.selectionManager.selectAcrossContexts(D.d.Next,Object($.b)(t.props.componentTree))})).catch(Object(L.a)(u.e.reserveTag(590955267)))},e.prototype.tryGetSelectedComment=function(){if(this.props.selectedCommentInfo)return this.props.selectedCommentInfo.selectedComment},e.prototype.isReadyToRender=function(){var t=Object(I.K)(this.props.modelCapabilities,this.props.virtualized_deprecated);return Object(K.a)({commentData:lt.c(this.props.dataItems),pendingCommentLoad:this.props.pendingCommentLoad,virtualized:t})},e.prototype.canCardDelete=function(t){return!0},e.prototype.shouldCheckForLowFidelityOnCardDelete=function(){return!1},e.prototype.render=function(){return T.createElement(at.a.Provider,{value:this.props.componentTree.componentTreeId},this.renderInner())},e}(T.Component),dt=n(3),ft=n(11),ht=n(500),yt=n(36),mt=n(876),bt=n(170),gt=Object(dt.eb)({height:"100%"}),vt=Object(ft.c)((function(t,e){var n;return Object(dt.eb)({fontFamily:'"Segoe UI", "Segoe UI Web", Arial, Verdana, sans-serif',width:e+32+"px",display:"flex",flexDirection:"column",alignItems:"stretch",height:"100%",overflowX:"hidden",overflowY:"hidden",backgroundColor:E.T()?void 0:null!==(n=null==t?void 0:t.PaneBackground)&&void 0!==n?n:yt.a.GRAY_30,selectors:{":focus":{color:"#333333",outline:"thin dotted"}}})})),Ct=Object(dt.eb)({display:"flex",flexDirection:"column",flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",justifyContent:"space-between",height:"100%",selectors:{":focus":{outline:"none"},"::-webkit-scrollbar-button:start:increment":{display:"none"},"::-webkit-scrollbar-button:end:decrement":{display:"none"}}}),Ot=Object(dt.eb)({display:"flex",flex:"1 0 auto",marginTop:"3px"}),Tt=Object(dt.eb)({padding:"16px",paddingLeft:"8px",height:"54px",boxSizing:"border-box",display:"flex",flexDirection:"row"});function xt(t){var e;return Object(dt.eb)({height:"22px",fontWeight:600,fontSize:"16px",fontFamily:bt.h+","+bt.g+","+bt.i+", Arial, Verdana, sans-serif",color:null!==(e=null==t?void 0:t.NewCommentButtonLabel)&&void 0!==e?e:"#252423",display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,overflow:"hidden"})}var Pt=function(t){var e,n,r,o,i,a,s;return{root:{color:null!==(e=null==t?void 0:t.ClosePaneButton)&&void 0!==e?e:yt.a.GRAY_E,padding:0,border:"1px solid transparent",margin:0,width:"22px",minWidth:"22px",height:"22px",alignContent:"center",marginLeft:"0px",selectors:{".ms-Fabric--isFocusVisible &:focus::after":bt.m,".ms-Button-flexContainer":{position:"relative"}}},icon:{color:null!==(n=null==t?void 0:t.ClosePaneButtonIcon)&&void 0!==n?n:yt.a.GRAY_F,margin:0,width:"20px",height:"20px"},iconHovered:{color:null!==(r=null==t?void 0:t.ClosePaneButtonIconHovered)&&void 0!==r?r:yt.a.GRAY_J},iconPressed:{color:null!==(o=null==t?void 0:t.ClosePaneButtonIconPressed)&&void 0!==o?o:yt.a.GRAY_J},rootPressed:{color:null!==(i=null==t?void 0:t.ClosePaneButtonPressed)&&void 0!==i?i:yt.a.GRAY_J,backgroundColor:null==t?void 0:t.ClosePaneButtonPressed},rootHovered:Object(dt.eb)({color:null!==(a=null==t?void 0:t.ClosePaneButtonHovered)&&void 0!==a?a:yt.a.GRAY_J,backgroundColor:E.ab()||null==t?void 0:t.ClosePaneButtonHovered},bt.l),rootFocused:Object(dt.eb)({color:null!==(s=null==t?void 0:t.ClosePaneButtonFocused)&&void 0!==s?s:"#333333",outline:"none",border:"1px solid"},bt.k)}},St=function(t){var e;return Object(dt.eb)({color:null!==(e=null==t?void 0:t.Text)&&void 0!==e?e:yt.a.ACTIVE_COMMENT_TEXT,fontWeight:"normal",fontFamily:"inherit",fontSize:"12px",outline:"none",border:"1px solid transparent",marginLeft:"8px",marginRight:"9px",marginTop:"8px",selectors:{":focus":{color:"#333333",outline:"none",border:"1px dotted"}}})},jt={selectors:{"& .ms-Spinner-circle":{borderColor:mt.a,borderTopColor:mt.b}}},_t=Object(p.m)((function(t,e){return{paneContainer:vt(t,e),listContainer:Ct,commentList:Ot,paneHeader:Tt,paneTitle:xt(t),iconClosePane:Pt(t),emptyPaneMessage:St(t),spinnerStyles:jt,focusTrapZone:gt}}),(function(){return[Object(ht.a)()]})),wt=n(155),Et=Object(p.m)(Object(ft.c)((function(t,e){return{labelContainer:Object(dt.eb)({display:"flex",color:yt.a.GRAY_E,opacity:"100%",fontFamily:"inherit",fontSize:"12px",lineHeight:"1.3",justifyContent:"center",width:e,marginTop:"7px",marginBottom:"10px",minHeight:"20px",forcedColorAdjust:"auto"}),cardContainer:Object(dt.eb)({display:"flex",flexDirection:"column",width:e,cursor:"pointer",marginTop:"20px",marginRight:"8px",marginLeft:"8px",backgroundColor:"transparent",flexGrow:0,transition:"ease-in-out",transitionProperty:"margin-top,max-height,min-height",transitionDuration:"0.20s",minHeight:"70px",maxHeight:"70px",border:"1px solid transparent",selectors:{":hover":Object(dt.eb)({marginTop:"5px",minHeight:"85px",maxHeight:"85px"},bt.l),":focus":Object(dt.eb)({color:"#333333",outline:"none",border:"1px dotted"},bt.k)}}),ghostCardContainer:Object(dt.eb)({width:e,overflow:"hidden"}),svgStyle:Object(dt.eb)({width:e},t&&{transform:"scaleX(-1)"})}})),(function(){return[Object(ht.a)()]})),kt=function(t){function e(e){var n=t.call(this,e)||this;return n.clickHandler=n.clickHandler.bind(n),n.keyDownHandler=n.keyDownHandler.bind(n),n}return Object(c.__extends)(e,t),e.prototype.clickHandler=function(t){this.props.onClick&&this.props.onClick(),t.stopPropagation()},e.prototype.keyDownHandler=function(t){Object(O.f)(t.key)===O.b.Enter&&(this.props.onClick&&this.props.onClick(),t.stopPropagation())},e.prototype.render=function(){var t=n(2594),e=Object(wt.a)(),r=Et(e);return T.createElement("div",{"aria-label":this.props.accessibilityLabel,id:ot.z(),className:r.cardContainer,role:"button",onClick:this.clickHandler,onKeyDown:this.keyDownHandler,tabIndex:0},T.createElement("span",{className:r.labelContainer},this.props.ghostCommentString),T.createElement("span",{className:r.ghostCardContainer},T.createElement(t,{className:r.svgStyle})))},e}(T.PureComponent),It=n(372),Rt=n(1855),At=n(447),Dt=function(t,e){var n,r,o,i,a,s,l,c,u,p,d,f;return Object(dt.db)({root:{margin:0,padding:0,backgroundColor:null!==(n=null==t?void 0:t.NewCommentButton)&&void 0!==n?n:yt.a.WHITE,border:"1px solid",borderRadius:bt.c,borderColor:null!==(r=null==t?void 0:t.CommonControlBorder)&&void 0!==r?r:yt.a.GRAY_C,boxShadow:null!==(o=null==e?void 0:e.DefaultButtonBoxShadow)&&void 0!==o?o:"0 2px 4px -.75px rgba(0,0,0,0.1)",selectors:{".ms-Fabric--isFocusVisible &:focus::after":bt.m,".ms-Button-flexContainer":{position:"relative"}}},icon:{width:"16px",padding:"8px",paddingLeft:"12px",margin:0,marginBottom:"16px",marginTop:"16px",color:null!==(i=null==t?void 0:t.PrimaryButton)&&void 0!==i?i:Object(At.a)().primary},label:{color:null==t?void 0:t.DefaultButtonIcon,fontSize:"14px",textAlign:"right",fontFamily:"inherit",padding:"8px",paddingRight:"12px",paddingLeft:0,margin:0,marginBottom:"16px",marginTop:"16px"},rootHovered:Object(dt.eb)({color:Object(E.bb)()?void 0:bt.b.BUTTON_HOVER,backgroundColor:null==t?void 0:t.NewCommentButtonHovered},bt.l),rootPressed:{color:Object(E.bb)()?void 0:bt.b.BUTTON_DOWN,backgroundColor:null==t?void 0:t.NewCommentButtonPressed},rootFocused:Object(dt.eb)({boxShadow:null!==(a=null==e?void 0:e.FocusedButtonBoxShadow)&&void 0!==a?a:"inset 0px 0px 0px 1px white",backgroundColor:null!==(s=null==t?void 0:t.DefaultButton)&&void 0!==s?s:bt.b.BUTTON_SELECT,borderColor:null!==(l=null==t?void 0:t.NewCommentButtonBorderFocused)&&void 0!==l?l:yt.a.BLACK},bt.k),rootDisabled:{boxShadow:null!==(c=null==e?void 0:e.DisabledButtonBoxShadow)&&void 0!==c?c:"inset 0px 0px 0px 1px #F3F2F1",backgroundColor:null!==(u=null==t?void 0:t.NewCommentButtonDisabled)&&void 0!==u?u:bt.b.BUTTON_DISABLED},iconHovered:{color:null!==(p=null==t?void 0:t.NewCommentButtonIconHoveredPressed)&&void 0!==p?p:yt.a.GRAY_J},iconPressed:{color:null!==(d=null==t?void 0:t.NewCommentButtonIconHoveredPressed)&&void 0!==d?d:yt.a.GRAY_J},labelHovered:{color:null!==(f=null==t?void 0:t.DefaultButtonIcon)&&void 0!==f?f:yt.a.GRAY_J}})},Mt=Object(ft.c)((function(t,e,n){return{newCommentButtonContainer:(r=n,Object(dt.eb)({display:"flex",flexDirection:"row-reverse",direction:"inherit",flexWrap:"nowrap",overflow:"hidden",width:r,minHeight:"41px",marginBottom:"5px",paddingLeft:"10px",paddingBottom:0,backgroundColor:"transparent",outline:"none"})),newCommentButton:Dt(t,e)};var r})),Bt=Object(p.m)((function(t,e,n){return Mt(t,e,n)}),(function(){return[Object(ht.a)()]})),Nt={iconName:"NewComment"},Lt=T.memo((function(t){var e=Object(w.b)(),n=Bt(null==e?void 0:e.colors,null==e?void 0:e.styles);return T.createElement("div",{className:n.newCommentButtonContainer},T.createElement(g.a,{content:t.localizationAPI.getString(177),directionalHint:v.a.leftCenter,tooltipProps:Rt.a},T.createElement(It.a,{id:Object(ot.E)(),styles:n.newCommentButton,text:t.localizationAPI.getString(91),ariaLabel:t.localizationAPI.getString(92),iconProps:Nt,onClick:t.onClick,onKeyDown:t.onKeyDown,disabled:t.disabled,allowDisabledFocus:!0,tabIndex:t.disabled?-1:0})))})),Ht=n(2314),Ft=n(651),Ut=n(1854),zt=n(734),Kt=n(196),Vt={cardTabbingMode:Ht.a.ExpandedCardOrFirstCardTabbable,postTabbingMode:Ht.b.ExpandedCardRootPostTabbable},Wt=function(t){function e(e){var n=t.call(this,e)||this;return n.paneRootRef=null,n.onPaneResize=function(t){Object(d.i)().assertConditionTag(t.length<=1,"Unexpected number of elements: "+t.length,592232640),t.forEach((function(t){t.target===n.paneRootRef&&(n.props.selectedCommentInfo&&n.prevContentRect&&n.prevContentRect.height!==t.contentRect.height&&n.scrollToThreadById(n.props.selectedCommentInfo.selectedComment.selectedCardId),n.prevContentRect=t.contentRect)}))},n.onRenderCell=function(t,e){if(t)return n.renderCommentThread(e||0,t);Object(d.i)().assertConditionTag(!1,"Trying to render non-existent item",577066524)},n.onCardLayout=void 0,n.renderWithContexts=function(t){var e=n.paneContainerKeyDownHandler.onKeyDown;n.styles=_t(null==t?void 0:t.colors);var r=null;r=n.isReadyToRender()?n.isPaneEmpty()?n.renderEmptyPaneMessage():T.createElement("div",{"data-is-scrollable":"true",id:ot.o(),className:n.styles.listContainer,onKeyDown:n.commentContentsKeyDownHandler.onKeyDown},T.createElement(m.a,{ref:n.onReceiveListRef,className:n.styles.commentList,items:n.state.allRenderableItemThreads,role:"tree",onRenderPage:n.onRenderPage,onRenderCell:n.onRenderCell,"aria-label":n.props.localizationAPI.getString(32),getKey:n.getListItemKey}),n.shouldShowGhostComment()?T.createElement(kt,Object(c.__assign)({},n.getGhostCommentProps())):void 0):T.createElement(f.a,{delay:bt.f},T.createElement(h.a,{size:y.a.large,className:n.styles.spinnerStyles}));var o={ref:n.setPaneRootDivRef,id:ot.y(),"aria-label":n.props.localizationAPI.getString(31),className:n.styles.paneContainer,onKeyDown:e,tabIndex:-1,onFocus:n.paneFocusHandler,onContextMenu:zt.b};return E.T()?T.createElement("div",Object(c.__assign)({},o),n.renderNewCommentButtonWrapper(),r):T.createElement(b.a,{className:n.styles.focusTrapZone,isClickableOutsideFocusTrap:!0,ignoreExternalFocusing:!0,forceFocusInsideTrap:!1,disableFirstFocus:!0},T.createElement("div",Object(c.__assign)({},o),n.renderCommentPaneHeader_deprecated(),n.renderNewCommentButtonWrapper(),r))},n.onRenderPage=n.onRenderPage.bind(n),n.scrollToThreadById=n.scrollToThreadById.bind(n),n.closePaneButtonClickHandler_deprecated=n.closePaneButtonClickHandler_deprecated.bind(n),n.closePaneButtonKeyDownHandler_deprecated=n.closePaneButtonKeyDownHandler_deprecated.bind(n),n.onReceiveListRef=n.onReceiveListRef.bind(n),n.paneFocusHandler=n.paneFocusHandler.bind(n),n.setPaneRootDivRef=n.setPaneRootDivRef.bind(n),n.newCommentButtonClickHandler=n.newCommentButtonClickHandler.bind(n),n.newCommentButtonKeyDownHandler=n.newCommentButtonKeyDownHandler.bind(n),n.getMentionableCommentEditorProps=Object(p.k)(n.getMentionableCommentEditorProps.bind(n)),n.getAuthToken=n.getAuthToken.bind(n),n.state=n.getInitialState(e),n.resizeObserver=new x.a(n.onPaneResize),n}return Object(c.__extends)(e,t),e.prototype.onReceiveListRef=function(t){this.listRef=t},e.prototype.isPaneEmpty=function(){var t=this.props.nextPopulatedContextDetails===j.a.NoComments;return t&&Object(d.i)().assertConditionTag(!this.props.dataItems.length,"CommentData length should be 0 if NextPopulatedContextDetails is NoComments.",595182560),t&&!this.props.dataItems.length&&!this.props.createdCommentLie},e.prototype.scrollToThreadById=function(t){var e=this;if(!this.listRef)return!1;var n=this.state.allRenderableItemThreads,r=Math.max(n.findIndex((function(e){return lt.h(e).commentId===t})),0);return this.listRef.scrollToIndex(r,(function(t){return e.getCardScrollHeight(t,n)})),!0},e.prototype.paneFocusHandler=function(t){t.target===this.paneRootRef&&this.props.focusManager.focusCommentPaneCommand(this.props.componentTree)},e.prototype.setPaneRootDivRef=function(t){this.paneRootRef=t},e.prototype.closePaneButtonClickHandler_deprecated=function(t){this.closePane(),t.stopPropagation()},e.prototype.closePaneButtonKeyDownHandler_deprecated=function(t){Object(O.f)(t.key)===O.b.Enter&&(this.closePane(),t.preventDefault(),t.stopPropagation())},e.prototype.newCommentButtonClickHandler=function(t){this.startNewCommentSession(),t.stopPropagation()},e.prototype.newCommentButtonKeyDownHandler=function(t){Object(O.f)(t.key)===O.b.Enter&&(this.startNewCommentSession(),t.stopPropagation(),E.kb()&&t.preventDefault())},e.prototype.getGhostCommentProps=function(){var t=Ft.h(this.props.localizationAPI,this.props.nextPopulatedContextDetails);return{onClick:this.onGhostCommentClicked,ghostCommentString:t,accessibilityLabel:t}},e.prototype.onContextChanged=function(){},e.prototype.getAuthToken=function(){return this.props.peopleAPI.getAuthToken(_.a.Loki)},e.prototype.renderCommentPaneHeader_deprecated=function(){return T.createElement("div",{className:this.styles.paneHeader},T.createElement("div",{className:this.styles.paneTitle},this.props.localizationAPI.getString(18)),T.createElement(g.a,{content:this.props.localizationAPI.getString(19),directionalHint:v.a.leftCenter,tooltipProps:Rt.a},this.renderCloseButton_deprecated()))},e.prototype.renderCloseButton_deprecated=function(){return T.createElement(C.a,{id:ot.k(),styles:this.styles.iconClosePane,onClick:this.closePaneButtonClickHandler_deprecated,onKeyDown:this.closePaneButtonKeyDownHandler_deprecated,iconProps:{iconName:E.h()?"CancelGlyph_TaskPane":"CancelGlyph_TaskPane_deprecated"},title:void 0,ariaLabel:this.props.localizationAPI.getString(20),tabIndex:0})},e.prototype.isNewCommentButtonDisabled=function(){return E.D()&&!this.props.modelCapabilities.newThread||E.A()&&this.props.readOnly||!Object(k.a)(this.props.draftState,this.props.createdCommentLie)},e.prototype.renderNewCommentButtonWrapper=function(){return!E.B()||!E.A()&&this.props.readOnly?null:T.createElement(Lt,{disabled:this.isNewCommentButtonDisabled(),localizationAPI:this.props.localizationAPI,onClick:this.newCommentButtonClickHandler,onKeyDown:this.newCommentButtonKeyDownHandler})},e.prototype.renderEmptyPaneMessage=function(){return T.createElement("div",{className:this.styles.emptyPaneMessage,"aria-label":this.props.localizationAPI.getString(13),tabIndex:0},this.props.localizationAPI.getString(13))},e.prototype.onRenderPage=function(t,e){if((null==t?void 0:t.page.items)&&Object(I.K)(this.props.modelCapabilities,this.props.virtualized_deprecated)){var n=t.page.items,r=Object(p.i)(n,(function(t){if(Object(Kt.a)(t[0]))return Object(P.i)(t[0].commentModel);Object(d.i)().assertConditionTag(!1,"First item in thread is not a comment model!",595632604)}));r.length&&this.onRequestLoadThreads(r)}return Object(d.i)().assertConditionTag(!!t,"Trying to render with non-existent pageProps!",577066525),e?e(t):null},e.prototype.getCreateCommentInitialHeight=function(){return 0},e.prototype.getKeyboardingOptions=function(){return Vt},e.prototype.componentDidUpdate=function(e,n){var r=e.selectedCommentInfo?e.selectedCommentInfo.selectedComment.selectedCardId:void 0,o=this.props.selectedCommentInfo?this.props.selectedCommentInfo.selectedComment.selectedCardId:void 0,i=r!==o,a=ut(e),s=ut(this.props);i?o&&this.scrollToThreadById(o):!this.props.selectedCommentInfo&&a!==s&&s&&this.scrollToThreadById(s),!this.listRef||this.props.selectedCommentInfo===e.selectedCommentInfo&&this.props.expandedComments===e.expandedComments&&this.props.cardViewStates===e.cardViewStates&&this.props.postViewStates===e.postViewStates&&this.props.highlightedCommentId===e.highlightedCommentId&&this.props.atMentionState_deprecated===e.atMentionState_deprecated&&this.props.modelCapabilities===e.modelCapabilities&&this.props.readOnly===e.readOnly&&this.props.draftState===e.draftState||this.listRef.forceUpdate(),t.prototype.componentDidUpdate.call(this,e,n)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.paneRootRef&&this.resizeObserver.observe(this.paneRootRef)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.resizeObserver&&this.resizeObserver.disconnect(),this.prevContentRect=void 0},e.prototype.UNSAFE_componentWillReceiveProps=function(t){var e=this.getUpdatedItemThreads(t);this.setState({allRenderableItemThreads:e})},e.prototype.getCardScrollHeight=function(t,e){return Object(d.i)().assertConditionTag(void 0!==e[t],"No comment thread in the given index: '"+t+"'. Thread length: '"+e.length+"'",595182561),e[t]&&1===e[t].length?160:e[t]&&2===e[t].length?206:235},e.prototype.onGetUserContacts=function(t,e,n){return tt.r({filter:t,limit:e,searchGraph:n,dispatchProps:this.props})},e.prototype.invokeModalDialog=function(t,e,n){var r=Object(d.i)().createActivityObject("InvokeModalDialog",this.props.telemetryVisitor,d.a.None,d.b.NecessaryServiceDataEvent);switch(r.addDataField("ModalDialogMode",t,d.d.SystemMetadata),t){case R.a.ClosePaneDraft:var o,i=Ft.e(this.props.localizationAPI),a=new Promise((function(t){o=t}));return this.props.requestModalConfirmation({renderContextType:Object($.b)(this.props.componentTree),trackback:u.e.reserveTag(595928218),telemetryVisitor:this.props.telemetryVisitor},(function(){return o(e())}),(function(){return o(n())}),i),r.successTag(595182562),a;default:return Object(d.i)().assertConditionTag(!1,"ModalDialogMode "+t+" not implemented for web",595182563),r.failTag(595182592,-2130957557),Promise.resolve(S.a.Unhandled)}},e.prototype.getMentionableCommentEditorProps=function(t,e){if(t===P.b.Enabled)return{onMentionCreated:this.onMentionCreated,onMentioneesStillInDraftUpdated:this.onMentioneesStillInDraftUpdated,getAuthToken:this.getAuthToken,peoplePickerProps:{onGetUserContacts:this.onGetUserContacts,pickerLocalizationDetails:E.u()?void 0:Ft.j(this.props.localizationAPI),preventDismissOnScroll:E.b(),correlationId:this.props.correlationId,lppManager:this.props.lppManager},suggestionsDetails:e}},e.prototype.onAtMentionCapabilityStateChange=function(){},e.prototype.getContentsPreventDefaultKeyDownBehavior=function(){},e.prototype.getContentExtraPaddingLeft=function(){},e.prototype.getContentExtraPaddingRight=function(){},e.prototype.getAvailableScreenHeight=function(){},e.prototype.getMaxDraftHeight=function(){},e.prototype.getCommentCardStyle=function(){},e.prototype.getContentBackgroundColor=function(t,e){},e.prototype.getPinnedCardIndex_deprecated=function(){},e.prototype.renderInner=function(){return E.bb()?Object(Ut.a)(this.renderWithContexts,w.a):this.renderWithContexts()},e}(pt);var qt=Object(r.b)((function(){var t=i.y(),e=i.z();return function(n){var r=i.f(n),l=a.c(n),c={cardViewStates:i.c(n),dataItems:t(n),tasks:s.b(n),personaIconPropertiesMap:i.o(n),createdCommentLie:i.g(n,!0,Object($.b)(l)),nextPopulatedContextDetails:r.nextPopulatedContextDetails,pendingCommentLoad:i.n(n),postViewStates:i.p(n),historyRecordViewStates:s.a(n),componentTree:l,commentThreadCountsContextDetails:r.commentThreadCounts,virtualized_deprecated:i.v(n),selectedThreadIdBeforeCommentSession:i.r(n),readOnly:i.l(n),highlightedCommentId:i.k(n),lastContextChangeIncrement:r.lastContextChangeIncrement,initializationStatus:n.paneState.initializationStatus,atMentionState_deprecated:i.a(n),draftState:i.h(n),capabilities_deprecated:i.b(n),modelCapabilities:i.m(n),selectedCommentInfo:e(n),expandedComments:i.i(n),suggestionsDetails:i.t(n),foldableLayoutState:a.d(n).foldableLayoutState,displayConfigurationState:n.paneState.viewContainerDisplayConfiguration},u=i.u(n);if(u){var p=i.d(n).filter(o.a).findIndex((function(t){return t.commentId===u}));p>-1&&(c.topVisibleThread={cardId:u,index:p})}return c}}),l.b,void 0,{forwardRef:!0})(Wt);e.a=qt},2375:function(t,e,n){"use strict";var r=n(990),o=n(12),i=n(10),a=n(2372),s=n(1),l=n(0),c=n(6),u=n(82),p=n(4),d=n(141),f=n(663),h=n(62),y=n(23),m=n(44),b=n(14),g=n(233),v=n(20),C=n(27),O=n(2314),T=n(218),x=n(651),P=n(2320),S=n(2271);var j=n(96),_=n(92),w=n(2370),E=n(196),k=function(t){function e(e){var n=t.call(this,e)||this;return n.memoGetActionBarItems=Object(u.j)(w.a,20,(function(){Object(p.i)().assertConditionTag(!1,"Cache invalidated, memoization or parameters configured incorrectly?",557875360)})),n.memoGetCardContextualMenuItems=Object(u.j)(w.c,20,(function(){Object(p.i)().assertConditionTag(!1,"Cache invalidated, memoization or parameters configured incorrectly?",557875361)})),n.getMentionableCommentEditorProps=Object(u.k)((function(t,e){if(t===d.b.Enabled)return{onMentionCreated:n.onMentionCreated,onMentioneesStillInDraftUpdated:n.onMentioneesStillInDraftUpdated,getAuthToken:n.getAuthToken,peoplePickerProps:{onGetUserContacts:n.onGetUserContacts,pickerLocalizationDetails:o.u()?void 0:x.j(n.props.localizationAPI),preventDismissOnScroll:o.b(),correlationId:n.props.correlationId,lppManager:n.props.lppManager},suggestionsDetails:e}})),n.getRenderableItemActionBarItems=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!n.renderableItemActionBarItems||void 0===n.memoGetActionBarItems)throw new c.d("Function should not be called when DeleteRestricted gate is off.",c.e.reserveTag(557601689));return n.memoGetActionBarItems.apply(n,Object(s.__spread)([n.renderableItemActionBarItems],t))},n.getCardContextualMenuItems=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!n.cardContextMenuItems||void 0===n.memoGetCardContextualMenuItems)throw new c.d("Function should not be called when DeleteRestricted gate is off.",c.e.reserveTag(557601690));return n.memoGetCardContextualMenuItems.apply(n,Object(s.__spread)([n.cardContextMenuItems],t))},n.onPostDelete=function(t){T.E({trackback:c.e.reserveTag(593826139),id:t,data:n.props.dataItems,selectedComment:n.props.selectedState,renderContextType:Object(C.b)(n.props.componentTree),actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI})},n.onPostEdit=function(t){T.F({trackback:c.e.reserveTag(593801875),id:t,data:n.props.dataItems,selectedComment:n.props.selectedState,renderContextType:Object(C.b)(n.props.componentTree),actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onPostCommit=function(t,e){T.D({trackback:c.e.reserveTag(593826141),id:t.getId(),data:n.props.dataItems,draftState:n.props.draftState,contentPromise:t.getContentsAsync(),atMentionsEnabled:Object(b.g)(n.props.modelCapabilities,n.props.atMentionState_deprecated)===d.b.Enabled,componentTree:n.props.componentTree,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor,commitSource:e,localizationAPI:n.props.localizationAPI}).catch(Object(h.a)(c.e.reserveTag(593826142)))},n.onPostDraftEmptinessChanged=function(t,e){T.q({trackback:c.e.reserveTag(592041679),contentId:t.getId(),isEmpty:e,renderContextType:Object(C.b)(n.props.componentTree),draftIdMap:n.props.draftState.postIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onPostSaveDraft=function(t,e){T.y({trackback:c.e.reserveTag(592720402),id:t,editor:e,renderContextType:Object(C.b)(n.props.componentTree),draftIdMap:n.props.draftState.postIdToDraftIdMap,draftMap:n.props.draftState.drafts,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onPostCancel=function(t){T.A({trackback:c.e.reserveTag(593826145),commentId:t.getId(),setContents:t.setContents.bind(t),data:n.props.dataItems,draftState:n.props.draftState,shouldClosePaneAfterDiscardDraft:!1,onWillDiscardCallback:void 0,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI})},n.onLowFidelityWarningCancel=function(){T.s({selectedState:n.props.selectedState,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onLowFidelityWarningConfirm=function(){T.t({selectedState:n.props.selectedState,onCardDelete:n.cardOnDelete,onPostDelete:n.onPostDelete,onPostEdit:n.onPostEdit})},n.onPostReactionUpdated=function(t,e,r){T.x(c.e.reserveTag(587994052),t,e,Object(C.b)(n.props.componentTree),n.props,n.props.telemetryVisitor,r)},n.onPresentLinkToComment=function(t){T.w(c.e.reserveTag(578852485),t,Object(C.b)(n.props.componentTree),n.props,n.props.telemetryVisitor)},n.onRenderableItemSelect=function(t,e){var r=n.getRenderableItemFromRef(t);r?T.K({trackback:c.e.reserveTag(593826147),renderableItem:r,selectedComment:n.props.selectedState,cardCollapsedState:n.props.cardCollapsedState,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree:n.props.componentTree,shouldFocusAfter:e,draftState_deprecated:n.props.draftState}).catch(Object(h.a)(c.e.reserveTag(590123736))):Object(p.i)().assertConditionTag(!1,"Comment not rendered within Card. Is something incorrect in the tree?",593826146)},n.onPostCollapse=function(t){var e=n.getRenderableItemFromRef(t);e?T.C(c.e.reserveTag(589940442),e,n.props,n.props.telemetryVisitor,n.props.componentTree):Object(p.i)().assertConditionTag(!1,"Collapse from an unknown post?",589940441)},n.onPostFocusParent=function(t){var e=n.getRenderableItemFromRef(t);e?T.I(e,n.props.componentTree,n.props.focusManager,n.props.draftState):Object(p.i)().assertConditionTag(!1,"Focus parent from unknown post?",545867680)},n.cardOnResolveThread=function(t){T.m({componentTree:n.props.componentTree,focusManager:n.props.focusManager,trackback:c.e.reserveTag(593826176),id:t,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,isTask:!!n.props.threadTaskState})},n.cardOnReopenThread=function(t){T.l({trackback:c.e.reserveTag(593826177),id:t,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,isTask:!!n.props.threadTaskState})},n.cardOnDelete=function(t){Object(p.i)().assertConditionTag(Object(C.b)(n.props.componentTree)!==v.a.HalfPane,"Discard not yet fully supported for HalfPane in DHC",593826178),T.d({trackback:c.e.reserveTag(592840777),id:t,data:n.props.dataItems,selectedComment:n.props.selectedState,componentTree:n.props.componentTree,invokeModalDialog:void 0,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,focusManager:n.props.focusManager,isTask:!!n.props.threadTaskState,threadIndex:0,shouldCheckForLowFidelity:n.shouldCheckForLowFidelityOnCardDelete()})},n.cardOnPost=function(t,e){var r=n.props.isDraftThread?{type:"CREATE"}:{type:"REPLY",parentId:t.getId()},o=n.props.draftState.drafts[n.props.draftState.cardIdToDraftIdMap[n.props.threadId]];T.c({trackback:c.e.reserveTag(593622431),commentCardRef:t,draftState:n.props.draftState,areMentionsEnabled:Object(b.g)(n.props.modelCapabilities,n.props.atMentionState_deprecated)===d.b.Enabled,session:r,componentTree:n.props.componentTree,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,commitSource:e,selectedTaskAssignee:o&&o.selectedTaskAssignee}).catch(Object(h.a)(c.e.reserveTag(593622432)))},n.cardOnCollapseCallback=function(t){T.b({trackback:c.e.reserveTag(562918285),commentCardRef:t,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnSelectCallback=function(t){T.n({trackback:c.e.reserveTag(571281792),commentCardRef:t,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree:n.props.componentTree,options:{selectActionType:y.SelectActionType.SelectCard}})},n.cardOnSelectExpandCallback=function(t,e,r){T.n({trackback:c.e.reserveTag(571281763),commentCardRef:t,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree:n.props.componentTree,options:{selectActionType:y.SelectActionType.ExpandCard,relativeDraftingState:n.props.cardRelativeDraftingState,draftState:n.props.draftState,shouldFocusAfter:r,selectRootPost:e}})},n.cardOnFocusCallback=function(t){T.i({trackback:c.e.reserveTag(571340120),commentCardRef:t,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,componentTree:n.props.componentTree,options:{selectActionType:y.SelectActionType.Polite},focusManager:n.props.focusManager,isDraftThread:n.props.isDraftThread})},n.cardOnBeginReplyCallback=function(t){T.a({trackback:c.e.reserveTag(593826189),threadId:t.getId(),renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnHighlight=function(t,e){T.j({trackback:c.e.reserveTag(593826190),commentCardRef:t,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,shouldHighlightCard:e})},n.cardOnDraftingInputSizeChange=function(t,e){T.f({trackback:c.e.reserveTag(593826191),focusManager:n.props.focusManager,componentTree:n.props.componentTree,cardId:t.getId(),isCardLie:n.props.isDraftThread,newHeight:e,renderContextType:Object(C.b)(n.props.componentTree),selectedComment:n.props.selectedState,dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnDraftEmptinessChanged=function(t,e){T.q({trackback:c.e.reserveTag(592213847),contentId:t.getId(),isEmpty:e,renderContextType:Object(C.b)(n.props.componentTree),draftIdMap:n.props.draftState.cardIdToDraftIdMap,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnEditorFocusLost=function(t){T.g({trackback:c.e.reserveTag(592065734),id:t.getId(),draftState:n.props.draftState,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnTaskTopperCheckboxPressed=function(){o.b()&&(n.props.threadTaskState?T.o({componentTree:n.props.componentTree,focusManager:n.props.focusManager,trackback:c.e.reserveTag(593826194),id:n.props.threadId,renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI}):Object(p.i)().assertConditionTag(!1,"props.threadTaskState is undefined",593826193))},n.cardOnSaveDraft=function(t,e){T.y({trackback:c.e.reserveTag(592720403),id:t,editor:e,renderContextType:Object(C.b)(n.props.componentTree),draftIdMap:n.props.draftState.cardIdToDraftIdMap,draftMap:n.props.draftState.drafts,actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.cardOnCancel=function(t){Object(p.i)().assertConditionTag(n.props.isDraftThread||n.props.cardRelativeDraftingState===g.a.InCard,"Mismatch between selectedComment state and cancel reply callback.",593826196),T.e({trackback:c.e.reserveTag(592840778),showDiscardDialog:!1,invokeModalDialog:void 0,componentTree:n.props.componentTree,dispatchProps:n.props,closeOnDiscard:!1,cardId:n.props.threadId,draftState:n.props.draftState,telemetryVisitor:n.props.telemetryVisitor,localizationAPI:n.props.localizationAPI,focusManager:n.props.focusManager,lieIndex:0})},n.commentEditorOnKeyDown=function(t){n.commentEditorKeyDownHandler.onKeyDown(t)},n.onPostError=function(t){T.H({trackback:c.e.reserveTag(593764370),id:t.getId(),data:n.props.dataItems,renderContextType:Object(C.b)(n.props.componentTree),actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onClearPostError=function(t){T.B({trackback:c.e.reserveTag(593764371),id:t.getId(),data:n.props.dataItems,renderContextType:Object(C.b)(n.props.componentTree),actionDispatchers:n.props,telemetryVisitor:n.props.telemetryVisitor})},n.onCardMounted=function(t){T.k({cardProps:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onCardEditorMounted=function(t){T.h({cardId:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onPostMounted=function(t){T.J({postId:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onPostEditorMounted=function(t){T.G({postId:t,componentTree:n.props.componentTree,focusManager:n.props.focusManager})},n.onCardRendered=Object(u.o)((function(t){n.props.onInitialRender({commentId:t.id,renderContextType:Object(C.b)(n.props.componentTree)})})),n.onSelectedTaskAssigneeUpdated=function(t){o.b()?T.z({trackback:c.e.reserveTag(593826204),renderContextType:Object(C.b)(n.props.componentTree),dispatchProps:n.props,telemetryVisitor:n.props.telemetryVisitor,selectedAssignee:t}):Object(p.i)().assertConditionTag(!1,"Selected Task Assignee Updated action type is not supported",593826205)},n.getPostOrHistoryRecordStates=Object(u.l)(P.c,(function(){return[n.props.dataItems,n.props.threadPostStates,n.props.historyRecordViewStates]})),n.onGetUserContacts=n.onGetUserContacts.bind(n),n.onMentionCreated=n.onMentionCreated.bind(n),n.onMentioneesStillInDraftUpdated=n.onMentioneesStillInDraftUpdated.bind(n),n.getAuthToken=n.getAuthToken.bind(n),n.commentPostCallbackProps={onDelete:n.onPostDelete,onEdit:n.onPostEdit,onCommit:n.onPostCommit,onCancel:n.onPostCancel,onSelect:n.onRenderableItemSelect,onDraftEmptinessChanged:n.onPostDraftEmptinessChanged,onSaveDraft:n.onPostSaveDraft,onLowFidelityWarningConfirm:n.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:n.onLowFidelityWarningCancel,onPostMounted:n.onPostMounted,onPostEditorMounted:n.onPostEditorMounted,onError:n.onPostError,onClearError:n.onClearPostError,commentEditorAdditionalKeyDownHandler:n.commentEditorOnKeyDown,onCollapseParent:n.onPostCollapse,onFocusParent:n.onPostFocusParent,onReactionUpdated:n.onPostReactionUpdated,onPresentLinkToComment:n.onPresentLinkToComment},n.commentCardCallbackProps={onEditorPress:n.cardOnBeginReplyCallback,onCardCollapse:n.cardOnCollapseCallback,onCardSelect:n.cardOnSelectCallback,onCardSelectExpand:n.cardOnSelectExpandCallback,onCardFocus:n.cardOnFocusCallback,onCardHighlightChange:n.cardOnHighlight,onDraftingInputSizeChange:n.cardOnDraftingInputSizeChange,onDraftEmptinessChanged:n.cardOnDraftEmptinessChanged,onEditorBlur:n.cardOnEditorFocusLost,onCancel:n.cardOnCancel,onPost:n.cardOnPost,onSaveDraft:n.cardOnSaveDraft,onSelectedTaskAssigneeUpdated:n.onSelectedTaskAssigneeUpdated,onCardMounted:n.onCardMounted,onCardEditorMounted:n.onCardEditorMounted,onCardRendered:n.onCardRendered,onLowFidelityWarningConfirm:n.onLowFidelityWarningConfirm,onLowFidelityWarningCancel:n.onLowFidelityWarningCancel,onTaskTopperCheckboxPressed:n.cardOnTaskTopperCheckboxPressed,commentEditorAdditionalKeyDownHandler:n.commentEditorOnKeyDown,onReactionUpdated:n.onPostReactionUpdated,onEditRootPost:n.onPostEdit},n.contextualMenuCallbackProps={onReopenThread:n.cardOnReopenThread,onResolveThread:n.cardOnResolveThread,onDeleteThread:n.cardOnDelete,onEditRootPost:n.onPostEdit,onPresentLinkToComment:n.onPresentLinkToComment},n.renderableItemActionBarItems=w.d(n.props.localizationAPI,n.commentPostCallbackProps),n.cardContextMenuItems=w.b(n.props.localizationAPI,n.contextualMenuCallbackProps),n.commentContentsKeyDownHandler=n.props.focusManager.commentContentsKeyDown((function(){return n.props.componentTree}),o.b()?function(){return n.props.dataItems}:void 0),n.commentEditorKeyDownHandler=n.props.focusManager.commentEditorKeyDown((function(){return n.props.componentTree})),n}return Object(s.__extends)(e,t),e.prototype.focus=function(){this.props.focusManager.focusCommentCardCommand(this.props.componentTree,this.props.threadId),this.props.selectComment(this.props.componentTree,{renderContextType:Object(C.b)(this.props.componentTree),trackback:c.e.reserveTag(590205772),telemetryVisitor:this.props.telemetryVisitor},{selectedCard:this.props.threadId,selectType:y.SelectActionType.ExpandCard,source:m.a.Canvas},!1).catch(Object(h.a)(c.e.reserveTag(590104656)))},e.prototype.getInstanceId=function(){return this.props.componentInstanceId},e.prototype.shouldComponentUpdate=function(t,n){return e.havePropsMeaningfullyChanged(t,this.props)},e.prototype.updateDraftRenderLockIfApplicable=function(t){var e=Object(b.H)(this.props.draftState);e&&e.threadId===this.props.threadId&&this.props.updateRenderLockForDraft({renderContextType:Object(C.b)(this.props.componentTree),trackback:c.e.reserveTag(593826137),telemetryVisitor:this.props.telemetryVisitor},t,e.commentDraft.sessionConfiguration.draftId)},e.prototype.componentDidMount=function(){var t,e,n,r;null===(e=(t=this.props).componentRef)||void 0===e||e.call(t,this),null===(r=(n=this.props).setComponentRef)||void 0===r||r.call(n,this.props.componentInstanceId,this),this.updateDraftRenderLockIfApplicable(!0)},e.prototype.componentWillUnmount=function(){var t,e;null===(e=(t=this.props).setComponentRef)||void 0===e||e.call(t,o.Y()?this.props.componentInstanceId:this.props.resource.id,null)},e.prototype.componentDidUpdate=function(t,e){if(this.props.draftState!==t.draftState){var n=Object(b.H)(t.draftState),r=Object(b.H)(this.props.draftState);(o.db()?!!r&&r.renderContextType!==Object(C.b)(this.props.componentTree)&&(void 0===n||n.renderContextType!==r.renderContextType):!(!r||void 0!==n&&(n.renderContextType===r.renderContextType||o.hb()&&r.renderContextType===Object(C.b)(this.props.componentTree))))&&this.updateDraftRenderLockIfApplicable(!0)}this.props.focusManager.discreteCommentCardPropsUpdated(this.props.componentTree,t,this.props)},e.havePropsMeaningfullyChanged=function(t,e){var n=Object.keys(t),r=Object.keys(e);return n.length!==r.length||n.some((function(n){if(e[n]===t[n])return!1;if("dataItems"===n){if(e.dataItems.length!==t.dataItems.length)return!0;for(var r=0;r<e.dataItems.length;r++){var o=e.dataItems[r],i=t.dataItems[r];if(Object(E.a)(o)&&Object(E.a)(i)&&o.commentModel!==i.commentModel||!!o.historyItem!=!!i.historyItem)return!0}return!1}return"object"!=typeof e[n]||!function(t,e){if(!t&&e||t&&!e)return!1;if(!t&&!e)return!0;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}(e[n],t[n])}))},e.prototype.getAuthToken=function(){return this.props.peopleAPI.getAuthToken(f.a.Loki)},e.prototype.getRenderableItemFromRef=function(t){var e=t.getId();return this.props.dataItems.find((function(t){return _.e(t)===e}))},e.prototype.shouldCheckForLowFidelityOnCardDelete=function(){return!1},e.prototype.getKeyboardingOptions=function(){return{cardTabbingMode:O.a.ExpandedCardOrFirstCardTabbable,postTabbingMode:O.b.ExpandedCardRootPostTabbable}},e.prototype.onMentionCreated=function(t){T.u({failTag:c.e.reserveTag(593826199),successTag:c.e.reserveTag(593826200),person:t,dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor,renderContextType:Object(C.b)(this.props.componentTree),trackback:c.e.reserveTag(593826201)})},e.prototype.onMentioneesStillInDraftUpdated=function(t){T.v({trackback:c.e.reserveTag(593826203),emailsStillInDraft:t,renderContextType:Object(C.b)(this.props.componentTree),dispatchProps:this.props,telemetryVisitor:this.props.telemetryVisitor})},e.prototype.onGetUserContacts=function(t,e,n){return T.r({filter:t,limit:e,searchGraph:n,dispatchProps:this.props})},e.prototype.renderThread=function(t){return t},e.prototype.onQueueLoadThread=function(){Object(b.K)(this.props.modelCapabilities,this.props.virtualized_deprecated)&&!this.props.isDraftThread&&this.props.queueLoadThread({renderContextType:Object(C.b)(this.props.componentTree),telemetryVisitor:this.props.telemetryVisitor,trackback:c.e.reserveTag(573145492)})},e.prototype.render=function(){var t,e;this.onQueueLoadThread();var n=this.getMentionableCommentEditorProps(Object(b.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated),this.props.suggestionsDetails),r=void 0!==this.props.cardRelativeDraftingState,o=this.props.dataItems.length>1,i=P.e({thread:this.props.dataItems,renderContextType:Object(C.b)(this.props.componentTree),cardState:this.props.cardState,postCallbacks:this.commentPostCallbackProps,mentionableEditorProps:n,cardCallbacks:this.commentCardCallbackProps,localizationAPI:this.props.localizationAPI,getActionBarItems:this.getRenderableItemActionBarItems,selectedState:this.props.selectedState,isolationEdit:Object(C.b)(this.props.componentTree)===v.a.HalfPane,isAtMentionEnabled:Object(b.g)(this.props.modelCapabilities,this.props.atMentionState_deprecated)===d.b.Enabled,areTasksEnabled:Object(b.c)(this.props.modelCapabilities),isDraftThread:this.props.isDraftThread,isCommentsContextReadOnly:this.props.readOnly,keyboardingOptions:this.getKeyboardingOptions(),personaIconPropertiesMap:this.props.personaIconPropertiesMap,draftState:this.props.draftState,cardCollapsedState:this.props.cardCollapsedState,cardRelativeDraftingState:this.props.cardRelativeDraftingState,accessibilitySetSize:this.props.accessibilitySetSize,accessibilityPositionInSet:this.props.accessibilityPositionInSet,accessibilitySetLevel:this.props.accessibilitySetLevel,maximumDimensions:this.props.maximumDimensions,getCardContextualMenuItems:this.getCardContextualMenuItems,mentionEditorProps:n,restrictActionControls:r,availableScreenHeight:void 0,contentBackgroundColor:o&&"ios"!==Object(j.a)()?"CardReplyBackground":"CardBackground",extraPaddingLeft:void 0,extraPaddingRight:void 0,preventDefaultKeyDownBehavior:this.getContentsPreventDefaultKeyDownBehavior(),isCardHighlighted:this.props.isHighlighted,maxDraftHeight:void 0,taskState:this.props.threadTaskState,cardStyle:void 0,onCardLayout:void 0,isCardTabbable:P.b(this.getKeyboardingOptions().cardTabbingMode,this.props.threadId,this.props.firstCardInCurrentContext,this.props.cardCollapsedState,this.props.selectedState),postOrHistoryRecordStates:this.getPostOrHistoryRecordStates(),richTextCapabilities:this.props.modelCapabilities.richTextCapabilities,isUIAAnnotationPatternEnabled:this.props.modelCapabilities.UIAAnnotationPattern,isResolveSupported:Object(b.w)(this.props.modelCapabilities,this.props.capabilities_deprecated.resolve),tabFocusTrapBehavior:null===(e=null===(t=this.props)||void 0===t?void 0:t.accessibilityMetadata)||void 0===e?void 0:e.tabFocusTrapBehavior});return l.createElement(S.a.Provider,{value:this.props.componentTree.componentTreeId},this.renderThread(i))},e}(l.Component),I=n(11),R=n(3),A=Object(I.c)((function(t,e){return{cardContainer:Object(R.eb)({position:"relative",zIndex:Object(P.d)(t,e)||Object(P.a)(t,e)?1:0})}})),D=function(t){function e(e){var n=t.call(this,e)||this;return n.rootRef=l.createRef(),n.componentTree=n.props.componentTree,n}return Object(s.__extends)(e,t),e.prototype.componentDidMount=function(){this.props.focusManager.discreteCommentCardRootRefMounted(this.rootRef),t.prototype.componentDidMount.call(this)},e.prototype.getContentsPreventDefaultKeyDownBehavior=function(){},e.prototype.renderThread=function(t){var e=A(t.props.id,this.props.selectedState).cardContainer;return l.createElement("div",{ref:this.rootRef,className:e,onKeyDown:this.commentContentsKeyDownHandler.onKeyDown},t)},e}(k),M=n(406),B=n(617);n.d(e,"a",(function(){return N}));var N=Object(r.b)((function(){var t,e=a.e(),n=a.c(),r=a.n((function(t){return i.g(t,!0)}),e,n),s=a.h(r),l=a.m(r),c=a.k(),u=a.i(),p=a.b(),d=a.a(),f=a.l(),h=a.j(r,f),y=a.f(f);return function(e,n){if(n.isVirtualized&&t)return t;var a=r(e,n),m=o.b()?f(e,n):void 0,b=a.thread[0].commentId;return t={threadId:b,dataItems:h(e,n),threadTaskState:m&&m.currentState,threadPostStates:l(e,n),historyRecordViewStates:y(e,n),selectedState:c(e,n),cardCollapsedState:Object(M.a)(b,i.i(e),Object(C.b)(n.componentTree)),readOnly:i.l(e),cardState:p(e,n),isHighlighted:u(e,n),personaIconPropertiesMap:i.o(e),isDraftThread:a.isDraftThread,atMentionState_deprecated:i.a(e),draftState:i.h(e),firstCardInCurrentContext:s(e,n),cardRelativeDraftingState:d(e,n),capabilities_deprecated:i.b(e),modelCapabilities:i.m(e),suggestionsDetails:i.t(e),virtualized_deprecated:i.v(e)}}}),B.a)(D)},2523:function(t,e,n){"use strict";e.a=function(){return!1}},2524:function(t,e,n){"use strict";(function(t){var r=n(2363),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.a.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=s}).call(this,n(1283)(t))},2525:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2526),e),o(n(2529),e),o(n(2530),e),o(n(2534),e),o(n(2539),e),o(n(2541),e),o(n(2544),e),o(n(2547),e),o(n(2551),e),o(n(2555),e),o(n(2318),e),o(n(1039),e),o(n(2558),e),o(n(2561),e),o(n(2562),e),o(n(2568),e),o(n(2572),e),o(n(2575),e),o(n(2579),e),o(n(2583),e),o(n(2586),e),o(n(2589),e),o(n(2367),e),o(n(2590),e),o(n(2368),e)},2526:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2527);Object.defineProperty(e,"Alert",{enumerable:!0,get:function(){return i.Alert}}),o(n(2528),e)},2527:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alert=void 0;var r=function(){function t(){}return t.alert=function(t,e,n,r){var o=t;e&&(o+="\n"+e),n?r?!0===window.confirm(o)?n.onClick():r.onClick():(window.alert(o),n.onClick()):window.alert(o)},t}();e.Alert=r},2528:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlertButtonStyle=void 0,function(t){t.default="default",t.cancel="cancel",t.destructive="destructive"}(e.AlertButtonStyle||(e.AlertButtonStyle={}))},2529:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppRegistry=void 0,e.AppRegistry=function(){function t(){}return t.registerComponent=function(t,e){console.error("This does not work in web currently, but will likely be needed once we have a web react bridge")},t}()},2530:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2531);Object.defineProperty(e,"Checkbox",{enumerable:!0,get:function(){return i.Checkbox}}),o(n(2533),e)},2531:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Checkbox=void 0;var c=n(659),u=l(n(0)),p=n(2532),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.label,n=t.disabled,r=t.defaultChecked,o=t.onValueChange,a={};return void 0!==e&&(a.label=e),void 0!==n&&(a.disabled=n),void 0!==r&&(a.defaultChecked=r),void 0!==o&&(a.onChange=o),u.createElement(c.Checkbox,i({},a))},e.prototype.setFocus=function(){},e.defaultProps=p.CheckboxDefaultProps,e}(u.Component);e.Checkbox=d,e.default=d},2532:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckboxDefaultProps=void 0,e.CheckboxDefaultProps={label:"",description:"",disabled:!1,defaultChecked:!1,checked:!1,onValueChange:void 0}},2533:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2534:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2535);Object.defineProperty(e,"CommandButton",{enumerable:!0,get:function(){return i.CommandButton}}),o(n(2538),e)},2535:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.CommandButton=void 0;var s=n(270),l=n(2284),c=a(n(0)),u=n(2537),p=n(2285);e.CommandButton=function(t){var e=t.accessibilityDescription,n=t.accessibilityLabel,o=t.tooltip,i=t.disabled,a=t.icon,u=t.onClick,d=t.text,f=l.getIconProps(a),h=p.buildLeafStyle([{flexGrow:0},t.style]);return c.createElement(s.CommandButton,r({ariaDescription:e,ariaLabel:n,disabled:i,iconProps:f,onClick:u},h&&{style:h},{title:o,text:d}))},e.CommandButton.defaultProps=u.CommandButtonDefaultProps,e.CommandButton.displayName="CommandButton",e.default=e.CommandButton},2536:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.View=e.ViewBase=e.Styles=e.Component=void 0;var l=s(n(0)),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(l.Component);e.Component=c;var u=function(){};e.Styles=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(l.Component);e.ViewBase=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(p);e.View=d},2537:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.CommandButtonDefaultProps=void 0;var o=n(2366);e.CommandButtonDefaultProps=r({},o.DefaultButtonDefaultProps)},2538:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2539:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2317);Object.defineProperty(e,"ContextualMenu",{enumerable:!0,get:function(){return i.ContextualMenu}}),o(n(2540),e)},2540:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2541:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2542);Object.defineProperty(e,"DefaultButton",{enumerable:!0,get:function(){return i.DefaultButton}}),o(n(2543),e)},2542:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultButton=void 0;var s=n(270),l=n(2284),c=n(2317),u=a(n(0)),p=n(2366),d=n(2285);e.DefaultButton=function(t){var e=t.text,n=t.tooltip,o=t.onClick,i=t.disabled,a=t.accessibilityLabel,p=t.accessibilityDescription,f=t.icon,h=t.menuProps,y=l.getIconProps(f),m=c.getContextualMenuItems(h),b=d.buildLeafStyle(t.style);return u.createElement(s.DefaultButton,r({text:e,title:n,onClick:o,disabled:i,ariaLabel:a,ariaDescription:p,iconProps:y,menuProps:m},b&&{style:b}))},e.DefaultButton.defaultProps=p.DefaultButtonDefaultProps,e.DefaultButton.displayName="DefaultButton"},2543:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2544:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2545);Object.defineProperty(e,"Hyperlink",{enumerable:!0,get:function(){return i.Hyperlink}}),o(n(2546),e)},2545:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Hyperlink=void 0;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return null},e}(s(n(0)).Component);e.Hyperlink=l,e.default=l},2546:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2547:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2548);Object.defineProperty(e,"HyperlinkButton",{enumerable:!0,get:function(){return i.HyperlinkButton}}),o(n(2550),e)},2548:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.HyperlinkButton=void 0;var s=n(1273),l=a(n(0)),c=n(2549),u=n(2285);e.HyperlinkButton=function(t){c.validateHyperlinkButtonProps(t);var e=u.buildLeafStyle(t.style);return l.createElement(s.Link,r({children:t.text?t.text:t.url,disabled:t.disabled,href:t.url,onClick:t.url?void 0:t.onClick},e&&{style:e},{title:t.tooltip}))},e.HyperlinkButton.displayName="HyperlinkButton"},2549:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTooltip=e.validateHyperlinkButtonProps=e.isHyperLinkShowingUrl=void 0,e.isHyperLinkShowingUrl=function(t){return!t.text||!!t.url&&t.text===t.url},e.validateHyperlinkButtonProps=function(t){t.url&&t.onClick&&console.error("onClick should not be specified on HyperlinkButton when a url is provided.  The onClick handler will be ignored"),t.url||t.onClick||console.error("You must specify either an onClick handler, or a url for a HyperlinkButton"),t.text||t.url||console.error("You must specify either the text or the url property")},e.getTooltip=function(t){return t.tooltip||t.text||t.url}},2550:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2551:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2552);Object.defineProperty(e,"IconButton",{enumerable:!0,get:function(){return i.IconButton}}),o(n(2554),e)},2552:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.IconButton=void 0;var s=n(270),l=n(2284),c=n(2317),u=a(n(0)),p=n(2553),d=n(2285);e.IconButton=function(t){var e=t.accessibilityDescription,n=t.accessibilityLabel,o=t.tooltip,i=t.disabled,a=t.menuProps,p=t.onClick,f=t.icon,h=l.getIconProps(f),y=c.getContextualMenuItems(a),m=d.buildLeafStyle(t.style);return u.createElement(s.IconButton,r({ariaDescription:e,ariaLabel:n,disabled:i,iconProps:h,menuProps:y,onClick:p},m&&{style:m},{title:o}))},e.IconButton.displayName="IconButton",e.IconButton.defaultProps=p.IconButtonDefaultProps},2553:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IconButtonDefaultProps=void 0,e.IconButtonDefaultProps={icon:null,tooltip:null,onClick:null,disabled:!1}},2554:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2555:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2284);Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return i.Image}}),o(n(2556),e)},2556:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2557:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PalettesContext=e.Palettes=e.PalettesCollection=void 0;var a=i(n(0)),s=function(){function t(){this._buildIn={ID:0,Bkg:"#FFFFFF",Text:"#262626",TextSecondary:"#666666",TextEmphasis:"#2B579A",TextDisabled:"#B1B1B1",AccentLight:"#E6E6E6",BkgCtl:"#FFFFFFFF",BkgHover:"#EDEBE9",BkgPressed:"#E1DFDD",BkgDisabled:"#D2D0CE",TextRest:"#262626FF",TextHover:"#262626FF",TextPressed:"#262626FF",TextLink:"357FCAFF"}}return Object.defineProperty(t.prototype,"Default",{get:function(){return this._buildIn},enumerable:!1,configurable:!0}),t.prototype.getPalette=function(t){return this._buildIn},t}();e.PalettesCollection=s,e.Palettes=new s,e.PalettesContext=a.createContext(e.Palettes.Default)},2558:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2559);Object.defineProperty(e,"Pivot",{enumerable:!0,get:function(){return i.Pivot}}),o(n(2560),e)},2559:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Pivot=void 0;var l=n(1869),c=s(n(0)),u=function(t){function e(e){var n=t.call(this,e)||this;return n._onLinkClick=n._onLinkClick.bind(n),n}return o(e,t),e.prototype.render=function(){var t=void 0!==this.props.initialSelectedIndex?this.props.items[this.props.initialSelectedIndex].key:void 0;return c.createElement(l.Pivot,{defaultSelectedKey:t,onLinkClick:this._onLinkClick},this.props.items.map((function(t){return c.createElement(l.PivotItem,{key:t.key,itemKey:t.key,headerText:t.label},t.render())})))},e.prototype.switchToNextTab=function(t){console.warn("SwitchToNextTab not yet implemented")},e.prototype.setSelectedPivotItem=function(t){console.warn("SetTabIndex not yet implemented")},e.prototype._onLinkClick=function(t,e){this.props.onSelectedPivotChanged(t.props.itemKey)},e}(c.Component);e.Pivot=u,e.default=u},2560:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2561:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Platform=void 0;var r=function(){function t(){}return t.select=function(t){return"web"in t?t.web:t.default},t.OS="web",t}();e.Platform=r},2562:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2563),e),o(n(2567),e)},2563:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ReadOnlyDataField=void 0;var l=n(2367),c=s(n(0)),u=n(2566),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props.text;return c.createElement(l.Text,{textStyle:this.props.textStyle,numberOfLines:this.props.numberOfLines}," ",t," ")},e.defaultProps=u.ReadOnlyDataFieldDefaultProps,e}(c.Component);e.ReadOnlyDataField=p,e.default=p},2564:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0;var c=l(n(0)),u=n(2318),p={defaultStyle:{position:"relative",display:"inline",flex:"0 0 auto",overflow:"hidden",whiteSpace:"pre-wrap",overflowWrap:"break-word",msHyphens:"auto"},ellipsis:{position:"relative",display:"inline",flex:"0 0 auto",overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"}},d={SmallStandard:"ms-font-s",SmallSecondary:"ms-font-s",MediumStandard:"ms-font-m",MediumSecondary:"ms-font-m",MediumApp:"ms-font-m",MediumBold:"ms-font-m ms-fontWeight-semibold",MediumBoldApp:"ms-font-m ms-fontWeight-semibold",LargeStandard:"ms-font-m-plus",LargePlusStandard:"ms-font-l",ExtraLargeStandard:"ms-font-xl",HugeStandard:"ms-font-xxl"},f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this;return"string"==typeof this.props.children&&"\n"===this.props.children?c.createElement("br",null):c.createElement(u.PalettesContext.Consumer,null,(function(e){return c.createElement("div",{style:t._getStyles(e),className:d[t.props.textStyle]||"ms-font-m"},t.props.children)}))},e.prototype._getStyles=function(t){var e=i({},1===this.props.numberOfLines?p.ellipsis:p.defaultStyle);if(this.props.disabled)e.color=t.TextDisabled;else switch(this.props.textStyle){case"SmallStandard":e.color=t.Text;break;case"SmallSecondary":e.color=t.TextSecondary;break;case"MediumStandard":e.color=t.Text;break;case"MediumSecondary":e.color=t.TextSecondary;break;case"MediumApp":e.color=t.TextEmphasis;break;case"MediumBold":e.color=t.Text;break;case"MediumBoldApp":e.color=t.TextEmphasis;break;case"LargeStandard":case"LargePlusStandard":case"ExtraLargeStandard":case"HugeStandard":e.color=t.Text;break;default:e.color=t.Text}return e},e}(c.Component);e.Text=f,e.default=f},2565:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2566:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReadOnlyDataFieldDefaultProps=void 0,e.ReadOnlyDataFieldDefaultProps={text:"",textStyle:"MediumStandard",numberOfLines:0}},2567:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2568:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2569);Object.defineProperty(e,"RichTextInput",{enumerable:!0,get:function(){return i.RichTextInput}}),o(n(222),e),o(n(2570),e),o(n(2571),e)},2569:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.RichTextInput=void 0;var l=s(n(0)),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return console.warn("RichTextInput not implemented in web"),l.createElement("div",null,"RichTextInput not implemented in web")},e.prototype.setFormattedText=function(t){},e.prototype.getFormattedText=function(){return null},e.prototype.replaceTextAtCurrentIndex=function(t,e){},e.prototype.replaceText=function(t,e,n){},e.prototype.getSelectionStart=function(){return null},e.prototype.getSelectionEnd=function(){return null},e.prototype.getCaretRect=function(){return null},e.prototype.clear=function(){},e.prototype.focus=function(){},e.prototype.blur=function(){},e.prototype.isFocused=function(){return!1},e.prototype.setTextSelection=function(t,e){console.warn("RTI: setTextSelection not implemented")},e}(l.Component);e.RichTextInput=c,e.default=c},2570:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeltaParaOperationAlign=e.DeltaListOperationEndType=e.DeltaListOperationType=void 0,function(t){t[t.None=0]="None",t[t.Bullet=1]="Bullet",t[t.NumberArabic=2]="NumberArabic",t[t.AlphabetLowerCase=3]="AlphabetLowerCase",t[t.AlphabetUpperCase=4]="AlphabetUpperCase",t[t.NumberRomanLowerCase=5]="NumberRomanLowerCase",t[t.NumberRomanUpperCase=6]="NumberRomanUpperCase"}(e.DeltaListOperationType||(e.DeltaListOperationType={})),function(t){t[t.Parenthesis=0]="Parenthesis",t[t.Period=1]="Period",t[t.Plain=2]="Plain",t[t.Minus=3]="Minus"}(e.DeltaListOperationEndType||(e.DeltaListOperationEndType={})),function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t[t.Justify=3]="Justify"}(e.DeltaParaOperationAlign||(e.DeltaParaOperationAlign={}))},2571:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RichTextInputDefaultProps=e.CustomKeys=void 0,function(t){t.ESCAPE="ESC",t.ENTER="ENTER",t.UP="UP",t.DOWN="DOWN",t.TAB="TAB",t.BACKSPACE="BACKSPACE",t.DEL="DEL",t.LEFT="LEFT",t.RIGHT="RIGHT"}(e.CustomKeys||(e.CustomKeys={})),e.RichTextInputDefaultProps={listenForCustomKeyEvents:!1,customKeys:[],editable:!0,maximumNumberOfLines:0,scrollEnabled:!0,autoCorrect:!0}},2572:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2573);Object.defineProperty(e,"Separator",{enumerable:!0,get:function(){return i.Separator}}),o(n(2574),e)},2573:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Separator=void 0;var s=a(n(0)),l=n(2318);e.Separator=function(t){var e=t.vertical,n=e?{width:1}:{height:1};return s.createElement(l.PalettesContext.Consumer,null,(function(o){return s.createElement("div",{style:r({alignSelf:"stretch",flexDirection:e?"column":"row",display:"flex",alignItems:"center"},t.style)},s.createElement("div",{style:r(r({},n),{backgroundColor:o.AccentLight,flexGrow:1})}))}))},e.Separator.displayName="Separator"},2574:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2575:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2576);Object.defineProperty(e,"ScrollView",{enumerable:!0,get:function(){return i.ScrollView}}),o(n(2578),e)},2576:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollView=void 0;var c=l(n(0)),u=n(2577),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t,e,n,r;switch(this.props.scrollDirection){case"horizontal":t="hidden",e="auto",n="flex",r="row";break;case"vertical":t="auto",e="hidden",n="block",r="column";break;case"both":t="auto",e="auto",n="block",r="row"}var o={overflowY:t,overflowX:e,display:n,flexDirection:r};return c.createElement("div",{style:i(i(i({},this.props.style),{position:"relative",overflow:"hidden",flexGrow:1,flexShrink:1,alignSelf:"stretch",flex:"1 1 auto"}),o),children:this.props.children})},e.defaultProps=u.ScrollViewDefaultProps,e}(c.Component);e.ScrollView=p,e.default=p},2577:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollViewDefaultProps=void 0,e.ScrollViewDefaultProps={scrollDirection:"vertical"}},2578:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2579:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2580);Object.defineProperty(e,"SuggestionsCallout",{enumerable:!0,get:function(){return i.SuggestionsCallout}}),o(n(2582),e)},2580:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestionsCallout=void 0;var l=s(n(0)),c=n(2581),u=function(t){function e(e){var n=t.call(this,e)||this;return n.state={dismiss:!1},n}return o(e,t),e.prototype.render=function(){return null},e.defaultProps=c.SuggestionsCalloutDefaultProps,e}(l.Component);e.SuggestionsCallout=u,e.default=u},2581:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestionsCalloutDefaultProps=void 0,e.SuggestionsCalloutDefaultProps={target:void 0,anchorPos:void 0,onDismiss:void 0}},2582:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2583:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2584);Object.defineProperty(e,"Spinner",{enumerable:!0,get:function(){return i.Spinner}}),o(n(2585),e)},2584:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Spinner=void 0;var l=n(489),c=s(n(0)),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.size,n=t.label;return c.createElement(l.Spinner,{label:n,size:this._convertSize(e)})},e.prototype._convertSize=function(t){switch(t){case"xsmall":return l.SpinnerSize.xSmall;case"small":return l.SpinnerSize.small;case"medium":return l.SpinnerSize.medium;case"large":return l.SpinnerSize.large;default:return}},e}(c.Component);e.Spinner=u,e.default=u},2585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2586:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.StackView=void 0;var l=s(n(0)),c=n(2368),u=function(){},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={highlighted:-1},e.isHighlighted=function(t){var n=e.state.highlighted;return n===t||n===t+1},e.separators=function(t){return{highlight:function(){return e.setState({highlighted:t})},unhighlight:function(){return e.setState({highlighted:-1})},updateProps:u}},e.shouldDrawSeparator=function(t,e){return e<t.length-1},e}return o(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.ItemSeparatorComponent,r=e.horizontal,o=e.data,i=e.keyExtractor,a=e.renderItem;return o&&0!==o.length?l.createElement(c.View,{style:r?{flexDirection:"row"}:{flexDirection:"column"}},o.map((function(e,s){var u=a({item:e,index:s,separators:t.separators(s)});return u?l.createElement(c.View,{key:i(e,s),style:r?{flexDirection:"row"}:{flexDirection:"column"}},u,n&&t.shouldDrawSeparator(o,s)?l.createElement(n,{highlighted:t.isHighlighted(s),vertical:r}):null):null}))):null},e}(l.PureComponent);e.StackView=p},2587:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var c=l(n(0)),u=n(2285),p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.render=function(){return c.createElement("div",i({},u.buildDivProps(this.props)),this.props.children)},e}(c.Component);e.View=p,e.default=p},2588:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventPhase=void 0,function(t){t[t.None=0]="None",t[t.Capturing=1]="Capturing",t[t.AtTarget=2]="AtTarget",t[t.Bubbling=3]="Bubbling"}(e.EventPhase||(e.EventPhase={}))},2589:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2316);Object.defineProperty(e,"StyleSheet",{enumerable:!0,get:function(){return r.StyleSheet}})},2590:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2591),e),o(n(2592),e)},2591:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.TouchableNative=void 0;var l=s(n(0)),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return console.warn("TouchableNative not implemented in web"),l.createElement("div",null,"TouchableNative not implemented in web")},e}(l.Component);e.TouchableNative=c,e.default=c},2592:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2593:function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=59)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),o=n(10),i=n(11),a=n(32),s=n(33),l=n(34),c=n(35),u=n(36),p=n(7),d=n(17),f=n(18),h=n(16),y=n(3),m={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:r.default,Format:o.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:p.default,Class:d.default,Style:f.default,Store:h.default}};e.default=m},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(38),i=n(5),a=n(2),s=n(6),l=String.fromCharCode(0),c=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};c.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"===r(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},c.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},c.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"===r(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},c.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=a(!0,{},t),"object"===r(n)){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!==r(n=this.ops[e-1])))return this.ops.unshift(t),this;if(i(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"===r(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"===r(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},c.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},c.prototype.filter=function(t){return this.ops.filter(t)},c.prototype.forEach=function(t){this.ops.forEach(t)},c.prototype.map=function(t){return this.ops.map(t)},c.prototype.partition=function(t){var e=[],n=[];return this.forEach((function(r){(t(r)?e:n).push(r)})),[e,n]},c.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},c.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+s.length(e):e.delete?t-e.delete:t}),0)},c.prototype.length=function(){return this.reduce((function(t,e){return t+s.length(e)}),0)},c.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],r=s.iterator(this.ops),o=0;o<e&&r.hasNext();){var i;o<t?i=r.next(t-o):(i=r.next(e-o),n.push(i)),o+=s.length(i)}return new c(n)},c.prototype.compose=function(t){var e=s.iterator(this.ops),n=s.iterator(t.ops),r=[],o=n.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var a=o.retain;"insert"===e.peekType()&&e.peekLength()<=a;)a-=e.peekLength(),r.push(e.next());o.retain-a>0&&n.next(o.retain-a)}for(var l=new c(r);e.hasNext()||n.hasNext();)if("insert"===n.peekType())l.push(n.next());else if("delete"===e.peekType())l.push(e.next());else{var u=Math.min(e.peekLength(),n.peekLength()),p=e.next(u),d=n.next(u);if("number"==typeof d.retain){var f={};"number"==typeof p.retain?f.retain=u:f.insert=p.insert;var h=s.attributes.compose(p.attributes,d.attributes,"number"==typeof p.retain);if(h&&(f.attributes=h),l.push(f),!n.hasNext()&&i(l.ops[l.ops.length-1],f)){var y=new c(e.rest());return l.concat(y).chop()}}else"number"==typeof d.delete&&"number"==typeof p.retain&&l.push(d)}return l.chop()},c.prototype.concat=function(t){var e=new c(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},c.prototype.diff=function(t,e){if(this.ops===t.ops)return new c;var n=[this,t].map((function(e){return e.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:l;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),r=new c,a=o(n[0],n[1],e),u=s.iterator(this.ops),p=s.iterator(t.ops);return a.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case o.INSERT:n=Math.min(p.peekLength(),e),r.push(p.next(n));break;case o.DELETE:n=Math.min(e,u.peekLength()),u.next(n),r.delete(n);break;case o.EQUAL:n=Math.min(u.peekLength(),p.peekLength(),e);var a=u.next(n),l=p.next(n);i(a.insert,l.insert)?r.retain(n,s.attributes.diff(a.attributes,l.attributes)):r.push(l).delete(n)}e-=n}})),r.chop()},c.prototype.eachLine=function(t,e){e=e||"\n";for(var n=s.iterator(this.ops),r=new c,o=0;n.hasNext();){if("insert"!==n.peekType())return;var i=n.peek(),a=s.length(i)-n.peekLength(),l="string"==typeof i.insert?i.insert.indexOf(e,a)-a:-1;if(l<0)r.push(n.next());else if(l>0)r.push(n.next(l));else{if(!1===t(r,n.next(1).attributes||{},o))return;o+=1,r=new c}}r.length()>0&&t(r,{},o)},c.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=s.iterator(this.ops),r=s.iterator(t.ops),o=new c;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())o.push(r.next());else{var i=Math.min(n.peekLength(),r.peekLength()),a=n.next(i),l=r.next(i);if(a.delete)continue;l.delete?o.push(l):o.retain(i,s.attributes.transform(a.attributes,l.attributes,e))}else o.retain(s.length(n.next()));return o.chop()},c.prototype.transformPosition=function(t,e){e=!!e;for(var n=s.iterator(this.ops),r=0;n.hasNext()&&r<=t;){var o=n.peekLength(),i=n.peekType();n.next(),"delete"!==i?("insert"===i&&(r<t||!e)&&(t+=o),r+=o):t-=Math.min(o,t-r)}return t},t.exports=c},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},c=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,n=o.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;for(e in t);return void 0===e||o.call(t,e)},u=function(t,e){a&&"__proto__"===e.name?a(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},p=function(t,e){if("__proto__"===e){if(!o.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,n,o,i,a,s,d=arguments[0],f=1,h=arguments.length,y=!1;for("boolean"==typeof d&&(y=d,d=arguments[1]||{},f=2),(null==d||"object"!==r(d)&&"function"!=typeof d)&&(d={});f<h;++f)if(null!=(e=arguments[f]))for(n in e)o=p(d,n),d!==(i=p(e,n))&&(y&&i&&(c(i)||(a=l(i)))?(a?(a=!1,s=o&&l(o)?o:[]):s=o&&c(o)?o:{},u(d,{name:n,newValue:t(y,s,i)})):void 0!==i&&u(d,{name:n,newValue:i}));return d}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.register=e.query=e.find=e.create=e.Scope=e.DATA_KEY=e.ParchmentError=void 0;var i=function(t){function e(e){var n=this;return e="[Parchment] "+e,(n=t.call(this,e)||this).message=e,n.name=n.constructor.name,n}return o(e,t),e}(Error);e.ParchmentError=i;var a,s={},l={},c={},u={};function p(t,e){var n;if(void 0===e&&(e=a.ANY),"string"==typeof t)n=u[t]||s[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=u.text;else if("number"==typeof t)t&a.LEVEL&a.BLOCK?n=u.block:t&a.LEVEL&a.INLINE&&(n=u.inline);else if(t instanceof HTMLElement){var r=(t.getAttribute("class")||"").split(/\s+/);for(var o in r)if(n=l[r[o]])break;n=n||c[t.tagName]}return null==n?null:e&a.LEVEL&n.scope&&e&a.TYPE&n.scope?n:null}e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(a=e.Scope||(e.Scope={})),e.create=function(t,e){var n=p(t);if(null==n)throw new i("Unable to create "+t+" blot");var r=n,o=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:r.create(e);return new r(o,e)},e.find=function t(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[e.DATA_KEY]?n[e.DATA_KEY].blot:r?t(n.parentNode,r):null},e.query=p,e.register=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length>1)return e.map((function(e){return t(e)}));var r=e[0];if("string"!=typeof r.blotName&&"string"!=typeof r.attrName)throw new i("Invalid definition");if("abstract"===r.blotName)throw new i("Cannot register abstract class");if(u[r.blotName||r.attrName]=r,"string"==typeof r.keyName)s[r.keyName]=r;else if(null!=r.className&&(l[r.className]=r),null!=r.tagName){Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(t){return t.toUpperCase()})):r.tagName=r.tagName.toUpperCase();var o=Array.isArray(r.tagName)?r.tagName:[r.tagName];o.forEach((function(t){null!=c[t]&&null!=r.className||(c[t]=r)}))}return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(){"use strict";function e(t,e){return null!=e&&t instanceof e}var r,o,i;try{r=Map}catch(t){r=function(){}}try{o=Set}catch(t){o=function(){}}try{i=Promise}catch(t){i=function(){}}function a(s,c,u,p,d){"object"===n(c)&&(u=c.depth,p=c.prototype,d=c.includeNonEnumerable,c=c.circular);var f=[],h=[],y=void 0!==t;return void 0===c&&(c=!0),void 0===u&&(u=1/0),function s(u,m){if(null===u)return null;if(0===m)return u;var b,g;if("object"!=n(u))return u;if(e(u,r))b=new r;else if(e(u,o))b=new o;else if(e(u,i))b=new i((function(t,e){u.then((function(e){t(s(e,m-1))}),(function(t){e(s(t,m-1))}))}));else if(a.__isArray(u))b=[];else if(a.__isRegExp(u))b=new RegExp(u.source,l(u)),u.lastIndex&&(b.lastIndex=u.lastIndex);else if(a.__isDate(u))b=new Date(u.getTime());else{if(y&&t.isBuffer(u))return b=t.allocUnsafe?t.allocUnsafe(u.length):new t(u.length),u.copy(b),b;e(u,Error)?b=Object.create(u):void 0===p?(g=Object.getPrototypeOf(u),b=Object.create(g)):(b=Object.create(p),g=p)}if(c){var v=f.indexOf(u);if(-1!=v)return h[v];f.push(u),h.push(b)}for(var C in e(u,r)&&u.forEach((function(t,e){var n=s(e,m-1),r=s(t,m-1);b.set(n,r)})),e(u,o)&&u.forEach((function(t){var e=s(t,m-1);b.add(e)})),u){var O;g&&(O=Object.getOwnPropertyDescriptor(g,C)),O&&null==O.set||(b[C]=s(u[C],m-1))}if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(u);for(C=0;C<T.length;C++){var x=T[C];(!(S=Object.getOwnPropertyDescriptor(u,x))||S.enumerable||d)&&(b[x]=s(u[x],m-1),S.enumerable||Object.defineProperty(b,x,{enumerable:!1}))}}if(d){var P=Object.getOwnPropertyNames(u);for(C=0;C<P.length;C++){var S,j=P[C];(S=Object.getOwnPropertyDescriptor(u,j))&&S.enumerable||(b[j]=s(u[j],m-1),Object.defineProperty(b,j,{enumerable:!1}))}}return b}(s,u)}function s(t){return Object.prototype.toString.call(t)}function l(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},a.__objToStr=s,a.__isDate=function(t){return"object"===n(t)&&"[object Date]"===s(t)},a.__isArray=function(t){return"object"===n(t)&&"[object Array]"===s(t)},a.__isRegExp=function(t){return"object"===n(t)&&"[object RegExp]"===s(t)},a.__getRegExpFlags=l,a}();"object"===n(e)&&e.exports&&(e.exports=r)}).call(this,n(50).Buffer,n(55)(t))},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(19),i=n(40),a=n(44),s=n(46),l=n(47),c=n(49),u=Date.prototype.getTime;function p(t){return null==t}function d(t){return!(!t||"object"!==r(t)||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,f){var h=f||{};return!!(h.strict?a(e,n):e===n)||(!e||!n||"object"!==r(e)&&"object"!==r(n)?h.strict?a(e,n):e==n:function(e,n,a){var f,h;if(r(e)!==r(n))return!1;if(p(e)||p(n))return!1;if(e.prototype!==n.prototype)return!1;if(i(e)!==i(n))return!1;var y=s(e),m=s(n);if(y!==m)return!1;if(y||m)return e.source===n.source&&l(e)===l(n);if(c(e)&&c(n))return u.call(e)===u.call(n);var b=d(e),g=d(n);if(b!==g)return!1;if(b||g){if(e.length!==n.length)return!1;for(f=0;f<e.length;f++)if(e[f]!==n[f])return!1;return!0}if(r(e)!==r(n))return!1;try{var v=o(e),C=o(n)}catch(e){return!1}if(v.length!==C.length)return!1;for(v.sort(),C.sort(),f=v.length-1;f>=0;f--)if(v[f]!=C[f])return!1;for(f=v.length-1;f>=0;f--)if(!t(e[h=v[f]],n[h],a))return!1;return!0}(e,n,h))}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(5),i=n(2),a={attributes:{compose:function(t,e,n){"object"!==r(t)&&(t={}),"object"!==r(e)&&(e={});var o=i(!0,{},e);for(var a in n||(o=Object.keys(o).reduce((function(t,e){return null!=o[e]&&(t[e]=o[e]),t}),{})),t)void 0!==t[a]&&void 0===e[a]&&(o[a]=t[a]);return Object.keys(o).length>0?o:void 0},diff:function(t,e){"object"!==r(t)&&(t={}),"object"!==r(e)&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,r){return o(t[r],e[r])||(n[r]=void 0===e[r]?null:e[r]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!==r(t))return e;if("object"===r(e)){if(!n)return e;var o=Object.keys(e).reduce((function(n,r){return void 0===t[r]&&(n[r]=e[r]),n}),{});return Object.keys(o).length>0?o:void 0}}},iterator:function(t){return new s(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function s(t){this.ops=t,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,r=a.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"string"==typeof e.insert?o.insert=e.insert.substr(n,t):o.insert=e.insert,o}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)}return[]},t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var o=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|o:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=r.query(t,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=o},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(19),i="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,c=l&&function(){var t={};try{for(var e in l(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,n,r){var o;(!(e in t)||"function"==typeof(o=r)&&"[object Function]"===a.call(o)&&r())&&(c?l(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},p=function(t,e){var n=arguments.length>2?arguments[2]:{},r=o(e);i&&(r=s.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)u(t,r[a],e[r[a]],n[r[a]])};p.supportsDescriptors=!!c,t.exports=p},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),a=n(15),s=n(3),l=function(t){function e(e){var n=t.call(this,e)||this;return n.build(),n}return o(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var n=c(e);t.insertBefore(n,t.children.head||void 0)}catch(t){if(t instanceof s.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,n){t.deleteAt(e,n)}))},e.prototype.descendant=function(t,n){var r=this.children.find(n),o=r[0],i=r[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,i]:o instanceof e?o.descendant(t,i):[null,-1]},e.prototype.descendants=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var o=[],i=r;return this.children.forEachAt(n,r,(function(n,r,a){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&o.push(n),n instanceof e&&(o=o.concat(n.descendants(t,r,i))),i-=a})),o},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,n,r){this.children.forEachAt(t,e,(function(t,e,o){t.formatAt(e,o,n,r)}))},e.prototype.insertAt=function(t,e,n){var r=this.children.find(t),o=r[0],i=r[1];if(o)o.insertAt(i,e,n);else{var a=null==n?s.create("text",e):s.create(e,n);this.appendChild(a)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new s.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(n){t.insertBefore(n,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var n=s.create(this.statics.defaultChild);this.appendChild(n),n.optimize(e)}else this.remove()},e.prototype.path=function(t,n){void 0===n&&(n=!1);var r=this.children.find(t,n),o=r[0],i=r[1],a=[[this,t]];return o instanceof e?a.concat(o.path(i,n)):(null!=o&&a.push([o,i]),a)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(n){n instanceof e&&n.moveChildren(this),t.prototype.replace.call(this,n)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),(function(t,r,o){t=t.split(r,e),n.appendChild(t)})),n},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var n=this,r=[],o=[];t.forEach((function(t){t.target===n.domNode&&"childList"===t.type&&(r.push.apply(r,t.addedNodes),o.push.apply(o,t.removedNodes))})),o.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=s.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}})),r.filter((function(t){return t.parentNode==n.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=s.find(t.nextSibling));var r=c(t);r.next==e&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,e||void 0))}))},e}(a.default);function c(t){var e=s.find(t);if(null==e)try{e=s.create(t)}catch(n){e=s.create(s.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),a=n(16),s=n(9),l=n(3),c=function(t){function e(e){var n=t.call(this,e)||this;return n.attributes=new a.default(n.domNode),n}return o(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var n=l.query(t);n instanceof i.default?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,n){var r=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(r),r},e.prototype.update=function(e,n){var r=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===r.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(n,r){var o=t.prototype.wrap.call(this,n,r);return o instanceof e&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},e}(s.default);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),a=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=a.Scope.INLINE_BLOT,e}(i.default);e.default=s},function(t,e,n){"use strict";var r=n(21);t.exports=function(){return r()&&!!Symbol.toStringTag}},function(t,e,n){"use strict";var r=n(42);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";var r=n(13),o=n(23),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||r.call(a,i),l=o("%Object.getOwnPropertyDescriptor%",!0),c=o("%Object.defineProperty%",!0),u=o("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=s(r,a,arguments);if(l&&c){var n=l(e,"length");n.configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))})}return e};var p=function(){return s(r,i,arguments)};c?c(t.exports,"apply",{value:p}):t.exports.apply=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(t){this.domNode=t,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return r.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,n,o){var i=this.isolate(t,e);if(null!=r.query(n,r.Scope.BLOT)&&o)i.wrap(n,o);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var a=r.create(this.statics.scope);i.wrap(a),a.format(n,o)}},t.prototype.insertAt=function(t,e,n){var o=null==n?r.create("text",e):r.create(e,n),i=this.split(t);this.parent.insertBefore(o,i)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var n=null;t.children.insertBefore(this,e),null!=e&&(n=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,n),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var n=this.split(t);return n.split(e),n},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var n="string"==typeof t?r.create(t,e):t;return n.replace(this),n},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var n="string"==typeof t?r.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},t.blotName="abstract",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),o=n(17),i=n(18),a=n(3),s=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=r.default.keys(this.domNode),n=o.default.keys(this.domNode),s=i.default.keys(this.domNode);e.concat(n).concat(s).forEach((function(e){var n=a.query(e,a.Scope.ATTRIBUTE);n instanceof r.default&&(t.attributes[n.attrName]=n)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(n){var r=e.attributes[n].value(e.domNode);t.format(n,r)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,n){return e[n]=t.attributes[n].value(t.domNode),e}),{})},t}();e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){i(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(i(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(n(7).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function i(t){var e=t.split("-"),n=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+n}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(n(7).default);e.default=a},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(20),i=Object.keys,a=i?function(t){return i(t)}:n(39),s=Object.keys;a.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?s(r.call(t)):s(t)}):Object.keys=a,Object.keys||a},t.exports=a},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.prototype.toString;t.exports=function(t){var e=o.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===r(t)&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===o.call(t.callee)),n}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===r(Symbol.iterator))return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=n(23),o=n(14),i=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&i(t,".prototype.")>-1?o(n):n}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=SyntaxError,i=Function,a=TypeError,s=function(t){try{return i('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,p=n(41)(),d=Object.getPrototypeOf||function(t){return t.__proto__},f={},h="undefined"==typeof Uint8Array?void 0:d(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):void 0,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?d((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?d((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):void 0,"%Symbol%":p?Symbol:void 0,"%SyntaxError%":o,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(13),g=n(43),v=b.call(Function.call,Array.prototype.concat),C=b.call(Function.apply,Array.prototype.splice),O=b.call(Function.call,String.prototype.replace),T=b.call(Function.call,String.prototype.slice),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,S=function(t){var e=T(t,0,1),n=T(t,-1);if("%"===e&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return O(t,x,(function(t,e,n,o){r[r.length]=n?O(o,P,"$1"):e||t})),r},j=function(t,e){var n,r=t;if(g(m,r)&&(r="%"+(n=m[r])[0]+"%"),g(y,r)){var i=y[r];if(i===f&&(i=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(n=d(o.prototype))}return y[e]=n,n}(r)),void 0===i&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');var n=S(t),r=n.length>0?n[0]:"",i=j("%"+r+"%",e),s=i.name,c=i.value,u=!1,p=i.alias;p&&(r=p[0],C(n,v([0,1],p)));for(var d=1,f=!0;d<n.length;d+=1){var h=n[d],m=T(h,0,1),b=T(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===b||"'"===b||"`"===b)&&m!==b)throw new o("property names with quotes must have matching quotes");if("constructor"!==h&&f||(u=!0),g(y,s="%"+(r+="."+h)+"%"))c=y[s];else if(null!=c){if(!(h in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var O=l(c,h);c=(f=!!O)&&"get"in O&&!("originalValue"in O.get)?O.get:c[h]}else f=g(c,h),c=c[h];f&&!u&&(y[s]=c)}}return c}},function(t,e,n){"use strict";var r=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!r(t)||!r(e))}},function(t,e,n){"use strict";var r=n(24);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},function(t,e,n){"use strict";var r=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,n){"use strict";var r=n(26),o=n(8).supportsDescriptors,i=Object.getOwnPropertyDescriptor,a=TypeError;t.exports=function(){if(!o)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=i(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return r}},function(t,e,n){"use strict";(function(t){}).call(this,n(56))},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var n=o?o+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},s.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,a),!0}for(c=1,l=new Array(p-1);c<p;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),p){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,r);break;default:if(!l)for(d=1,l=new Array(p-1);d<p;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){var r=new a(e,n||this),i=o?o+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},s.prototype.once=function(t,e,n){var r=new a(e,n||this,!0),i=o?o+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},s.prototype.removeListener=function(t,e,n,r){var a=o?o+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new i:delete this._events[a]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=o,s.EventEmitter=s,t.exports=s},function(t,e,n){var r=n(57),o=n(58);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,r=this.iterator();n=r();){var o=n.length();if(t<o||e&&t===o&&(null==n.next||0!==n.next.length()))return[n,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},t.prototype.forEachAt=function(t,e,n){if(!(e<=0))for(var r,o=this.find(t),i=o[0],a=t-o[1],s=this.iterator(i);(r=s())&&a<t+e;){var l=r.length();t>a?n(r,t-a,Math.min(e,a+l-t)):n(r,0,Math.min(l,t+e-a)),a+=l}},t.prototype.map=function(t){return this.reduce((function(e,n){return e.push(t(n)),e}),[])},t.prototype.reduce=function(t,e){for(var n,r=this.iterator();n=r();)e=t(e,n);return e},t}();e.default=r},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),a=n(3),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll=n,n.observer=new MutationObserver((function(t){n.update(t)})),n.observer.observe(n.domNode,s),n.attach(),n}return o(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,n)},e.prototype.formatAt=function(e,n,r,o){this.update(),t.prototype.formatAt.call(this,e,n,r,o)},e.prototype.insertAt=function(e,n,r){this.update(),t.prototype.insertAt.call(this,e,n,r)},e.prototype.optimize=function(e,n){var r=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var o=[].slice.call(this.observer.takeRecords());o.length>0;)e.push(o.pop());for(var s=function(t,e){void 0===e&&(e=!0),null!=t&&t!==r&&null!=t.domNode.parentNode&&(null==t.domNode[a.DATA_KEY].mutations&&(t.domNode[a.DATA_KEY].mutations=[]),e&&s(t.parent))},l=function(t){null!=t.domNode[a.DATA_KEY]&&null!=t.domNode[a.DATA_KEY].mutations&&(t instanceof i.default&&t.children.forEach(l),t.optimize(n))},c=e,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(t){var e=a.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(a.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=a.find(t,!1);s(e,!1),e instanceof i.default&&e.children.forEach((function(t){s(t,!1)}))}))):"attributes"===t.type&&s(e.prev)),s(e))})),this.children.forEach(l),o=(c=[].slice.call(this.observer.takeRecords())).slice();o.length>0;)e.push(o.pop())}},e.prototype.update=function(e,n){var r=this;void 0===n&&(n={}),(e=e||this.observer.takeRecords()).map((function(t){var e=a.find(t.target,!0);return null==e?null:null==e.domNode[a.DATA_KEY].mutations?(e.domNode[a.DATA_KEY].mutations=[t],e):(e.domNode[a.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==r&&null!=t.domNode[a.DATA_KEY]&&t.update(t.domNode[a.DATA_KEY].mutations||[],n)})),null!=this.domNode[a.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,n),this.optimize(e,n)},e.blotName="scroll",e.defaultChild="block",e.scope=a.Scope.BLOCK_BLOT,e.tagName="DIV",e}(i.default);e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),a=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(n){if(n.tagName!==e.tagName)return t.formats.call(this,n)},e.prototype.format=function(n,r){var o=this;n!==this.statics.blotName||r?t.prototype.format.call(this,n,r):(this.children.forEach((function(t){t instanceof i.default||(t=t.wrap(e.blotName,!0)),o.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,n,r,o){null!=this.formats()[r]||a.query(r,a.Scope.ATTRIBUTE)?this.isolate(e,n).format(r,o):t.prototype.formatAt.call(this,e,n,r,o)},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}(r,o.formats())&&(o.moveChildren(this),o.remove())},e.blotName="inline",e.scope=a.Scope.INLINE_BLOT,e.tagName="SPAN",e}(i.default);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),a=n(3),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(n){var r=a.query(e.blotName).tagName;if(n.tagName!==r)return t.formats.call(this,n)},e.prototype.format=function(n,r){null!=a.query(n,a.Scope.BLOCK)&&(n!==this.statics.blotName||r?t.prototype.format.call(this,n,r):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,n,r,o){null!=a.query(r,a.Scope.BLOCK)?this.format(r,o):t.prototype.formatAt.call(this,e,n,r,o)},e.prototype.insertAt=function(e,n,r){if(null==r||null!=a.query(n,a.Scope.INLINE))t.prototype.insertAt.call(this,e,n,r);else{var o=this.split(e),i=a.create(n,r);o.parent.insertBefore(i,o)}},e.prototype.update=function(e,n){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,n)},e.blotName="block",e.scope=a.Scope.BLOCK_BLOT,e.tagName="P",e}(i.default);e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(t){},e.prototype.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},e.prototype.formatAt=function(e,n,r,o){0===e&&n===this.length()?this.format(r,o):t.prototype.formatAt.call(this,e,n,r,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(n(11).default);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),a=n(3),s=function(t){function e(e){var n=t.call(this,e)||this;return n.text=n.statics.value(n.domNode),n}return o(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,n,r){null==r?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,r)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=a.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},e.prototype.update=function(t,e){var n=this;t.some((function(t){return"characterData"===t.type&&t.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=a.Scope.INLINE_BLOT,e}(i.default);e.default=s},function(t,e){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:r.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var r=n.indexOf(t,e);return-1!==r&&r===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(e=n[i],t.call(o,e,i,n))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){function n(t,e,a){if(t==e)return t?[[0,t]]:[];(a<0||t.length<a)&&(a=null);var l=o(t,e),c=t.substring(0,l);l=i(t=t.substring(l),e=e.substring(l));var u=t.substring(t.length-l),p=function(t,e){var a;if(!t)return[[1,e]];if(!e)return[[-1,t]];var s=t.length>e.length?t:e,l=t.length>e.length?e:t,c=s.indexOf(l);if(-1!=c)return a=[[1,s.substring(0,c)],[0,l],[1,s.substring(c+l.length)]],t.length>e.length&&(a[0][0]=a[2][0]=-1),a;if(1==l.length)return[[-1,t],[1,e]];var u=function(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;function a(t,e,n){for(var r,a,s,l,c=t.substring(n,n+Math.floor(t.length/4)),u=-1,p="";-1!=(u=e.indexOf(c,u+1));){var d=o(t.substring(n),e.substring(u)),f=i(t.substring(0,n),e.substring(0,u));p.length<f+d&&(p=e.substring(u-f,u)+e.substring(u,u+d),r=t.substring(0,n-f),a=t.substring(n+d),s=e.substring(0,u-f),l=e.substring(u+d))}return 2*p.length>=t.length?[r,a,s,l,p]:null}var s,l,c,u,p,d=a(n,r,Math.ceil(n.length/4)),f=a(n,r,Math.ceil(n.length/2));return d||f?(s=f?d&&d[4].length>f[4].length?d:f:d,t.length>e.length?(l=s[0],c=s[1],u=s[2],p=s[3]):(u=s[0],p=s[1],l=s[2],c=s[3]),[l,c,u,p,s[4]]):null}(t,e);if(u){var p=u[0],d=u[1],f=u[2],h=u[3],y=u[4],m=n(p,f),b=n(d,h);return m.concat([[0,y]],b)}return function(t,e){for(var n=t.length,o=e.length,i=Math.ceil((n+o)/2),a=i,s=2*i,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var p=n-o,d=p%2!=0,f=0,h=0,y=0,m=0,b=0;b<i;b++){for(var g=-b+f;g<=b-h;g+=2){for(var v=a+g,C=(S=g==-b||g!=b&&l[v-1]<l[v+1]?l[v+1]:l[v-1]+1)-g;S<n&&C<o&&t.charAt(S)==e.charAt(C);)S++,C++;if(l[v]=S,S>n)h+=2;else if(C>o)f+=2;else if(d&&(x=a+p-g)>=0&&x<s&&-1!=c[x]){var O=n-c[x];if(S>=O)return r(t,e,S,C)}}for(var T=-b+y;T<=b-m;T+=2){for(var x=a+T,P=(O=T==-b||T!=b&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-T;O<n&&P<o&&t.charAt(n-O-1)==e.charAt(o-P-1);)O++,P++;if(c[x]=O,O>n)m+=2;else if(P>o)y+=2;else if(!d&&(v=a+p-T)>=0&&v<s&&-1!=l[v]){var S=l[v];if(C=a+S-v,S>=(O=n-O))return r(t,e,S,C)}}}return[[-1,t],[1,e]]}(t,e)}(t=t.substring(0,t.length-l),e=e.substring(0,e.length-l));return c&&p.unshift([0,c]),u&&p.push([0,u]),function t(e){e.push([0,""]);for(var n,r=0,a=0,s=0,l="",c="";r<e.length;)switch(e[r][0]){case 1:s++,c+=e[r][1],r++;break;case-1:a++,l+=e[r][1],r++;break;case 0:a+s>1?(0!==a&&0!==s&&(0!==(n=o(c,l))&&(r-a-s>0&&0==e[r-a-s-1][0]?e[r-a-s-1][1]+=c.substring(0,n):(e.splice(0,0,[0,c.substring(0,n)]),r++),c=c.substring(n),l=l.substring(n)),0!==(n=i(c,l))&&(e[r][1]=c.substring(c.length-n)+e[r][1],c=c.substring(0,c.length-n),l=l.substring(0,l.length-n))),0===a?e.splice(r-s,a+s,[1,c]):0===s?e.splice(r-a,a+s,[-1,l]):e.splice(r-a-s,a+s,[-1,l],[1,c]),r=r-a-s+(a?1:0)+(s?1:0)+1):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,a=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),u=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),u=!0)),r++;u&&t(e)}(p),null!=a&&(p=function(t,e){var n=function(t,e){if(0===e)return[0,t];for(var n=0,r=0;r<t.length;r++){var o=t[r];if(-1===o[0]||0===o[0]){var i=n+o[1].length;if(e===i)return[r+1,t];if(e<i){t=t.slice();var a=e-n,s=[o[0],o[1].slice(0,a)],l=[o[0],o[1].slice(a)];return t.splice(r,1,s,l),[r+1,t]}n=i}}throw new Error("cursor_pos is out of bounds!")}(t,e),r=n[1],o=n[0],i=r[o],a=r[o+1];if(null==i)return t;if(0!==i[0])return t;if(null!=a&&i[1]+a[1]===a[1]+i[1])return r.splice(o,2,a,i),s(r,o,2);if(null!=a&&0===a[1].indexOf(i[1])){r.splice(o,2,[a[0],i[1]],[0,i[1]]);var l=a[1].slice(i[1].length);return l.length>0&&r.splice(o+2,0,[a[0],l]),s(r,o,3)}return t}(p,a)),function(t){for(var e=!1,n=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},r=2;r<t.length;r+=1)0===t[r-2][0]&&(o=t[r-2][1]).charCodeAt(o.length-1)>=55296&&o.charCodeAt(o.length-1)<=56319&&-1===t[r-1][0]&&n(t[r-1][1])&&1===t[r][0]&&n(t[r][1])&&(e=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));var o;if(!e)return t;var i=[];for(r=0;r<t.length;r+=1)t[r][1].length>0&&i.push(t[r]);return i}(p)}function r(t,e,r,o){var i=t.substring(0,r),a=e.substring(0,o),s=t.substring(r),l=e.substring(o),c=n(i,a),u=n(s,l);return c.concat(u)}function o(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o}function i(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o}var a=n;function s(t,e,n){for(var r=e+n-1;r>=0&&r>=e-1;r--)if(r+1<t.length){var o=t[r],i=t[r+1];o[0]===i[1]&&t.splice(r,2,[o[0],o[1]+i[1]])}return t}a.INSERT=1,a.DELETE=-1,a.EQUAL=0,t.exports=a},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=n(20),l=Object.prototype.propertyIsEnumerable,c=!l.call({toString:null},"toString"),u=l.call((function(){}),"prototype"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===r(window[t]))try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();o=function(t){var e=null!==t&&"object"===r(t),n="[object Function]"===a.call(t),o=s(t),l=e&&"[object String]"===a.call(t),f=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var y=u&&n;if(l&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)f.push(String(m));if(o&&t.length>0)for(var b=0;b<t.length;++b)f.push(String(b));else for(var g in t)y&&"prototype"===g||!i.call(t,g)||f.push(String(g));if(c)for(var v=function(t){if("undefined"==typeof window||!h)return d(t);try{return d(t)}catch(t){return!1}}(t),C=0;C<p.length;++C)v&&"constructor"===p[C]||!i.call(t,p[C])||f.push(p[C]);return f}}t.exports=o},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(12)(),i=n(22)("Object.prototype.toString"),a=function(t){return!(o&&t&&"object"===r(t)&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},s=function(t){return!!a(t)||null!==t&&"object"===r(t)&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},l=function(){return a(arguments)}();a.isLegacyArguments=s,t.exports=l?a:s},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="undefined"!=typeof Symbol&&Symbol,i=n(21);t.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"===r(o("foo"))&&"symbol"===r(Symbol("bar"))&&i()}},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError(r+e);for(var n,a=o.call(arguments,1),s=function(){if(this instanceof n){var r=e.apply(this,a.concat(o.call(arguments)));return Object(r)===r?r:this}return e.apply(t,a.concat(o.call(arguments)))},l=Math.max(0,e.length-a.length),c=[],u=0;u<l;u++)c.push("$"+u);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var p=function(){};p.prototype=e.prototype,n.prototype=new p,p.prototype=null}return n}},function(t,e,n){"use strict";var r=n(13);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=n(8),o=n(14),i=n(24),a=n(25),s=n(45),l=o(a(),Object);r(l,{getPolyfill:a,implementation:i,shim:s}),t.exports=l},function(t,e,n){"use strict";var r=n(25),o=n(8);t.exports=function(){var t=r();return o(Object,{is:t},{is:function(){return Object.is!==t}}),t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i,a,s,l=n(22),c=n(12)();if(c){o=l("Object.prototype.hasOwnProperty"),i=l("RegExp.prototype.exec"),a={};var u=function(){throw a};s={toString:u,valueOf:u},"symbol"===r(Symbol.toPrimitive)&&(s[Symbol.toPrimitive]=u)}var p=l("Object.prototype.toString"),d=Object.getOwnPropertyDescriptor;t.exports=c?function(t){if(!t||"object"!==r(t))return!1;var e=d(t,"lastIndex");if(!e||!o(e,"value"))return!1;try{i(t,s)}catch(t){return t===a}}:function(t){return!(!t||"object"!==r(t)&&"function"!=typeof t)&&"[object RegExp]"===p(t)}},function(t,e,n){"use strict";var r=n(8),o=n(14),i=n(26),a=n(27),s=n(48),l=o(i);r(l,{getPolyfill:a,implementation:i,shim:s}),t.exports=l},function(t,e,n){"use strict";var r=n(8).supportsDescriptors,o=n(27),i=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=l(c),n=i(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Date.prototype.getDay,i=Object.prototype.toString,a=n(12)();t.exports=function(t){return"object"===r(t)&&null!==t&&(a?function(t){try{return o.call(t),!0}catch(t){return!1}}(t):"[object Date]"===i.call(t))}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(52),o=n(53),i=n(54);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(e,n),o=(t=s(t,r)).write(e,n);return o!==r&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function p(t,e){if(u(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function h(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,n);case"utf8":case"utf-8":return j(this,e,n);case"ascii":return _(this,e,n);case"latin1":case"binary":return w(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,o){var i,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var u=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var p=!0,d=0;d<l;d++)if(c(t,i+d)!==c(e,d)){p=!1;break}if(p)return i}return-1}function v(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function C(t,e,n,r){return z(F(e,t.length-n),t,n,r)}function O(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return O(t,e,n,r)}function x(t,e,n,r){return z(U(e),t,n,r)}function P(t,e,n,r){return z(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function j(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,l,c=t[o],u=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=n)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(i=t[o+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(l=(15&c)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,p=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function _(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function w(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function E(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=H(t[i]);return o}function k(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,o,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function A(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function M(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,r,i){return i||M(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,i){return i||M(t,0,n,8),o.write(t,e,n,r,52,8),n+8}e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return p(null,t)},l.allocUnsafeSlow=function(t){return p(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?j(this,0,t):y.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),c=this.slice(r,o),u=t.slice(e,n),p=0;p<s;++p)if(c[p]!==u[p]){i=c[p],a=u[p];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},l.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);R(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);R(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=l.isBuffer(t)?t:F(new l(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(51))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),u=0,p=s>0?a-4:a;for(n=0;n<p;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(u(t,a,a+16383>s?s:a+16383));return 1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,c=l>>1,u=-7,p=n?o-1:0,d=n?-1:1,f=t[e+p];for(p+=d,i=f&(1<<-u)-1,f>>=-u,u+=s;u>0;i=256*i+t[e+p],p+=d,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;u>0;a=256*a+t[e+p],p+=d,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=c}return(f?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,p=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,h=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=u?(s=0,a=u):a+p>=1?(s=(e*l-1)*Math.pow(2,o),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;t[n+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+f]=255&a,f+=h,a/=256,c-=8);t[n+f-h]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&f())}function f(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||u||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=(n(37),n(1)),a=n.n(i),s=n(6),l=n.n(s),c=n(2),u=n.n(c);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(i,t);var e,n,r,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}(i);function i(){return d(this,i),o.apply(this,arguments)}return e=i,r=[{key:"value",value:function(){}}],(n=[{key:"insertInto",value:function(t,e){0===t.children.length?h(b(i.prototype),"insertInto",this).call(this,t,e):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}])&&f(e.prototype,n),r&&f(e,r),i}(o.a.Embed);g.blotName="break",g.tagName="BR";var v=g;function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}(n);function n(){return O(this,n),e.apply(this,arguments)}return n}(o.a.Text);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(a,t);var e,n,r,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}(a);function a(){return _(this,a),i.apply(this,arguments)}return e=a,r=[{key:"compare",value:function(t,e){var n=a.order.indexOf(t),r=a.order.indexOf(e);return n>=0||r>=0?n-r:t===e?0:t<e?-1:1}}],(n=[{key:"formatAt",value:function(t,e,n,r){if(a.compare(this.statics.blotName,n)<0&&o.a.query(n,o.a.Scope.BLOT)){var i=this.isolate(t,e);r&&i.wrap(n,r)}else E(R(a.prototype),"formatAt",this).call(this,t,e,n,r)}},{key:"optimize",value:function(t){if(E(R(a.prototype),"optimize",this).call(this,t),this.parent instanceof a&&a.compare(this.statics.blotName,this.parent.statics.blotName)>0){var e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}])&&w(e.prototype,n),r&&w(e,r),a}(o.a.Inline);A.allowedChildren=[A,o.a.Embed,S],A.order=["cursor","inline","underline","strike","italic","bold","script","link","code"];var D=A;function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e,n){return e&&N(t.prototype,e),n&&N(t,n),t}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=K(t);if(e){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){F(n,t);var e=U(n);function n(){return B(this,n),e.apply(this,arguments)}return L(n,[{key:"attach",value:function(){H(K(n.prototype),"attach",this).call(this),this.attributes=new o.a.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.a).insert(this.value(),u()(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var n=o.a.query(t,o.a.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,r){this.format(n,r)}},{key:"insertAt",value:function(t,e,r){if("string"==typeof e&&e.endsWith("\n")){var i=o.a.create(W.blotName);this.parent.insertBefore(i,0===t?this:this.next),i.insertAt(0,e.slice(0,-1))}else H(K(n.prototype),"insertAt",this).call(this,t,e,r)}}]),n}(o.a.Embed);V.scope=o.a.Scope.BLOCK_BLOT;var W=function(t){F(n,t);var e=U(n);function n(t){var r;return B(this,n),(r=e.call(this,t)).cache={},r}return L(n,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(o.a.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),q(e))}),new a.a).insert("\n",q(this))),this.cache.delta}},{key:"deleteAt",value:function(t,e){H(K(n.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,r,i){e<=0||(o.a.query(r,o.a.Scope.BLOCK)?t+e===this.length()&&this.format(r,i):H(K(n.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),r,i),this.cache={})}},{key:"insertAt",value:function(t,e,r){if(null!=r)return H(K(n.prototype),"insertAt",this).call(this,t,e,r);if(0!==e.length){var o=e.split("\n"),i=o.shift();i.length>0&&(t<this.length()-1||null==this.children.tail?H(K(n.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});var a=this;o.reduce((function(t,e){return(a=a.split(t,!0)).insertAt(0,e),e.length}),t+i.length)}}},{key:"insertBefore",value:function(t,e){var r=this.children.head;H(K(n.prototype),"insertBefore",this).call(this,t,e),r instanceof v&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=H(K(n.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,e){H(K(n.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){H(K(n.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return H(K(n.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){H(K(n.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){var r=this.clone();return 0===t?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var o=H(K(n.prototype),"split",this).call(this,t,e);return this.cache={},o}}]),n}(o.a.Block);function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=u()(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:q(t.parent,e))}function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e,n){return($="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt(t);if(e){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}W.blotName="block",W.tagName="P",W.defaultChild="break",W.allowedChildren=[D,o.a.Embed,S];var rt=function(t){Z(n,t);var e=tt(n);function n(){return X(this,n),e.apply(this,arguments)}return n}(D);rt.blotName="code",rt.tagName="CODE";var ot=function(t){Z(s,t);var e,n,r,i=tt(s);function s(){return X(this,s),i.apply(this,arguments)}return e=s,r=[{key:"create",value:function(t){var e=$(nt(s),"create",this).call(this,t);return e.setAttribute("spellcheck",!1),e}},{key:"formats",value:function(){return!0}}],(n=[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,n){return e.insert(n).insert("\n",t.formats())}),new a.a)}},{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e){var n=Q(this.descendant(S,this.length()-1),1)[0];null!=n&&n.deleteAt(n.length()-1,1),$(nt(s.prototype),"format",this).call(this,t,e)}}},{key:"formatAt",value:function(t,e,n,r){if(0!==e&&null!=o.a.query(n,o.a.Scope.BLOCK)&&(n!==this.statics.blotName||r!==this.statics.formats(this.domNode))){var i=this.newlineIndex(t);if(!(i<0||i>=t+e)){var a=this.newlineIndex(t,!0)+1,l=i-a+1,c=this.isolate(a,l),u=c.next;c.format(n,r),u instanceof s&&u.formatAt(0,t-a+e-l,n,r)}}}},{key:"insertAt",value:function(t,e,n){if(null==n){var r=Q(this.descendant(S,t),2),o=r[0],i=r[1];o.insertAt(i,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var n=this.domNode.textContent.slice(t).indexOf("\n");return n>-1?t+n:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(o.a.create("text","\n")),$(nt(s.prototype),"optimize",this).call(this,t);var e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===e.statics.formats(e.domNode)&&(e.optimize(t),e.moveChildren(this),e.remove())}},{key:"replace",value:function(t){$(nt(s.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=o.a.find(t);null==e?t.parentNode.removeChild(t):e instanceof o.a.Embed?e.remove():e.unwrap()}))}}])&&J(e.prototype,n),r&&J(e,r),s}(W);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e,n){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ot.blotName="code-block",ot.tagName="PRE",ot.TAB="  ";var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(a,t);var e,n,r,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pt(t);if(e){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t)).selection=e,n.textNode=document.createTextNode(a.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return e=a,r=[{key:"value",value:function(){}}],(n=[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0!==this._length)return lt(pt(a.prototype),"format",this).call(this,t,e);for(var n=this,r=0;null!=n&&n.statics.scope!==o.a.Scope.BLOCK_BLOT;)r+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=a.CONTENTS.length,n.optimize(),n.formatAt(r,a.CONTENTS.length,t,e),this._length=0)}},{key:"index",value:function(t,e){return t===this.textNode?0:lt(pt(a.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){lt(pt(a.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t,e,n,r=this.textNode,i=this.selection.getNativeRange();if(null!=i&&i.start.node===r&&i.end.node===r){var s=[r,i.start.offset,i.end.offset];t=s[0],e=s[1],n=s[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==a.CONTENTS){var l=this.textNode.data.split(a.CONTENTS).join("");this.next instanceof S?(t=this.next.domNode,this.next.insertAt(0,l),this.textNode.data=a.CONTENTS):(this.textNode.data=l,this.parent.insertBefore(o.a.create(this.textNode),this),this.textNode=document.createTextNode(a.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=e){var c=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}([e,n].map((function(e){return Math.max(0,Math.min(t.data.length,e-1))})),2);return e=c[0],n=c[1],{startNode:t,startOffset:e,endNode:t,endOffset:n}}}}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var r=this.restore();r&&(e.range=r)}}},{key:"value",value:function(){return""}}])&&st(e.prototype,n),r&&st(e,r),a}(o.a.Embed);dt.blotName="cursor",dt.className="ql-cursor",dt.tagName="span",dt.CONTENTS="\ufeff";var ft=dt,ht=n(4),yt=n.n(ht),mt=n(5),bt=n.n(mt);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tt=/^[ -~]*$/;function xt(t,e){return Object.keys(e).reduce((function(n,r){return null==t[r]||(e[r]===t[r]?n[r]=e[r]:Array.isArray(e[r])?e[r].indexOf(t[r])<0&&(n[r]=e[r].concat([t[r]])):n[r]=[e[r],t[r]]),n}),{})}var Pt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.delta=this.getDelta()}var e,n;return e=t,(n=[{key:"applyDelta",value:function(t){var e=this,n=!1;this.scroll.update();var r=this.scroll.length();return this.scroll.batchStart(),(t=function(t){return t.reduce((function(t,e){if(1===e.insert){var n=yt()(e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=yt()(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var r=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(r,e.attributes)}return t.push(e)}),new a.a)}(t)).reduce((function(t,i){var a=i.retain||i.delete||i.insert.length||1,s=i.attributes||{};if(null!=i.insert){if("string"==typeof i.insert){var c=i.insert;c.endsWith("\n")&&n&&(n=!1,c=c.slice(0,-1)),t>=r&&!c.endsWith("\n")&&(n=!0),e.scroll.insertAt(t,c);var p=vt(e.scroll.line(t),2),d=p[0],f=p[1],h=u()({},q(d));if(d instanceof W){var y=vt(d.descendant(o.a.Leaf,f),1)[0];h=u()(h,q(y))}s=l.a.attributes.diff(h,s)||{}}else if("object"===gt(i.insert)){var m=Object.keys(i.insert)[0];if(null==m)return t;e.scroll.insertAt(t,m,i.insert[m])}r+=a}return Object.keys(s).forEach((function(n){e.scroll.formatAt(t,a,n,s[n])})),t+a}),0),t.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new a.a).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(r).forEach((function(o){if(null==n.scroll.whitelist||n.scroll.whitelist[o]){var i=n.scroll.lines(t,Math.max(e,1)),a=e;i.forEach((function(e){var i=e.length();if(e instanceof ot){var s=t-e.offset(n.scroll),l=e.newlineIndex(s+a)-s+1;e.formatAt(s,l,o,r[o])}else e.format(o,r[o]);a-=i}))}})),this.scroll.optimize(),this.update((new a.a).retain(t).retain(e,yt()(r)))}},{key:"formatText",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(r).forEach((function(o){n.scroll.formatAt(t,e,o,r[o])})),this.update((new a.a).retain(t).retain(e,yt()(r)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new a.a)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===e?this.scroll.path(t).forEach((function(t){var e=vt(t,1)[0];e instanceof W?n.push(e):e instanceof o.a.Leaf&&r.push(e)})):(n=this.scroll.lines(t,e),r=this.scroll.descendants(o.a.Leaf,t,e));var i=[n,r].map((function(t){if(0===t.length)return{};for(var e=q(t.shift());Object.keys(e).length>0;){var n=t.shift();if(null==n)return e;e=xt(q(n),e)}return e}));return u.a.apply(u.a,i)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new a.a).retain(t).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(r).forEach((function(o){n.scroll.formatAt(t,e.length,o,r[o])})),this.update((new a.a).retain(t).insert(e,yt()(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===W.blotName&&!(t.children.length>1)&&t.children.head instanceof v}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),r=vt(this.scroll.line(t+e),2),o=r[0],i=r[1],s=0,l=new a.a;null!=o&&(s=o instanceof ot?o.newlineIndex(i)-i+1:o.length()-i,l=o.delta().slice(i,i+s-1).insert("\n"));var c=this.getContents(t,e+s).diff((new a.a).insert(n).concat(l)),u=(new a.a).retain(t).concat(c);return this.applyDelta(u)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(Tt)&&o.a.find(e[0].target)){var i=o.a.find(e[0].target),s=q(i),l=i.offset(this.scroll),c=e[0].oldValue.replace(ft.CONTENTS,""),u=(new a.a).insert(c),p=(new a.a).insert(i.value()),d=(new a.a).retain(l).concat(u.diff(p,n));t=d.reduce((function(t,e){return e.insert?t.insert(e.insert,s):t.push(e)}),new a.a),this.delta=r.compose(t)}else this.delta=this.getDelta(),t&&bt()(r.compose(t),this.delta)||(t=r.diff(this.delta,n));return t}}])&&Ot(e.prototype,n),t}(),St=n(29),jt=n.n(St),_t=["error","warn","log","info"],wt="warn";function Et(t){if(_t.indexOf(t)<=_t.indexOf(wt)){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console)[t].apply(e,r)}}function kt(t){return _t.reduce((function(e,n){return e[n]=Et.bind(console,n,t),e}),{})}Et.level=kt.level=function(t){wt=t};var It=kt;function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt=It("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var n;t.__quill&&t.__quill.emitter&&(n=t.__quill.emitter).handleDOM.apply(n,e)}))}))}));var Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(o,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nt(t);if(e){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bt(this,n)}}(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).listeners={},t.on("error",Lt.error),t}return e=o,(n=[{key:"emit",value:function(){Lt.log.apply(Lt,arguments),Dt(Nt(o.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(this.listeners[t.type]||[]).forEach((function(e){var r=e.node,o=e.handler;(t.target===r||r.contains(t.target))&&o.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}])&&At(e.prototype,n),o}(jt.a);Ht.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Ht.sources={API:"api",SILENT:"silent",USER:"user"};var Ft=Ht;function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var zt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ut(this,t),this.quill=e,this.options=n};zt.DEFAULTS={};var Kt=zt;function Vt(t){return function(t){if(Array.isArray(t))return Gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||qt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Jt=It("quill:selection"),$t=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Yt(this,t),this.index=e,this.length=n},Xt=function(){function t(e,n){var r=this;Yt(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.a.create("cursor",this),this.lastRange=this.savedRange=new $t(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||setTimeout(r.update.bind(r,Ft.sources.USER),1)})),this.emitter.on(Ft.events.EDITOR_CHANGE,(function(t,e){t===Ft.events.TEXT_CHANGE&&e.length()>0&&r.update(Ft.sources.SILENT)})),this.emitter.on(Ft.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var t=r.getNativeRange();null!=t&&t.start.node!==r.cursor.textNode&&r.emitter.once(Ft.events.SCROLL_UPDATE,(function(){try{r.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(Ft.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,o=n.startNode,i=n.startOffset,a=n.endNode,s=n.endOffset;r.setNativeRange(o,i,a,s)}})),this.update(Ft.sources.SILENT)}var e,n;return e=t,(n=[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(Ft.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!o.a.query(t,o.a.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=o.a.find(n.start.node,!1);if(null==r)return;if(r instanceof o.a.Leaf){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;var r,o=this.scroll.leaf(t),i=Wt(o,2),a=i[0],s=i[1];if(null==a)return null;var l=a.position(s,!0),c=Wt(l,2);r=c[0],s=c[1];var u=document.createRange();if(e>0){u.setStart(r,s);var p=this.scroll.leaf(t+e),d=Wt(p,2);if(a=d[0],s=d[1],null==a)return null;var f=a.position(s,!0),h=Wt(f,2);return r=h[0],s=h[1],u.setEnd(r,s),u.getBoundingClientRect()}var y,m="left";return r instanceof Text?(s<r.data.length?(u.setStart(r,s),u.setEnd(r,s+1)):(u.setStart(r,s-1),u.setEnd(r,s),m="right"),y=u.getBoundingClientRect()):(y=a.domNode.getBoundingClientRect(),s>0&&(m="right")),{bottom:y.top+y.height,height:y.height,left:y[m],right:y[m],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return Jt.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var r=n.map((function(t){var n=Wt(t,2),r=n[0],i=n[1],a=o.a.find(r,!0),s=a.offset(e.scroll);return 0===i?s:a instanceof o.a.Container?s+a.length():s+a.index(r,i)})),i=Math.min(Math.max.apply(Math,Vt(r)),this.scroll.length()-1),a=Math.min.apply(Math,[i].concat(Vt(r)));return new $t(a,i-a)}},{key:"normalizeNative",value:function(t){if(!Zt(this.root,t.startContainer)||!t.collapsed&&!Zt(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=t.collapsed?[t.index]:[t.index,t.index+t.length],r=[],o=this.scroll.length();return n.forEach((function(t,n){t=Math.min(o-1,t);var i,a=Wt(e.scroll.leaf(t),2),s=a[0],l=a[1],c=Wt(s.position(l,0!==n),2);i=c[0],l=c[1],r.push(i,l)})),r.length<2&&(r=r.concat(r)),r}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var n=this.getBounds(e.index,e.length);if(null!=n){var r=this.scroll.length()-1,o=Wt(this.scroll.line(Math.min(e.index,r)),1)[0],i=o;if(e.length>0&&(i=Wt(this.scroll.line(Math.min(e.index+e.length,r)),1)[0]),null!=o&&null!=i){var a=t.getBoundingClientRect();n.top<a.top?t.scrollTop-=a.top-n.top:n.bottom>a.bottom&&(t.scrollTop+=n.bottom-a.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Jt.info("setNativeRange",t,e,n,r),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var i=document.getSelection();if(null!=i)if(null!=t){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||o||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||r!==a.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var s=document.createRange();s.setStart(t,e),s.setEnd(n,r),i.removeAllRanges(),i.addRange(s)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ft.sources.API;if("string"==typeof e&&(n=e,e=!1),Jt.info("setRange",t),null!=t){var r=this.rangeToNative(t);this.setNativeRange.apply(this,Vt(r).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft.sources.USER,e=this.lastRange,n=this.getRange(),r=Wt(n,2),o=r[0],i=r[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!bt()(e,this.lastRange)){var a;!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode&&this.cursor.restore();var s,l=[Ft.events.SELECTION_CHANGE,yt()(this.lastRange),yt()(e),t];(a=this.emitter).emit.apply(a,[Ft.events.EDITOR_CHANGE].concat(l)),t!==Ft.sources.SILENT&&(s=this.emitter).emit.apply(s,l)}}}])&&Qt(e.prototype,n),t}();function Zt(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ee=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=n,this.modules={}}var e,n;return e=t,(n=[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/".concat(t));return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}])&&te(e.prototype,n),t}();ee.DEFAULTS={modules:{}},ee.themes={default:ee};var ne=ee;function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ce=It("quill"),ue=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(se(this,t),this.options=pe(e,r),this.container=this.options.container,null==this.container)return ce.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Ft,this.scroll=o.a.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Pt(this.scroll),this.selection=new Xt(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Ft.events.EDITOR_CHANGE,(function(t){t===Ft.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(Ft.events.SCROLL_UPDATE,(function(t,e){var r=n.selection.lastRange,o=r&&0===r.length?r.index:void 0;de.call(n,(function(){return n.editor.update(null,e,o)}),t)}));var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">".concat(i,"<p><br></p></div>"));this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}var e,n,r;return e=t,r=[{key:"debug",value:function(t){!0===t&&(t="log"),It.level(t)}},{key:"find",value:function(t){return t.__quill||o.a.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&ce.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}},{key:"register",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var i=t.attrName||t.blotName;"string"==typeof i?this.register("formats/"+i,t,e):Object.keys(t).forEach((function(r){n.register(r,t[r],e)}))}else null==this.imports[t]||r||ce.warn("Overwriting ".concat(t," with"),e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?o.a.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}],(n=[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var r=this,o=ie(fe(t,e,n),4);return t=o[0],e=o[1],n=o[3],de.call(this,(function(){return r.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ft.sources.API;return de.call(this,(function(){var r=n.getSelection(!0),i=new a.a;if(null==r)return i;if(o.a.query(t,o.a.Scope.BLOCK))i=n.editor.formatLine(r.index,r.length,oe({},t,e));else{if(0===r.length)return n.selection.format(t,e),i;i=n.editor.formatText(r.index,r.length,oe({},t,e))}return n.setSelection(r,Ft.sources.SILENT),i}),r)}},{key:"formatLine",value:function(t,e,n,r,o){var i,a=this,s=ie(fe(t,e,n,r,o),4);return t=s[0],e=s[1],i=s[2],o=s[3],de.call(this,(function(){return a.editor.formatLine(t,e,i)}),o,t,0)}},{key:"formatText",value:function(t,e,n,r,o){var i,a=this,s=ie(fe(t,e,n,r,o),4);return t=s[0],e=s[1],i=s[2],o=s[3],de.call(this,(function(){return a.editor.formatText(t,e,i)}),o,t,0)}},{key:"getBounds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e="number"==typeof t?this.selection.getBounds(t,n):this.selection.getBounds(t.index,t.length);var r=this.container.getBoundingClientRect();return{bottom:e.bottom-r.top,height:e.height,left:e.left-r.left,right:e.right-r.left,top:e.top-r.top,width:e.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=fe(t,e),r=ie(n,2);return t=r[0],e=r[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=fe(t,e),r=ie(n,2);return t=r[0],e=r[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return de.call(this,(function(){return o.editor.insertEmbed(e,n,r)}),i,e)}},{key:"insertText",value:function(t,e,n,r,o){var i,a=this,s=ie(fe(t,0,n,r,o),4);return t=s[0],i=s[2],o=s[3],de.call(this,(function(){return a.editor.insertText(t,e,i)}),o,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var r=this,o=ie(fe(t,e,n),4);return t=o[0],e=o[1],n=o[3],de.call(this,(function(){return r.editor.removeFormat(t,e)}),n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.sources.API;return de.call(this,(function(){t=new a.a(t);var n=e.getLength(),r=e.editor.deleteText(0,n),o=e.editor.applyDelta(t),i=o.ops[o.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),o.delete(1)),r.compose(o)}),n)}},{key:"setSelection",value:function(e,n,r){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var o=ie(fe(e,n,r),4);e=o[0],n=o[1],r=o[3],this.selection.setRange(new $t(e,n),r),r!==Ft.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.sources.API,n=(new a.a).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft.sources.API;return de.call(this,(function(){return t=new a.a(t),e.editor.applyDelta(t,n)}),n,!0)}}])&&le(e.prototype,n),r&&le(e,r),t}();function pe(t,e){if((e=u()(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==ue.DEFAULTS.theme){if(e.theme=ue.import("themes/".concat(e.theme)),null==e.theme)throw new Error("Invalid theme ".concat(e.theme,". Did you register it?"))}else e.theme=ne;var n=u()(!0,{},e.theme.DEFAULTS);[n,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var n=ue.import("modules/".concat(e));return null==n?ce.error("Cannot load ".concat(e," module. Are you sure you registered it?")):t[e]=n.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=u()(!0,{},ue.DEFAULTS,{modules:r},n,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,n){return e.modules[n]&&(t[n]=e.modules[n]),t}),{}),e}function de(t,e,n,r){if(this.options.strict&&!this.isEnabled()&&e===Ft.sources.USER)return new a.a;var o=null==n?null:this.getSelection(),i=this.editor.delta,s=t();if(null!=o&&(!0===n&&(n=o.index),null==r?o=he(o,s,e):0!==r&&(o=he(o,n,r,e)),this.setSelection(o,Ft.sources.SILENT)),s.length()>0){var l,c,u=[Ft.events.TEXT_CHANGE,s,i,e];(l=this.emitter).emit.apply(l,[Ft.events.EDITOR_CHANGE].concat(u)),e!==Ft.sources.SILENT&&(c=this.emitter).emit.apply(c,u)}return s}function fe(t,e,n,r,o){var i={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(o=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(o=r,r=n,n=e,e=0),"object"===re(n)?(i=n,o=r):"string"==typeof n&&(null!=r?i[n]=r:o=n),[t,e,i,o=o||Ft.sources.API]}function he(t,e,n,r){if(null==t)return null;var o,i;if(e instanceof a.a){var s=ie([t.index,t.index+t.length].map((function(t){return e.transformPosition(t,r!==Ft.sources.USER)})),2);o=s[0],i=s[1]}else{var l=ie([t.index,t.index+t.length].map((function(t){return t<e||t===e&&r===Ft.sources.USER?t:n>=0?t+n:Math.max(e,t+n)})),2);o=l[0],i=l[1]}return new $t(o,i-o)}function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function be(t,e){return(be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ue.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},ue.events=Ft.events,ue.sources=Ft.sources,ue.version="undefined"==typeof QUILL_VERSION?"dev":QUILL_VERSION,ue.imports={delta:a.a,parchment:o.a,"core/module":Kt,"core/theme":ne};var Ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&be(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ve(t);if(e){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}(n);function n(){return me(this,n),e.apply(this,arguments)}return n}(o.a.Container);Ce.allowedChildren=[W,V,Ce];var Oe=Ce;function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pe(t,e,n){return(Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_e(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t,e){if(e&&("object"===Te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_e(t);if(e){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).contentNode=document.createElement("span"),e.contentNode.setAttribute("contenteditable",!1),[].slice.call(e.domNode.childNodes).forEach((function(t){e.contentNode.appendChild(t)})),e.leftGuard=document.createTextNode("\ufeff"),e.rightGuard=document.createTextNode("\ufeff"),e.domNode.appendChild(e.leftGuard),e.domNode.appendChild(e.contentNode),e.domNode.appendChild(e.rightGuard),e}return e=i,(n=[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:Pe(_e(i.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e,n,r=t.data.split("\ufeff").join("");if(t===this.leftGuard)if(this.prev instanceof S){var i=this.prev.length();this.prev.insertAt(i,r),e={startNode:this.prev.domNode,startOffset:i+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(o.a.create(n),this),e={startNode:n,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof S?(this.next.insertAt(0,r),e={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(o.a.create(n),this.next),e={startNode:n,startOffset:r.length}));return t.data="\ufeff",e}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var r=n.restore(t.target);r&&(e.range=r)}}))}}])&&xe(e.prototype,n),i}(o.a.Embed);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e,n){return(Re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Me(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t,e){if(e&&("object"===Ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(o,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);if(e){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}(o);function o(){return ke(this,o),r.apply(this,arguments)}return e=o,(n=[{key:"value",value:function(t){var e=Re(Me(o.prototype),"value",this).call(this,t);return e.startsWith("rgb(")?"#"+(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join(""):e}}])&&Ie(e.prototype,n),o}(o.a.Attributor.Style),Ne=(new o.a.Attributor.Class("color","ql-color",{scope:o.a.Scope.INLINE}),new Be("color","color",{scope:o.a.Scope.INLINE})),Le=(new o.a.Attributor.Class("background","ql-bg",{scope:o.a.Scope.INLINE}),new Be("background","background-color",{scope:o.a.Scope.INLINE}));function He(t){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ze(t,e,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=We(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t,e){if(e&&("object"===He(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(i,t);var e,n,r,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=We(t);if(e){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}(i);function i(){return Fe(this,i),o.apply(this,arguments)}return e=i,r=[{key:"create",value:function(){return ze(We(i),"create",this).call(this)}},{key:"formats",value:function(){return!0}}],(n=[{key:"optimize",value:function(t){ze(We(i.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}])&&Ue(e.prototype,n),r&&Ue(e,r),i}(D);qe.blotName="bold",qe.tagName=["STRONG","B"];var Ge=qe;function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e,n){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ze(t,e){if(e&&("object"===Qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var en={scope:o.a.Scope.INLINE,whitelist:["serif","monospace"]},nn=(new o.a.Attributor.Class("font","ql-font",en),new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(o,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var o=tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ze(this,n)}}(o);function o(){return Ye(this,o),r.apply(this,arguments)}return e=o,(n=[{key:"value",value:function(t){return $e(tn(o.prototype),"value",this).call(this,t).replace(/["']/g,"")}}])&&Je(e.prototype,n),o}(o.a.Attributor.Style))("font","font-family",en));function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sn(t,e){if(e&&("object"===rn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ln(t);if(e){var o=ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}(n);function n(){return on(this,n),e.apply(this,arguments)}return n}(Ge);cn.blotName="italic",cn.tagName=["EM","I"];var un=cn;function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function yn(t,e){return(yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mn(t,e){if(e&&("object"===pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bn(t){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yn(t,e)}(i,t);var e,n,r,o=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bn(t);if(e){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mn(this,n)}}(i);function i(){return dn(this,i),o.apply(this,arguments)}return e=i,r=[{key:"create",value:function(t){var e=hn(bn(i),"create",this).call(this,t);return t=this.sanitize(t),e.setAttribute("href",t),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return function(t,e){var n=document.createElement("a");n.href=t;var r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}],(n=[{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e)return hn(bn(i.prototype),"format",this).call(this,t,e);e=this.constructor.sanitize(e),this.domNode.setAttribute("href",e)}}])&&fn(e.prototype,n),r&&fn(e,r),i}(D);function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tn(t,e,n){return(Tn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pn(t,e){if(e&&("object"===vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}gn.blotName="link",gn.tagName="A",gn.SANITIZED_URL="about:blank",gn.PROTOCOL_WHITELIST=["http","https","mailto","tel"];var jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(o,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pn(this,n)}}(o);function o(){return Cn(this,o),r.apply(this,arguments)}return e=o,(n=[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):Tn(Sn(o),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}])&&On(e,n),o}(D);jn.blotName="script",jn.tagName=["SUB","SUP"];var _n=jn,wn=(new o.a.Attributor.Class("size","ql-size",{scope:o.a.Scope.INLINE,whitelist:["small","large","huge"]}),new o.a.Attributor.Style("size","font-size",{scope:o.a.Scope.INLINE,whitelist:["10px","18px","32px"]}));function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rn(t,e){if(e&&("object"===En(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=An(t);if(e){var o=An(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rn(this,n)}}(n);function n(){return kn(this,n),e.apply(this,arguments)}return n}(D);Dn.blotName="strike",Dn.tagName="S";var Mn=Dn;function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t,e){if(e&&("object"===Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Un=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}(n);function n(){return Nn(this,n),e.apply(this,arguments)}return n}(D);Un.blotName="underline",Un.tagName="U";var zn=Un,Kn={scope:o.a.Scope.BLOCK,whitelist:["right","center","justify"]},Vn=new o.a.Attributor.Attribute("align","align",Kn),Wn=(new o.a.Attributor.Class("align","ql-align",Kn),new o.a.Attributor.Style("align","text-align",Kn)),qn={scope:o.a.Scope.BLOCK,whitelist:["rtl"]},Gn=new o.a.Attributor.Attribute("direction","dir",qn),Qn=(new o.a.Attributor.Class("direction","ql-direction",qn),new o.a.Attributor.Style("direction","direction",qn));function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function er(t,e){if(e&&("object"===Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nr(t)}function nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var or=It("quill:clipboard"),ir="__ql-matcher",ar=[[Node.TEXT_NODE,function(t,e){var n=t.data;if("O:P"===t.parentNode.tagName)return e.insert(n.trim());if(0===n.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!pr(t.parentNode).whiteSpace.startsWith("pre")){var r=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==t.previousSibling&&fr(t.parentNode)||null!=t.previousSibling&&fr(t.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==t.nextSibling&&fr(t.parentNode)||null!=t.nextSibling&&fr(t.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return e.insert(n)}],[Node.TEXT_NODE,yr],["br",function(t,e){return dr(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,yr],[Node.ELEMENT_NODE,function(t,e){var n=o.a.query(t);if(null==n)return e;if(n.prototype instanceof o.a.Embed){var r={},i=n.value(t);null!=i&&(r[n.blotName]=i,e=(new a.a).insert(r,n.formats(t)))}else"function"==typeof n.formats&&(e=ur(e,n.blotName,n.formats(t)));return e}],[Node.ELEMENT_NODE,mr],[Node.ELEMENT_NODE,function(t,e){var n=o.a.Attributor.Attribute.keys(t),r=o.a.Attributor.Class.keys(t),i=o.a.Attributor.Style.keys(t),a={};return n.concat(r).concat(i).forEach((function(e){var n=o.a.query(e,o.a.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(t),a[n.attrName])||(null==(n=sr[e])||n.attrName!==e&&n.keyName!==e||(a[n.attrName]=n.value(t)||void 0),null==(n=lr[e])||n.attrName!==e&&n.keyName!==e||(n=lr[e],a[n.attrName]=n.value(t)||void 0))})),Object.keys(a).length>0&&(e=ur(e,a)),e}],[Node.ELEMENT_NODE,function(t,e){var n={},r=t.style||{};return r.fontStyle&&"italic"===pr(t).fontStyle&&(n.italic=!0),r.fontWeight&&(pr(t).fontWeight.startsWith("bold")||parseInt(pr(t).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(e=ur(e,n)),parseFloat(r.textIndent||0)>0&&(e=(new a.a).insert("\t").concat(e)),e}],["li",function(t,e){var n=o.a.query(t);if(null==n||"list-item"!==n.blotName||!dr(e,"\n"))return e;for(var r=-1,i=t.parentNode;!i.classList.contains("ql-clipboard");)"list"===(o.a.query(i)||{}).blotName&&(r+=1),i=i.parentNode;return r<=0?e:e.compose((new a.a).retain(e.length()-1).retain(1,{indent:r}))}],["b",hr.bind(hr,"bold")],["i",hr.bind(hr,"italic")],["style",function(){return new a.a}]],sr=[Vn,Gn].reduce((function(t,e){return t[e.keyName]=e,t}),{}),lr=[Wn,Le,Ne,Qn,nn,wn].reduce((function(t,e){return t[e.keyName]=e,t}),{}),cr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(o,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rr(t);if(e){var o=rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return er(this,n)}}(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,t,e)).quill.root.addEventListener("paste",n.onPaste.bind(nr(n))),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],ar.concat(n.options.matchers).forEach((function(t){var r=$n(t,2),o=r[0],i=r[1];(e.matchVisual||i!==mr)&&n.addMatcher(o,i)})),n}return e=o,(n=[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[ot.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new a.a).insert(n,Jn({},ot.blotName,e[ot.blotName]))}var r=$n(this.prepareMatching(),2),o=r[0],i=r[1],s=function t(e,n,r){return e.nodeType===e.TEXT_NODE?r.reduce((function(t,n){return n(e,t)}),new a.a):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(o,i){var a=t(i,n,r);return i.nodeType===e.ELEMENT_NODE&&(a=n.reduce((function(t,e){return e(i,t)}),a),a=(i[ir]||[]).reduce((function(t,e){return e(i,t)}),a)),o.concat(a)}),new a.a):new a.a}(this.container,o,i);return dr(s,"\n")&&null==s.ops[s.ops.length-1].attributes&&(s=s.compose((new a.a).retain(s.length()-1).delete(1))),or.log("convert",this.container.innerHTML,s),this.container.innerHTML="",s}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,ue.sources.SILENT);else{var r=this.convert(e);this.quill.updateContents((new a.a).retain(t).concat(r),n),this.quill.setSelection(t+r.length(),ue.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),r=(new a.a).retain(n.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(ue.sources.SILENT),setTimeout((function(){r=r.concat(e.convert()).delete(n.length),e.quill.updateContents(r,ue.sources.USER),e.quill.setSelection(r.length()-n.length,ue.sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],n=[];return this.matchers.forEach((function(r){var o=$n(r,2),i=o[0],a=o[1];switch(i){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:e.push(a);break;default:[].forEach.call(t.container.querySelectorAll(i),(function(t){t[ir]=t[ir]||[],t[ir].push(a)}))}})),[e,n]}}])&&Zn(e.prototype,n),o}(Kt);function ur(t,e,n){return"object"===Yn(e)?Object.keys(e).reduce((function(t,n){return ur(t,n,e[n])}),t):t.reduce((function(t,r){return r.attributes&&r.attributes[e]?t.push(r):t.insert(r.insert,u()({},Jn({},e,n),r.attributes))}),new a.a)}function pr(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function dr(t,e){for(var n="",r=t.ops.length-1;r>=0&&n.length<e.length;--r){var o=t.ops[r];if("string"!=typeof o.insert)break;n=o.insert+n}return n.slice(-1*e.length)===e}function fr(t){if(0===t.childNodes.length)return!1;var e=pr(t);return["block","list-item"].indexOf(e.display)>-1}function hr(t,e,n){return ur(n,t,!0)}function yr(t,e){return dr(e,"\n")||(fr(t)||e.length()>0&&t.nextSibling&&fr(t.nextSibling))&&e.insert("\n"),e}function mr(t,e){if(fr(t)&&null!=t.nextElementSibling&&!dr(e,"\n\n")){var n=t.offsetHeight+parseFloat(pr(t).marginTop)+parseFloat(pr(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")}return e}function br(t){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cr(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Or(t)}function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}cr.DEFAULTS={matchers:[],matchVisual:!0};var xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tr(t);if(e){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(ue.events.EDITOR_CHANGE,(function(t,e,r,o){t!==ue.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&o!==ue.sources.USER?n.transform(e):n.record(e,r))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(Or(n))),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(Or(n))),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(Or(n))),n}return e=i,(n=[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();this.stack[e].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],ue.sources.USER),this.ignoreChange=!1;var r=function(t){var e=t.reduce((function(t,e){return t+(e.delete||0)}),0),n=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=o.a.query(t,o.a.Scope.BLOCK)})))}(t)&&(n-=1),n}(n[t]);this.quill.setSelection(r)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(e),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var o=this.stack.undo.pop();n=n.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=r;this.stack.undo.push({redo:t,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}])&&gr(e.prototype,n),i}(Kt);function Pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return _r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kr(t,e){if(e&&("object"===Sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}xr.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};var Rr=It("quill:keyboard"),Ar=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(a,t);var e,n,r,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kr(this,n)}}(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,e)).bindings={},Object.keys(n.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&n.options.bindings[e]&&n.addBinding(n.options.bindings[e])})),n.addBinding({key:a.keys.ENTER,shiftKey:null},Hr),n.addBinding({key:a.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:a.keys.BACKSPACE},{collapsed:!0},Br),n.addBinding({key:a.keys.DELETE},{collapsed:!0},Nr)):(n.addBinding({key:a.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Br),n.addBinding({key:a.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Nr)),n.addBinding({key:a.keys.BACKSPACE},{collapsed:!1},Lr),n.addBinding({key:a.keys.DELETE},{collapsed:!1},Lr),n.addBinding({key:a.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Br),n.listen(),n}return e=a,r=[{key:"match",value:function(t,e){return e=zr(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&e.key===(t.which||t.keyCode)}}],(n=[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=zr(t);if(null==r||null==r.key)return Rr.warn("Attempted to add invalid keyboard binding",r);"function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),r=u()(r,e,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){if(!e.defaultPrevented){var n=e.which||e.keyCode,r=(t.bindings[n]||[]).filter((function(t){return a.match(e,t)}));if(0!==r.length){var i=t.quill.getSelection();if(null!=i&&t.quill.hasFocus()){var s=jr(t.quill.getLine(i.index),2),l=s[0],c=s[1],u=jr(t.quill.getLeaf(i.index),2),p=u[0],d=u[1],f=jr(0===i.length?[p,d]:t.quill.getLeaf(i.index+i.length),2),h=f[0],y=f[1],m=p instanceof o.a.Text?p.value().slice(0,d):"",b=h instanceof o.a.Text?h.value().slice(y):"",g={collapsed:0===i.length,empty:0===i.length&&l.length()<=1,format:t.quill.getFormat(i),offset:c,prefix:m,suffix:b};r.some((function(e){if(null!=e.collapsed&&e.collapsed!==g.collapsed)return!1;if(null!=e.empty&&e.empty!==g.empty)return!1;if(null!=e.offset&&e.offset!==g.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==g.format[t]})))return!1}else if("object"===Sr(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=g.format[t]:!1===e.format[t]?null==g.format[t]:bt()(e.format[t],g.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(g.prefix)||null!=e.suffix&&!e.suffix.test(g.suffix)||!0===e.handler.call(t,i,g))}))&&e.preventDefault()}}}}))}}])&&wr(e.prototype,n),r&&wr(e,r),a}(Kt);function Mr(t,e){var n,r=t===Dr.keys.LEFT?"prefix":"suffix";return Pr(n={key:t,shiftKey:e,altKey:null},r,/^$/),Pr(n,"handler",(function(n){var r=n.index;return t===Dr.keys.RIGHT&&(r+=n.length+1),!(jr(this.quill.getLeaf(r),1)[0]instanceof o.a.Embed&&(t===Dr.keys.LEFT?e?this.quill.setSelection(n.index-1,n.length+1,ue.sources.USER):this.quill.setSelection(n.index-1,ue.sources.USER):e?this.quill.setSelection(n.index,n.length+1,ue.sources.USER):this.quill.setSelection(n.index+n.length+1,ue.sources.USER),1))})),n}function Br(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var n=jr(this.quill.getLine(t.index),1)[0],r={};if(0===e.offset){var o=jr(this.quill.getLine(t.index-1),1)[0];if(null!=o&&o.length()>1){var i=n.formats(),a=this.quill.getFormat(t.index-1,1);r=l.a.attributes.diff(i,a)||{}}}var s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-s,s,ue.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-s,s,r,ue.sources.USER),this.quill.focus()}}function Nr(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var r={},o=0,i=jr(this.quill.getLine(t.index),1)[0];if(e.offset>=i.length()-1){var a=jr(this.quill.getLine(t.index+1),1)[0];if(a){var s=i.formats(),c=this.quill.getFormat(t.index,1);r=l.a.attributes.diff(s,c)||{},o=a.length()}}this.quill.deleteText(t.index,n,ue.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index+o-1,n,r,ue.sources.USER)}}function Lr(t){var e=this.quill.getLines(t),n={};if(e.length>1){var r=e[0].formats(),o=e[e.length-1].formats();n=l.a.attributes.diff(o,r)||{}}this.quill.deleteText(t,ue.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,ue.sources.USER),this.quill.setSelection(t.index,ue.sources.SILENT),this.quill.focus()}function Hr(t,e){var n=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var r=Object.keys(e.format).reduce((function(t,n){return o.a.query(n,o.a.Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t}),{});this.quill.insertText(t.index,"\n",r,ue.sources.USER),this.quill.setSelection(t.index+1,ue.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==r[t]&&(Array.isArray(e.format[t])||"link"!==t&&n.quill.format(t,e.format[t],ue.sources.USER))}))}function Fr(t){return{key:Dr.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var n=o.a.query("code-block"),r=e.index,i=e.length,a=jr(this.quill.scroll.descendant(n,r),2),s=a[0],l=a[1];if(null!=s){var c=this.quill.getIndex(s),u=s.newlineIndex(l,!0)+1,p=s.newlineIndex(c+l+i),d=s.domNode.textContent.slice(u,p).split("\n");l=0,d.forEach((function(e,o){t?(s.insertAt(u+l,n.TAB),l+=n.TAB.length,0===o?r+=n.TAB.length:i+=n.TAB.length):e.startsWith(n.TAB)&&(s.deleteAt(u+l,n.TAB.length),l-=n.TAB.length,0===o?r-=n.TAB.length:i-=n.TAB.length),l+=e.length+1})),this.quill.update(ue.sources.USER),this.quill.setSelection(r,i,ue.sources.SILENT)}}}}function Ur(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],ue.sources.USER)}}}function zr(t){if("string"==typeof t||"number"==typeof t)return zr({key:t});if("object"===Sr(t)&&(t=yt()(t,!1)),"string"==typeof t.key)if(null!=Dr.keys[t.key.toUpperCase()])t.key=Dr.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[Ar]=t.shortKey,delete t.shortKey),t}Dr.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Dr.DEFAULTS={bindings:{bold:Ur("bold"),italic:Ur("italic"),underline:Ur("underline"),indent:{key:Dr.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",ue.sources.USER)}},outdent:{key:Dr.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",ue.sources.USER)}},"outdent backspace":{key:Dr.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",ue.sources.USER):null!=e.format.list&&this.quill.format("list",!1,ue.sources.USER)}},"indent code-block":Fr(!0),"outdent code-block":Fr(!1),"remove tab":{key:Dr.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,ue.sources.USER)}},tab:{key:Dr.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new a.a).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,ue.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,ue.sources.SILENT)}},"list empty enter":{key:Dr.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,ue.sources.USER),e.format.indent&&this.quill.format("indent",!1,ue.sources.USER)}},"checklist enter":{key:Dr.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=jr(this.quill.getLine(t.index),2),n=e[0],r=e[1],o=u()({},n.formats(),{list:"checked"}),i=(new a.a).retain(t.index).insert("\n",o).retain(n.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,ue.sources.USER),this.quill.setSelection(t.index+1,ue.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Dr.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=jr(this.quill.getLine(t.index),2),r=n[0],o=n[1],i=(new a.a).retain(t.index).insert("\n",e.format).retain(r.length()-o-1).retain(1,{header:null});this.quill.updateContents(i,ue.sources.USER),this.quill.setSelection(t.index+1,ue.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var n,r=e.prefix.length,o=jr(this.quill.getLine(t.index),2),i=o[0],s=o[1];if(s>r)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(t.index," ",ue.sources.USER),this.quill.history.cutoff();var l=(new a.a).retain(t.index-s).delete(r+1).retain(i.length()-2-s).retain(1,{list:n});this.quill.updateContents(l,ue.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-r,ue.sources.SILENT)}},"code exit":{key:Dr.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=jr(this.quill.getLine(t.index),2),n=e[0],r=e[1],o=(new a.a).retain(t.index+n.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,ue.sources.USER)}},"embed left":Mr(Dr.keys.LEFT,!1),"embed left shift":Mr(Dr.keys.LEFT,!0),"embed right":Mr(Dr.keys.RIGHT,!1),"embed right shift":Mr(Dr.keys.RIGHT,!0)}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Kr,Vr=function(t,e){return(Vr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Wr(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function qr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wr(arguments[e]));return t}Object.create,Object.create,n(28),function(t){t[t.None=0]="None",t[t.Redux=1]="Redux",t[t.Comments=2]="Comments"}(Kr||(Kr={})),function(){function t(){this.valueStruct={hasValue:!1},this.callbacks=[]}t.prototype.set=function(t){this.valueStruct={value:t,hasValue:!0},this.callbacks.forEach((function(e){e(t)})),this.callbacks=[]},t.prototype.getValue=function(t){var e=this;if(this.valueStruct.hasValue)try{return Promise.resolve(t(this.valueStruct.value))}catch(t){return Promise.reject(t)}return new Promise((function(n,r){e.callbacks.push((function(e){try{n(t(e))}catch(t){r(t)}}))}))}}(),function(){function t(){var t=this;this.promise=new Promise((function(e,n){t.onResolve=e,t.onReject=n}))}Object.defineProperty(t.prototype,"resolve",{get:function(){return this.onResolve},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reject",{get:function(){return this.onReject},enumerable:!1,configurable:!0})}(),function(){function t(t){var e=this;this.internalHandler=t,this.eventQueue=[],this._isProcessingEvents=!1,this.handler=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._isProcessingEvents?e.internalHandler.apply(e,qr(t)):e.eventQueue.push(t)}}Object.defineProperty(t.prototype,"isProcessingEvents",{get:function(){return this._isProcessingEvents},enumerable:!1,configurable:!0}),t.prototype.pauseProcessing=function(){this._isProcessingEvents=!1},t.prototype.startProcessing=function(){var t,e;if(!this._isProcessingEvents){this._isProcessingEvents=!0;try{for(var n=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.eventQueue),r=n.next();!r.done;r=n.next()){var o=r.value;this.handler.apply(this,qr(o))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.eventQueue=[]}}}();var Gr=Boolean,Qr=n(30);n.n(Qr).a;var Yr=function t(e,n,r){var o=function(t,e,n){return new Error(t)}(e);return o.name="StructuredError",o.innerException=r,o.tag=n,Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,t),o};function Jr(t){return function(t,e){return!(!t||!(t instanceof Yr||void 0!==t.isStructuredError))}(t)?t.stringify():t instanceof Error?t.name+":\n"+(Yr.enableStackLogging?function(t,e){return void 0===e&&(e=0),t?t.split("\n").slice(1+e,2+e).join("\n"):"<unable to get stack>"}(t.stack):""):"Unknown error"}function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e,n){return(eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oo(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ro(t,e){if(e&&("object"===$r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oo(t){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t){return t instanceof W||t instanceof V}Yr.enableStackLogging=!1,Yr.enableMessageLogging=!1,Yr.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0},stringify:{value:function(){return t=this.tag,e=this.stack,n=this.innerException,[void 0,"Tag: "+t,Yr.enableStackLogging?e:void 0,n?"----------\nInner exception: "+Jr(n):void 0].filter(Gr).join("\n");var t,e,n},enumerable:!1,writable:!0,configurable:!0},isStructuredError:{value:!0,enumerable:!1,writable:!1,configurable:!1}}),Object.setPrototypeOf?Object.setPrototypeOf(Yr,Error):Yr.__proto__=Error;var ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(i,t);var e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oo(t);if(e){var o=oo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ro(this,n)}}(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t)).emitter=e.emitter,Array.isArray(e.whitelist)&&(n.whitelist=e.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return e=i,(n=[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,e){var n=Xr(this.line(t),2),r=n[0],o=n[1],a=Xr(this.line(t+e),1)[0];if(eo(oo(i.prototype),"deleteAt",this).call(this,t,e),null!=a&&r!==a&&o>0){if(r instanceof V||a instanceof V)return void this.optimize();if(r instanceof ot){var s=r.newlineIndex(r.length(),!0);if(s>-1&&(r=r.split(s+1))===a)return void this.optimize()}else if(a instanceof ot){var l=a.newlineIndex(0);l>-1&&a.split(l+1)}var c=a.children.head instanceof v?null:a.children.head;r.moveChildren(a,c),r.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,e,n,r){(null==this.whitelist||this.whitelist[n])&&(eo(oo(i.prototype),"formatAt",this).call(this,t,e,n,r),this.optimize())}},{key:"insertAt",value:function(t,e,n){if(null==n||null==this.whitelist||this.whitelist[e]){if(t>=this.length())if(null==n||null==o.a.query(e,o.a.Scope.BLOCK)){var r=o.a.create(this.statics.defaultChild);this.appendChild(r),null==n&&e.endsWith("\n")&&(e=e.slice(0,-1)),r.insertAt(0,e,n)}else{var a=o.a.create(e,n);this.appendChild(a)}else eo(oo(i.prototype),"insertAt",this).call(this,t,e,n);this.optimize()}}},{key:"insertBefore",value:function(t,e){if(t.statics.scope===o.a.Scope.INLINE_BLOT){var n=o.a.create(this.statics.defaultChild);n.appendChild(t),t=n}eo(oo(i.prototype),"insertBefore",this).call(this,t,e)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(io,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function t(e,n,r){var i=[],a=r;return e.children.forEachAt(n,r,(function(e,n,r){io(e)?i.push(e):e instanceof o.a.Container&&(i=i.concat(t(e,n,a))),a-=r})),i};return n(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(eo(oo(i.prototype),"optimize",this).call(this,t,e),t.length>0&&this.emitter.emit(Ft.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return eo(oo(i.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var e=Ft.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(Ft.events.SCROLL_BEFORE_UPDATE,e,t),eo(oo(i.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(Ft.events.SCROLL_UPDATE,e,t)}}}])&&to(e.prototype,n),i}(o.a.Scroll);ao.blotName="scroll",ao.className="ql-editor",ao.tagName="DIV",ao.defaultChild="block",ao.allowedChildren=[W,V,Oe];var so=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Vr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.create=function(e){t.create.call(this,e)},e.prototype.deleteAt=function(e,n){try{t.prototype.deleteAt.call(this,e,n)}catch(t){t.message}},e.prototype.formatAt=function(e,n,r,o){try{t.prototype.formatAt.call(this,e,n,r,o)}catch(t){t.message}},e.prototype.update=function(e,n){try{t.prototype.update.call(this,e,n)}catch(t){t.message}},e}(ao);ue.register({"blots/block":W,"blots/block/embed":V,"blots/break":v,"blots/container":Oe,"blots/cursor":ft,"blots/embed":we,"blots/inline":D,"blots/scroll":so,"blots/text":S,"formats/link":gn,"formats/color":Ne,"formats/font":nn,"formats/size":wn,"formats/background":Le,"formats/bold":Ge,"formats/italic":un,"formats/underline":zn,"formats/strike":Mn,"formats/script":_n,"modules/clipboard":cr,"modules/history":xr,"modules/keyboard":Dr}),o.a.register(W,v,ft,D,so,S),e.default=ue}])},2594:function(t,e,n){var r=n(0);function o(t){return r.createElement("svg",t,[r.createElement("defs",{key:0},[r.createElement("rect",{id:"path-1",x:"2",y:"1",width:"270",height:"60",key:0}),r.createElement("filter",{x:"-1.3%",y:"-4.2%",width:"102.6%",height:"111.7%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[r.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),r.createElement("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),r.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1",key:2}),r.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0",type:"matrix",in:"shadowBlurOuter1",key:3})])]),r.createElement("g",{id:"Redlines",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.718693388",key:1},r.createElement("g",{id:"GhostCard_52px"},[r.createElement("g",{id:"Rectangle-2",key:0},[r.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),r.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd",xlinkHref:"#path-1",key:1}),r.createElement("rect",{stroke:"#EAEAEA",strokeWidth:"1",x:"2.5",y:"1.5",width:"269",height:"59",key:2})]),r.createElement("circle",{id:"Oval-8",fill:"#EAEAEA",cx:"27",cy:"28",r:"14",key:1}),r.createElement("rect",{id:"Rectangle1",fill:"#EAEAEA",x:"55",y:"16",width:"92",height:"11",rx:"5.5",key:2}),r.createElement("rect",{id:"Rectangle2",fill:"#EAEAEA",x:"55",y:"34",width:"204",height:"11",rx:"5.5",key:3})]))])}o.defaultProps={width:"274px",height:"52px",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 274 52",focusable:"false",version:"1.1"},t.exports=o,o.default=o}}]);
//# sourceMappingURL=sharedCommentsLazy.min.js.map